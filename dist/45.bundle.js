(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/GroupLayer":280,"esri/portal/support/layersLoader":1547,"esri/support/LayersMixin":1892})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[45,11],{1547:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(21),r(8),r(7),r(280),r(546),r(45),r(572),r(287)],void 0===(n=function(e,t,r,i,n,o,a,s,l,p){function y(e,t){var r,n,o=e.portalItem.type;switch(o){case"Feature Service":r=a.layerLookupMap.FeatureLayer;break;case"Stream Service":r=a.layerLookupMap.StreamLayer;break;case"Scene Service":r=a.layerLookupMap.SceneLayer;break;case"Feature Collection":r=a.layerLookupMap.FeatureLayer;break;default:throw new i("portal:unsupported-item-type-as-group","The item type '"+o+"' is not supported as a 'GroupLayer'")}return r().then(function(e){return n=e,c(t)}).then(function(r){return r&&Array.isArray(r.layers)?d(e,n,r,t):u(e,n,t)})}function u(e,t,i){if(!e.portalItem.url)return n.resolve();return r(e.portalItem.url,{responseType:"json",query:{f:"json"}}).then(function(r){var n=r.data;if(n&&Array.isArray(n.layers)){var o=n.layers.map(function(e){return{id:e.id,name:e.name}});return d(e,t,{layers:o},i)}})}function d(e,t,r,i){var n=r.showLegend,o=r.layers.slice();o.reverse(),o.forEach(function(r){var i=new t({portalItem:e.portalItem,layerId:r.id,sublayerTitleMode:"service-name"});if("Feature Collection"===e.portalItem.type){var o={origin:"portal-item",portal:e.portalItem.portal||s.getDefault()};i.read(r,o),null!=n&&i.read({showLegend:n},o)}e.add(i)})}function c(e){if(!1===e.supportsData)return n.resolve();var t=e.instance;return t.portalItem.fetchData().catch(function(){return null}).then(function(e){var r,i=e;if(function(e){return"stream"!==e.type&&"layerId"in e}(t)){var n=!0;if(e&&Array.isArray(i.layers)){null==t.layerId&&(t.layerId=i.layers[0].id);for(var o=0;o<i.layers.length;o++)if(i.layers[o].id===t.layerId){r=i.layers[o];break}r&&(1===i.layers.length&&(n=!1),null!=e.showLegend&&(r.showLegend=e.showLegend))}return n&&"service-name"!==t.sublayerTitleMode&&(t.sublayerTitleMode="item-title-and-service-name"),r}return e})}Object.defineProperty(t,"__esModule",{value:!0}),t.load=function(e){var t=e.instance.portalItem;return t&&t.id?t.load().then(function(){return function(e){var t=e.instance.portalItem;if(-1===e.supportedTypes.indexOf(t.type))throw new i("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:t.type,expectedType:e.supportedTypes.join(", ")})}(e)}).then(function(){return function(e){var t=e.instance,r=t.portalItem,i=r.url,n=r.title,a=l.createForItem(r);return t.isInstanceOf(o)?(t.read({title:n},a),y(t,e)):(i&&t.read({url:i},a),c(e).then(function(e){return e&&t.read(e,a),t.read({title:n},a),p.loadStyleRenderer(t,a)}))}(e)}):n.resolve()}}.apply(null,i))||(e.exports=n)},1892:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(0),r(4),r(16),r(273),r(9),r(7),r(1),r(65)],void 0===(n=function(e,t,r,i,n,o,a,s,l,p,y){function u(e){return e&&null!=e.layers}function d(e,t,r){for(var i,n,o=0,a=e.length;o<a;o++){if((i=e.getItemAt(o))[t]===r)return i;if(u(i)&&(n=d(i.layers,t,r)))return n}}var c=o.ofType(y),f=s.getLogger("esri.support.LayersMixin");return function(e){function t(t){var r=e.call(this,t)||this;r.layers=new c;return r.layers.on("after-add",function(e){return function(e){e.parent&&e.parent!==r&&"remove"in e.parent&&e.parent.remove(e),e.parent=r,r.layerAdded(e),"elevation"===e.type&&f.error("Layer '"+e.title+", id:"+e.id+"' of type '"+e.type+"' is not supported as an operational layer and will therefore be ignored.")}(e.item)}),r.layers.on("after-remove",function(e){return function(e){e.parent=null,r.layerRemoved(e)}(e.item)}),r}return r(t,e),t.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)},Object.defineProperty(t.prototype,"layers",{set:function(e){this._set("layers",a.referenceSetter(e,this._get("layers"),c))},enumerable:!0,configurable:!0}),t.prototype.findLayerById=function(e){return d(this.layers,"id",e)},t.prototype.add=function(e,t){var r=this,i=this.layers;t=i.getNextIndex(t),e instanceof y?(e.parent===this&&this.reorder(e,t),i.add(e,t)):l.isThenable(e)?e.then(function(e){r.destroyed||r.add(e,t)}):f.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")},t.prototype.addMany=function(e,t){var r=this,i=this.layers;t=i.getNextIndex(t),e.slice().forEach(function(e){e.parent!==r?(i.add(e,t),t+=1):r.reorder(e,t)})},t.prototype.findLayerByUid=function(e){return d(this.layers,"uid",e)},t.prototype.remove=function(e){return this.layers.remove(e)},t.prototype.removeMany=function(e){return this.layers.removeMany(e)},t.prototype.removeAll=function(){return this.layers.removeAll()},t.prototype.reorder=function(e,t){return this.layers.reorder(e,t)},t.prototype.layerAdded=function(e){},t.prototype.layerRemoved=function(e){},i([p.property({type:c,cast:a.castForReferenceSetter})],t.prototype,"layers",null),i([p.subclass("esri.support.LayersMixin")],t)}(p.declared(n))}.apply(null,i))||(e.exports=n)},280:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(0),r(263),r(551),r(120),r(7),r(1),r(46),r(65),r(96),r(94),r(1892)],void 0===(n=function(e,t,i,n,o,a,s,l,p,y,u,d,c,f){return function(e){function t(t){var r=e.call(this)||this;return r._visibilityHandles={},r.fullExtent=void 0,r.operationalLayerType="GroupLayer",r.spatialReference=void 0,r.type="group",r._visibilityWatcher=r._visibilityWatcher.bind(r),r}return i(t,e),t.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)},t.prototype._writeLayers=function(e,t,r,i){var n=[];if(!e)return n;e.forEach(function(e){if(e.write){var t=e.write(null,i);t&&t.layerType&&n.push(t)}}),t.layers=n},Object.defineProperty(t.prototype,"visibilityMode",{set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)},enumerable:!0,configurable:!0}),t.prototype.load=function(){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]})),this.when()},t.prototype.loadAll=function(){var e=this;return o.safeCast(a.loadAll(this,function(t){t(e.layers)}))},t.prototype.layerAdded=function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)},t.prototype.layerRemoved=function(e){var t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":case"3d":return l.create(function(e){r.e(71).then(function(){var t=[r(2088)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._turnOffOtherLayers=function(e){this.layers.forEach(function(t){t!==e&&(t.visible=!1)})},t.prototype._enforceVisibility=function(e,t){if(y.getProperties(this).initialized){var r=this.layers,i=r.find(function(e){return e.visible});switch(e){case"exclusive":r.length&&!i&&((i=r.getItemAt(0)).visible=!0),this._turnOffOtherLayers(i);break;case"inherited":r.forEach(function(e){e.visible=t})}}},t.prototype._visibleWatcher=function(e){"inherited"===this.visibilityMode&&this.layers.forEach(function(t){t.visible=e})},t.prototype._visibilityWatcher=function(e,t,r,i){var n=i;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(n):this._isAnyLayerVisible()||(n.visible=!0);break;case"inherited":n.visible=this.visible}},t.prototype._isAnyLayerVisible=function(){return this.layers.some(function(e){return e.visible})},n([p.property()],t.prototype,"fullExtent",void 0),n([p.property({json:{read:!1,write:{ignoreOrigin:!0}}})],t.prototype,"layers",void 0),n([p.writer("layers")],t.prototype,"_writeLayers",null),n([p.property({type:["GroupLayer"]})],t.prototype,"operationalLayerType",void 0),n([p.property({json:{write:!1}})],t.prototype,"portalItem",void 0),n([p.property()],t.prototype,"spatialReference",void 0),n([p.property({json:{read:!1},readOnly:!0,value:"group"})],t.prototype,"type",void 0),n([p.property({type:String,value:"independent",json:{write:!0}})],t.prototype,"visibilityMode",null),n([p.subclass("esri.layers.GroupLayer")],t)}(p.declared(u,f,s,d,c))}.apply(null,i))||(e.exports=n)}}]);
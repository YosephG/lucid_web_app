(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/TileLayer":459,"esri/layers/support/arcgisLayers":1265,"esri/views/webgl/Texture":1304,"esri/views/webgl/FramebufferObject":1309,"esri/layers/support/lazyLayerLoader":1376,"esri/views/webgl/Renderbuffer":1474,"dojox/xml/parser":1475,"esri/views/3d/layers/VectorTileLayerView3D":2137})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[78,15,31,48],{1265:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(10),r(134),r(24),r(9),r(8),r(131),r(131),r(1376)],void 0===(n=function(e,t,i,n,o,a,s,l,c,h){function u(e){return(0,h.layerLookupMap[e])()}function p(e){return o(e,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(function(e){return e.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.fromUrl=function(e){return function(e){var t=c.parse(e);if(!t)return s.reject(new a("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e}));var r,i=t.serverType,o=t.sublayer;switch(i){case"MapServer":r=null!=o?"FeatureLayer":function(e){return p(e).then(function(e){return e.tileInfo})}(e).then(function(e){return e?"TileLayer":"MapImageLayer"});break;case"ImageServer":r=p(e).then(function(e){var t=e.tileInfo&&e.tileInfo.format;return e.tileInfo?t&&"LERC"===t.toUpperCase()&&e.cacheType&&"elevation"===e.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case"SceneServer":r=p(t.url.path).then(function(e){var t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer"};if(e&&Array.isArray(e.layers)&&e.layers.length>0){var r=e.layers[0].layerType;if(null!=t[r])return t[r]}return"SceneLayer"});break;default:r={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"}[i]}var l,h={FeatureLayer:!0,SceneLayer:!0},d={parsedUrl:t,Constructor:null,sublayerIds:null};return n(r).then(function(t){if(l=t,h[t]&&null==o)return function(e){return p(e).then(function(e){return e&&Array.isArray(e.layers)?e.layers.map(function(e){return e.id}).reverse():[]})}(e).then(function(e){1!==e.length&&(d.sublayerIds=e)})}).then(function(){return u(l)}).then(function(e){return d.Constructor=e,d})}(e.url).then(function(t){var n=function(e,t){var r=e.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===r||"esri.layers.StreamLayer"===r?i({outFields:["*"]},t):t}(t,i({},e.properties,{url:e.url}));return t.sublayerIds?s.create(function(e){return Promise.resolve().then(function(){var t=[r(237)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(e){var r=new e({title:t.parsedUrl.title});return function(e,t){return e.sublayerIds.map(function(r){return new e.Constructor(i({},t,{layerId:r,sublayerTitleMode:"service-name"}))})}(t,n).forEach(function(e){return r.add(e)}),s.resolve(r)}):s.resolve(new t.Constructor(n))})},t.fetchServerVersion=function(e){if(!l.test(e))return s.reject();var t=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return o(t,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(e){return e.data&&e.data.currentVersion?e.data.currentVersion:s.reject()})}}.apply(null,i))||(e.exports=n)},1304:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11)],void 0===(n=function(e,t,r){return function(){function e(t,i,n){this._context=null,this._glName=null,this._id=-1,this._desc=void 0,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._boundToUnits=new Set,this._context=t,this._desc={pixelFormat:i.pixelFormat,internalFormat:i.internalFormat,dataType:i.dataType,target:i.target?i.target:3553,samplingMode:i.samplingMode?i.samplingMode:9729,wrapMode:i.wrapMode?i.wrapMode:10497,maxAnisotropy:i.maxAnisotropy,flipped:void 0!==i.flipped&&i.flipped,hasMipmap:void 0!==i.hasMipmap&&i.hasMipmap,level:void 0!==i.level?i.level:0,unpackAlignment:i.unpackAlignment?i.unpackAlignment:4,width:i.width,height:i.height,preMultiplyAlpha:void 0!==i.preMultiplyAlpha&&i.preMultiplyAlpha},this._id=++e._nextId,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(0),this.setData(n)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(this._context){if(this._glName){var t=this._context.gl;this._boundToUnits.forEach(function(t){e._context.bindTexture(null,t)}),t.deleteTexture(this._glName),this._glName=null}r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(0),this._context=null}},e.prototype.resize=function(e,t){var r=this._desc;r.width===e&&r.height===t||(r.width=e,r.height=t,this.setData(null))},e.prototype.setData=function(t){var r=this._context.gl;this._glName||(this._glName=r.createTexture()),void 0===t&&(t=null),null===t&&(this._desc.width=this._desc.width||4,this._desc.height=this._desc.height||4);var i=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var n=this._desc;if(e._validateTexture(n),r.pixelStorei(r.UNPACK_ALIGNMENT,n.unpackAlignment),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n.flipped?1:0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.preMultiplyAlpha),t instanceof ImageData||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)n.width&&n.height&&console.assert(t.width===n.width&&t.height===n.height),r.texImage2D(r.TEXTURE_2D,n.level,n.internalFormat?n.internalFormat:n.pixelFormat,n.pixelFormat,n.dataType,t),void 0===this._desc.width&&(this._desc.width=t.width),void 0===this._desc.height&&(this._desc.height=t.height);else{null!=n.width&&null!=n.height||console.error("Width and height must be specified!");var o=n.internalFormat?n.internalFormat:n.pixelFormat,a=n.pixelFormat;r.DEPTH24_STENCIL8&&o===r.DEPTH_STENCIL&&(o=r.DEPTH24_STENCIL8),r.texImage2D(r.TEXTURE_2D,n.level,o,n.width,n.height,0,a,n.dataType,t)}n.hasMipmap&&this.generateMipmap(),e._applySamplingMode(r,this._desc),e._applyWrapMode(r,this._desc),e._applyAnisotropicFilteringParameters(this._context,this._desc),this._context.bindTexture(i,0)},e.prototype.updateData=function(e,t,r,i,n,o){o||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");var a=this._context.gl,s=this._desc,l=this._context.getBoundTexture(0);this._context.bindTexture(this,0),(t<0||r<0||i>s.width||n>s.height||t+i>s.width||r+n>s.height)&&console.error("An attempt to update out of bounds of the texture!"),o instanceof ImageData||o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement?(console.assert(o.width===i&&o.height===n),a.texSubImage2D(a.TEXTURE_2D,e,t,r,s.pixelFormat,s.dataType,o)):a.texSubImage2D(a.TEXTURE_2D,e,t,r,i,n,s.pixelFormat,s.dataType,o),this._context.bindTexture(l,0)},e.prototype.generateMipmap=function(){var t=this._desc;t.hasMipmap||(t.hasMipmap=!0,e._validateTexture(t)),9729===t.samplingMode?(this._samplingModeDirty=!0,t.samplingMode=9985):9728===t.samplingMode&&(this._samplingModeDirty=!0,t.samplingMode=9984);var r=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var i=this._context.gl;i.generateMipmap(i.TEXTURE_2D),this._context.bindTexture(r,0)},e.prototype.setSamplingMode=function(t){t!==this._desc.samplingMode&&(this._desc.samplingMode=t,e._validateTexture(this._desc),this._samplingModeDirty=!0)},e.prototype.setWrapMode=function(t){t!==this._desc.wrapMode&&(this._desc.wrapMode=t,e._validateTexture(this._desc),this._wrapModeDirty=!0)},e.prototype.applyChanges=function(){var t=this._context.gl,r=this._desc;this._samplingModeDirty&&(e._applySamplingMode(t,r),this._samplingModeDirty=!1),this._wrapModeDirty&&(e._applyWrapMode(t,r),this._wrapModeDirty=!1)},e.prototype.setBoundToUnit=function(e,t){t?this._boundToUnits.add(e):this._boundToUnits.delete(e)},e._isPowerOfTwo=function(e){return 0==(e&e-1)},e._validateTexture=function(t){(t.width<0||t.height<0)&&console.error("Negative dimension parameters are not allowed!"),e._isPowerOfTwo(t.width)&&e._isPowerOfTwo(t.height)||(33071!==t.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),t.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))},e._applySamplingMode=function(e,t){var r=t.samplingMode;9985===r||9987===r?r=9729:9984!==r&&9986!==r||(r=9728),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.samplingMode)},e._applyWrapMode=function(e,t){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t.wrapMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t.wrapMode)},e._applyAnisotropicFilteringParameters=function(e,t){if(null!=t.maxAnisotropy){var r=e.capabilities.textureFilterAnisotropic;if(r){var i=e.gl;i.texParameterf(i.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY,t.maxAnisotropy)}}},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},1309:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(1474),r(1304)],void 0===(n=function(e,t,r,i,n){return function(){function e(t,o,a,s){if(this._context=null,this._glName=null,this._depthAttachment=null,this._stencilAttachment=null,this._colorAttachment=null,this._initialized=!1,this._context=t,this._desc={colorTarget:o.colorTarget,depthStencilTarget:o.depthStencilTarget,width:o.width,height:o.height,multisampled:o.multisampled},this._id=e._nextId++,r("esri-webgl-debug")&&t.instanceCounter.incrementCount(4),a){var l=void 0;a instanceof n?(this._colorAttachment=a,l=a.descriptor):(l=a,this._colorAttachment=new n(this._context,l)),0!==this._desc.colorTarget&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!"),e._validateTextureDimensions(l,this._desc)}if(s instanceof i)2===o.depthStencilTarget?this._stencilAttachment=s:1===o.depthStencilTarget||3===o.depthStencilTarget?this._depthAttachment=s:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER'),e._validateBufferDimensions(s.descriptor,this._desc);else if(s){this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");var c=void 0;s instanceof n?(this._depthStencilTexture=s,c=this._depthStencilTexture.descriptor):(c=s,this._depthStencilTexture=new n(this._context,c)),e._validateTextureDimensions(c,this._desc)}}return e.create=function(t,r){return new e(t,r)},e.createWithAttachments=function(t,r,i,n){return new e(t,i,r,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this._colorAttachment instanceof n?this._colorAttachment:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthStencilTexture",{get:function(){return this._depthStencilTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._desc.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._desc.height},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._context&&(this._disposeColorAttachment(),this._disposeDepthStencilAttachments(),this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(4),this._context=null)},e.prototype.attachColorTexture=function(t){if(t){var r=t.descriptor;if(e._validateTextureDimensions(r,this._desc),this._disposeColorAttachment(),this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl;i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.glName,0)}this._colorAttachment=t}},e.prototype.detachColorTexture=function(){var e=void 0;if(this._colorAttachment instanceof n){if(e=this._colorAttachment,this._initialized){this._context.bindFramebuffer(this);var t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)}this._colorAttachment=null}return e},e.prototype.attachDepthStencilTexture=function(t){if(t){var r=t.descriptor;if(34041!==r.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),34042!==r.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8_WEBGL!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),e._validateTextureDimensions(r,this._desc),4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl;i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,t.glName,0)}this._depthStencilTexture=t}},e.prototype.detachDepthStencilTexture=function(){var e=this._depthStencilTexture;if(e&&this._initialized){this._context.bindFramebuffer(this);var t=this._context.gl;this._context.gl.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,null,0)}return this._depthStencilTexture=null,e},e.prototype.attachDepthStencilBuffer=function(t){if(t){var r=t.descriptor;if(34041!==r.internalFormat&&33189!==r.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat"),e._validateBufferDimensions(r,this._desc),this._disposeDepthStencilAttachments(),this._desc.depthStencilTarget=34041===r.internalFormat?3:1,this._initialized){this._context.bindFramebuffer(this);var i=this._context.gl,n=1===this._desc.depthStencilTarget?i.DEPTH_ATTACHMENT:i.DEPTH_STENCIL_ATTACHMENT;i.framebufferRenderbuffer(i.FRAMEBUFFER,n,i.RENDERBUFFER,t.glName)}this._depthAttachment=t}},e.prototype.detachDepthStencilBuffer=function(){var e=this._context.gl,t=this._depthAttachment;if(t&&this._initialized){this._context.bindFramebuffer(this);var r=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,null)}return this._depthAttachment=null,t},e.prototype.copyToTexture=function(e,t,r,i,n,o,a){(e<0||t<0||n<0||o<0)&&console.error("Offsets cannot be negative!"),(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!");var s=this._desc,l=a.descriptor;3553!==a.descriptor.target&&console.error("Texture target must be TEXTURE_2D!"),(e+r>s.width||t+i>s.height||n+r>l.width||o+i>l.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");var c=this._context;c.bindTexture(a),c.bindFramebuffer(this),c.gl.copyTexSubImage2D(3553,0,n,o,e,t,r,i)},e.prototype.readPixels=function(e,t,r,i,n,o,a){(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!"),a||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(e,t,r,i,n,o,a)},e.prototype.resize=function(t,r){var i=this._desc;if(i.width!==t||i.height!==r){if(!this._initialized){if(i.width=t,i.height=r,this._colorAttachment instanceof n)(o=this._colorAttachment).resize(t,r);return void(this._depthStencilTexture&&this._depthStencilTexture.resize(t,r))}var o,a;if(i.width=t,i.height=r,this._colorAttachment instanceof n)(a=(o=this._colorAttachment).descriptor).width=t,a.height=r,this._colorAttachment.dispose(),this._colorAttachment=new n(this._context,a),e._validateTextureDimensions(o.descriptor,this._desc);else this._colorAttachment&&this._disposeColorAttachment();if(null!=this._depthStencilTexture)(a=this._depthStencilTexture.descriptor).width=t,a.height=r,this._depthStencilTexture.dispose(),this._depthStencilTexture=new n(this._context,a);else(this._depthAttachment||this._stencilAttachment)&&this._disposeDepthStencilAttachments();this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1}},e.prototype.initialize=function(){if(this._initialized)return!1;var e=this._context.gl;this._glName&&e.deleteFramebuffer(this._glName);var t=e.createFramebuffer(),r=this._desc;if(e.bindFramebuffer(e.FRAMEBUFFER,t),!this._colorAttachment)if(0===r.colorTarget){var o={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:r.width,height:r.height};this._colorAttachment=new n(this._context,o)}else{var a=new i(this._context,{internalFormat:32854,width:r.width,height:r.height});e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,a.glName),this._colorAttachment=a}if(this._colorAttachment instanceof n){var s=this._colorAttachment;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s.glName,0)}switch(r.depthStencilTarget){case 1:case 3:this._depthAttachment||(this._depthAttachment=new i(this._context,{internalFormat:1===r.depthStencilTarget?33189:34041,width:r.width,height:r.height}));var l=1===r.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new i(this._context,{internalFormat:36168,width:r.width,height:r.height})),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:if(!this._depthStencilTexture){this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!");var c={target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:r.width,height:r.height};this._depthStencilTexture=new n(this._context,c)}e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,this._depthStencilTexture.glName,0)}return e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!"),this._glName=t,this._initialized=!0,!0},e.prototype._disposeColorAttachment=function(){if(this._colorAttachment instanceof n){var e=this._colorAttachment;if(this._initialized)this._context.bindFramebuffer(this),(r=this._context.gl).framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0);e.dispose()}else if(this._colorAttachment instanceof WebGLRenderbuffer){var t=this._colorAttachment,r=this._context.gl;this._initialized&&(this._context.bindFramebuffer(this),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(t)}this._colorAttachment=null},e.prototype._disposeDepthStencilAttachments=function(){var e=this._context.gl;if(this._depthAttachment){if(this._initialized){this._context.bindFramebuffer(this);var t=1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT;e.framebufferRenderbuffer(e.FRAMEBUFFER,t,e.RENDERBUFFER,null)}this._depthAttachment.dispose(),this._depthAttachment=null}this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)},e._validateBufferDimensions=function(e,t){console.assert(e.width>=0&&e.height>=0),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(t.width=e.width,t.height=e.height)},e._validateTextureDimensions=function(e,t){console.assert(e.width>=0&&e.height>=0),3553!==e.target&&console.error("Texture type must be TEXTURE_2D!"),void 0!==t.width&&t.width>=0&&void 0!==t.height&&t.height>=0?t.width===e.width&&t.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(t.width=e.width,t.height=e.height)},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},1376:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(8)],void 0===(n=function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.layerLookupMap={CSVLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[r(247)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ElevationLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[r(243)];e.apply(null,t)}.bind(this)).catch(r.oe)})},FeatureLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[r(93)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GroupLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[r(237)];e.apply(null,t)}.bind(this)).catch(r.oe)})},GeoRSSLayer:function(){return i.create(function(e){return r.e(16).then(function(){var t=[r(1271)];e.apply(null,t)}.bind(this)).catch(r.oe)})},ImageryLayer:function(){return i.create(function(e){return r.e(29).then(function(){var t=[r(1269)];e.apply(null,t)}.bind(this)).catch(r.oe)})},KMLLayer:function(){return i.create(function(e){return r.e(18).then(function(){var t=[r(1272)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapImageLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[r(113)];e.apply(null,t)}.bind(this)).catch(r.oe)})},MapNotesLayer:function(){return i.create(function(e){return r.e(47).then(function(){var t=[r(1522)];e.apply(null,t)}.bind(this)).catch(r.oe)})},OpenStreetMapLayer:function(){return i.create(function(e){return r.e(19).then(function(){var t=[r(1273)];e.apply(null,t)}.bind(this)).catch(r.oe)})},PointCloudLayer:function(){return i.create(function(e){return r.e(28).then(function(){var t=[r(1274)];e.apply(null,t)}.bind(this)).catch(r.oe)})},SceneLayer:function(){return i.create(function(e){return Promise.resolve().then(function(){var t=[r(245)];e.apply(null,t)}.bind(this)).catch(r.oe)})},IntegratedMeshLayer:function(){return i.create(function(e){return r.e(17).then(function(){var t=[r(1264)];e.apply(null,t)}.bind(this)).catch(r.oe)})},StreamLayer:function(){return i.create(function(e){return r.e(14).then(function(){var t=[r(1270)];e.apply(null,t)}.bind(this)).catch(r.oe)})},TileLayer:function(){return i.create(function(e){return r.e(48).then(function(){var t=[r(459)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnknownLayer:function(){return i.create(function(e){return r.e(49).then(function(){var t=[r(1523)];e.apply(null,t)}.bind(this)).catch(r.oe)})},UnsupportedLayer:function(){return i.create(function(e){return r.e(50).then(function(){var t=[r(1524)];e.apply(null,t)}.bind(this)).catch(r.oe)})},VectorTileLayer:function(){return i.create(function(e){return r.e(4).then(function(){var t=[r(1267)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WebTileLayer:function(){return i.create(function(e){return r.e(20).then(function(){var t=[r(1266)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMSLayer:function(){return i.create(function(e){return r.e(21).then(function(){var t=[r(1275)];e.apply(null,t)}.bind(this)).catch(r.oe)})},WMTSLayer:function(){return i.create(function(e){return r.e(80).then(function(){var t=[r(1525)];e.apply(null,t)}.bind(this)).catch(r.oe)})},BingMapsLayer:function(){return i.create(function(e){return r.e(7).then(function(){var t=[r(246)];e.apply(null,t)}.bind(this)).catch(r.oe)})}}}.apply(null,i))||(e.exports=n)},1474:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11)],void 0===(n=function(e,t,r){return function(){function e(t,i){this._context=t,this._desc=i,this._glName=null,this._id=-1;var n=this._context.gl;r("esri-webgl-debug")&&this._context.instanceCounter.incrementCount(5),this._id=++e._nextId,this._glName=n.createRenderbuffer(),this._context.bindRenderbuffer(this),n.renderbufferStorage(n.RENDERBUFFER,i.internalFormat,i.width,i.height)}return Object.defineProperty(e.prototype,"descriptor",{get:function(){return this._desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"glName",{get:function(){return this._glName},enumerable:!0,configurable:!0}),e.prototype.resize=function(e,t){var r=this._context.gl,i=this._desc;i.width===e&&i.height===t||(i.width=e,i.height=t,this._context.bindRenderbuffer(this),r.renderbufferStorage(r.RENDERBUFFER,i.internalFormat,i.width,i.height))},e.prototype.dispose=function(){this._glName&&(this._context.gl.deleteRenderbuffer(this._glName),this._glName=null),r("esri-webgl-debug")&&this._context.instanceCounter.decrementCount(5),this._context=null},e._nextId=0,e}()}.apply(null,i))||(e.exports=n)},1475:function(e,t,r){var i,n;i=[r(13),r(14),r(29),r(62),r(176)],void 0===(n=function(e){return e.getObject("xml.parser",!0,dojox),dojox.xml.parser.parse=function(t,r){var i,n=e.doc;if(r=r||"text/xml",t&&e.trim(t)&&"DOMParser"in e.global){var o=new DOMParser,a=(i=o.parseFromString(t,r)).documentElement,s="http://www.mozilla.org/newlayout/xml/parsererror.xml";if("parsererror"==a.nodeName&&a.namespaceURI==s){var l=a.getElementsByTagNameNS(s,"sourcetext")[0];throw l&&(l=l.firstChild.data),new Error("Error parsing text "+a.firstChild.data+" \n"+l)}return i}if("ActiveXObject"in e.global){var c=function(e){return"MSXML"+e+".DOMDocument"},h=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];if(e.some(h,function(e){try{i=new ActiveXObject(e)}catch(e){return!1}return!0}),t&&i){i.async=!1,i.loadXML(t);var u=i.parseError;if(0!==u.errorCode)throw new Error("Line: "+u.line+"\nCol: "+u.linepos+"\nReason: "+u.reason+"\nError Code: "+u.errorCode+"\nSource: "+u.srcText)}if(i)return i}else if(n.implementation&&n.implementation.createDocument){if(t&&e.trim(t)&&n.createElement){var p=n.createElement("xml");p.innerHTML=t;var d=n.implementation.createDocument("foo","",null);return e.forEach(p.childNodes,function(e){d.importNode(e,!0)}),d}return n.implementation.createDocument("","",null)}return null},dojox.xml.parser.textContent=function(t,r){if(arguments.length>1){var i=t.ownerDocument||e.doc;return dojox.xml.parser.replaceChildren(t,i.createTextNode(r)),r}if(void 0!==t.textContent)return t.textContent;var n="";return t&&e.forEach(t.childNodes,function(e){switch(e.nodeType){case 1:case 5:n+=dojox.xml.parser.textContent(e);break;case 3:case 2:case 4:n+=e.nodeValue}}),n},dojox.xml.parser.replaceChildren=function(t,r){var i=[];e.isIE&&e.forEach(t.childNodes,function(e){i.push(e)}),dojox.xml.parser.removeChildren(t),e.forEach(i,e.destroy),e.isArray(r)?e.forEach(r,function(e){t.appendChild(e)}):t.appendChild(r)},dojox.xml.parser.removeChildren=function(e){for(var t=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return t},dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null},dojox.xml.parser}.apply(null,i))||(e.exports=n)},2137:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(12),r(0),r(80),r(8),r(17),r(1),r(1554),r(1741),r(1769),r(1772)],void 0===(n=function(e,t,r,i,n,o,a,s,l,c,h,u){return function(e){function t(t){return e.call(this)||this}return r(t,e),t.prototype.initialize=function(){var e,t,r,i=this,s=this.layer.compatibleTileInfo256,l=this._getTileInfoSupportError(s,this.layer.fullExtent);l?this.addResolvingPromise(o.reject(l)):t=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var e,t=i.view.basemapTerrain.tilingScheme,r=t.pixelSize[0];i.schemeHelper=new c(r,i.view.spatialReference.isWGS84),e=256===r?i.layer.compatibleTileInfo256:i.view.spatialReference.isWGS84?i.layer.compatibleTileInfo512:i.layer.tileInfo;var n=i._getTileInfoCompatibilityError(e,t);if(n)throw n;i.tileInfo=e,i._updateMinMaxDataLevel()}),e=this._initializeTileHandler(),this.tileHandler=e[0],this.renderer=e[1],r=e[2],this._tileHandlerPromise=r,this.watch("layer.currentStyleInfo",function(){var e,t,n,o;i._tileHandlerPromise.isFulfilled()||i._tileHandlerPromise.cancel(),e=i._initializeTileHandler(),t=e[0],n=e[1],o=e[2],i._tileHandlerPromise=r,o.then(function(){var e=i.tileHandler;i.renderer=n,i.tileHandler=t,i.emit("data-changed"),e.destroy()})});var h=n([t,r]);this.addResolvingPromise(h)},t.prototype.destroy=function(){this.renderer=null,this.tileHandler.destroy(),this.tileHandler=null},t.prototype._initializeTileHandler=function(){var e=new h(this.layer,function(){},1),t=new u,r=e.start();return r.then(function(){t.initialize(e.spriteMosaic,e.glyphMosaic,!1)}),[e,t,r]},i([s.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),i([s.property()],t.prototype,"layer",void 0),i([s.property()],t.prototype,"updatingPercentageValue",void 0),i([s.subclass("esri.views.3d.layers.VectorTileLayerView3D")],t)}(s.declared(l))}.apply(null,i))||(e.exports=n)},459:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(10),r(2),r(0),r(63),r(27),r(24),r(8),r(20),r(1),r(52),r(470),r(476),r(108),r(107),r(240),r(170),r(1265),r(131)],void 0===(n=function(e,t,i,n,o,a,s,l,c,h,u,p,d,f,_,m,g,T,y,v){var b=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];return function(e){function t(t,r){var i=e.call(this)||this;return i.url=null,i.type="tile",i.spatialReference=null,i}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(function(){return e._fetchService()})),this.when()},Object.defineProperty(t.prototype,"operationalLayerType",{get:function(){if(this.capabilities)return this.capabilities.operations.supportsExportMap?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var e=this.url||this.portalItem&&this.portalItem.url;return e&&/\/ImageServer(\/|\/?$)/i.test(e)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributionDataUrl",{get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tileServers",{get:function(){return this._getDefaultTileServers(this.parsedUrl.path)},enumerable:!0,configurable:!0}),t.prototype.castTileServers=function(e){return Array.isArray(e)?e.map(function(e){return h.urlToObject(e).path}):null},t.prototype.readSpatialReference=function(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&s.SpatialReference.fromJSON(e)},t.prototype.fetchTile=function(e,t,r,i){var n=this.getTileUrl(e,t,r),o={responseType:"image",allowImageDataAccess:i&&i.allowImageDataAccess||!1};return i&&i.timestamp&&(o.query={_ts:i.timestamp}),l(n,o).then(function(e){return e.data})},t.prototype.getTileUrl=function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,o=a.objectToQuery(i({},this.parsedUrl.query,{blankTile:!n&&null,token:this.token?encodeURIComponent(this.token):null})),s=this.tileServers;return(s&&s.length?s[t%s.length]:this.parsedUrl.path)+"/tile/"+e+"/"+t+"/"+r+(o?"?"+o:"")},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return c.create(function(e){return r.e(11).then(function(){var t=[r(1500)];e.apply(null,t)}.bind(this)).catch(r.oe)});case"3d":return c.create(function(e){return Promise.all([r.e(4),r.e(5),r.e(51)]).then(function(){var t=[r(1490)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._fetchService=function(){var e=this;return c.create(function(t,r){e.resourceInfo?t({data:e.resourceInfo}):l(e.parsedUrl.path,{query:i({f:"json"},e.parsedUrl.query),responseType:"json",callbackParamName:"callback"}).then(t,r)}).then(function(t){if(t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl}),10.1===e.version&&!v.isHostedAgolService(e.url))return y.fetchServerVersion(e.url).then(function(t){e.read({currentVersion:t})}).catch(function(){})})},t.prototype._getMapName=function(e){var t=e.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]},t.prototype._getDefaultAttribution=function(e){if(e){var t;e=e.toLowerCase();for(var r=0,i=b.length;r<i;r++)if((t=b[r]).toLowerCase().indexOf(e)>-1)return h.makeAbsolute("//static.arcgis.com/attribution/"+t)}},t.prototype._getDefaultTileServers=function(e){var t=-1!==e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),r=-1!==e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]},o([u.property({readOnly:!0})],t.prototype,"operationalLayerType",null),o([u.property({readOnly:!0,dependsOn:["parsedUrl"]})],t.prototype,"attributionDataUrl",null),o([u.property()],t.prototype,"popupTemplates",void 0),o([u.property()],t.prototype,"resourceInfo",void 0),o([u.property({dependsOn:["parsedUrl"]})],t.prototype,"tileServers",null),o([u.cast("tileServers")],t.prototype,"castTileServers",null),o([u.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:h.writeOperationalLayerUrl}}}}})],t.prototype,"url",void 0),o([u.property({readOnly:!0,json:{read:!1}})],t.prototype,"type",void 0),o([u.property({type:s.SpatialReference})],t.prototype,"spatialReference",void 0),o([u.reader("spatialReference",["spatialReference","tileInfo"])],t.prototype,"readSpatialReference",null),o([u.subclass("esri.layers.TileLayer")],t)}(u.declared(p,f,d,T,_,m,g))}.apply(null,i))||(e.exports=n)}}]);
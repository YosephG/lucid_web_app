(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/GroupLayer":280,"esri/support/LayersMixin":1892})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1892:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(2),i(0),i(4),i(16),i(273),i(9),i(7),i(1),i(65)],void 0===(o=function(e,t,i,r,o,n,s,a,l,y,p){function u(e){return e&&null!=e.layers}function d(e,t,i){for(var r,o,n=0,s=e.length;n<s;n++){if((r=e.getItemAt(n))[t]===i)return r;if(u(r)&&(o=d(r.layers,t,i)))return o}}var c=n.ofType(p),h=a.getLogger("esri.support.LayersMixin");return function(e){function t(t){var i=e.call(this,t)||this;i.layers=new c;return i.layers.on("after-add",function(e){return function(e){e.parent&&e.parent!==i&&"remove"in e.parent&&e.parent.remove(e),e.parent=i,i.layerAdded(e),"elevation"===e.type&&h.error("Layer '"+e.title+", id:"+e.id+"' of type '"+e.type+"' is not supported as an operational layer and will therefore be ignored.")}(e.item)}),i.layers.on("after-remove",function(e){return function(e){e.parent=null,i.layerRemoved(e)}(e.item)}),i}return i(t,e),t.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)},Object.defineProperty(t.prototype,"layers",{set:function(e){this._set("layers",s.referenceSetter(e,this._get("layers"),c))},enumerable:!0,configurable:!0}),t.prototype.findLayerById=function(e){return d(this.layers,"id",e)},t.prototype.add=function(e,t){var i=this,r=this.layers;t=r.getNextIndex(t),e instanceof p?(e.parent===this&&this.reorder(e,t),r.add(e,t)):l.isThenable(e)?e.then(function(e){i.destroyed||i.add(e,t)}):h.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")},t.prototype.addMany=function(e,t){var i=this,r=this.layers;t=r.getNextIndex(t),e.slice().forEach(function(e){e.parent!==i?(r.add(e,t),t+=1):i.reorder(e,t)})},t.prototype.findLayerByUid=function(e){return d(this.layers,"uid",e)},t.prototype.remove=function(e){return this.layers.remove(e)},t.prototype.removeMany=function(e){return this.layers.removeMany(e)},t.prototype.removeAll=function(){return this.layers.removeAll()},t.prototype.reorder=function(e,t){return this.layers.reorder(e,t)},t.prototype.layerAdded=function(e){},t.prototype.layerRemoved=function(e){},r([y.property({type:c,cast:s.castForReferenceSetter})],t.prototype,"layers",null),r([y.subclass("esri.support.LayersMixin")],t)}(y.declared(o))}.apply(null,r))||(e.exports=o)},280:function(e,t,i){var r,o;r=[i.dj.c(e.i),t,i(2),i(0),i(263),i(551),i(120),i(7),i(1),i(46),i(65),i(96),i(94),i(1892)],void 0===(o=function(e,t,r,o,n,s,a,l,y,p,u,d,c,h){return function(e){function t(t){var i=e.call(this)||this;return i._visibilityHandles={},i.fullExtent=void 0,i.operationalLayerType="GroupLayer",i.spatialReference=void 0,i.type="group",i._visibilityWatcher=i._visibilityWatcher.bind(i),i}return r(t,e),t.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)},t.prototype._writeLayers=function(e,t,i,r){var o=[];if(!e)return o;e.forEach(function(e){if(e.write){var t=e.write(null,r);t&&t.layerType&&o.push(t)}}),t.layers=o},Object.defineProperty(t.prototype,"visibilityMode",{set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)},enumerable:!0,configurable:!0}),t.prototype.load=function(){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]})),this.when()},t.prototype.loadAll=function(){var e=this;return n.safeCast(s.loadAll(this,function(t){t(e.layers)}))},t.prototype.layerAdded=function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)},t.prototype.layerRemoved=function(e){var t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":case"3d":return l.create(function(e){i.e(71).then(function(){var t=[i(2088)];e.apply(null,t)}.bind(this)).catch(i.oe)})}},t.prototype._turnOffOtherLayers=function(e){this.layers.forEach(function(t){t!==e&&(t.visible=!1)})},t.prototype._enforceVisibility=function(e,t){if(p.getProperties(this).initialized){var i=this.layers,r=i.find(function(e){return e.visible});switch(e){case"exclusive":i.length&&!r&&((r=i.getItemAt(0)).visible=!0),this._turnOffOtherLayers(r);break;case"inherited":i.forEach(function(e){e.visible=t})}}},t.prototype._visibleWatcher=function(e){"inherited"===this.visibilityMode&&this.layers.forEach(function(t){t.visible=e})},t.prototype._visibilityWatcher=function(e,t,i,r){var o=r;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(o):this._isAnyLayerVisible()||(o.visible=!0);break;case"inherited":o.visible=this.visible}},t.prototype._isAnyLayerVisible=function(){return this.layers.some(function(e){return e.visible})},o([y.property()],t.prototype,"fullExtent",void 0),o([y.property({json:{read:!1,write:{ignoreOrigin:!0}}})],t.prototype,"layers",void 0),o([y.writer("layers")],t.prototype,"_writeLayers",null),o([y.property({type:["GroupLayer"]})],t.prototype,"operationalLayerType",void 0),o([y.property({json:{write:!1}})],t.prototype,"portalItem",void 0),o([y.property()],t.prototype,"spatialReference",void 0),o([y.property({json:{read:!1},readOnly:!0,value:"group"})],t.prototype,"type",void 0),o([y.property({type:String,value:"independent",json:{write:!0}})],t.prototype,"visibilityMode",null),o([y.subclass("esri.layers.GroupLayer")],t)}(y.declared(u,h,a,d,c))}.apply(null,r))||(e.exports=o)}}]);
(function(){
(this||window)["webpackJsonp"].registerAbsMids({
	'esri/views/3d/layers/SceneLayerView3D':"./node_modules/arcgis-js-api/views/3d/layers/SceneLayerView3D.js",
	'esri/views/3d/layers/i3s/Highlights':"./node_modules/arcgis-js-api/views/3d/layers/i3s/Highlights.js",
	'esri/views/3d/layers/i3s/I3SElevationProvider':"./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SElevationProvider.js",
	'esri/views/3d/layers/i3s/I3SQueryEngine':"./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SQueryEngine.js",
	'esri/views/3d/layers/i3s/IDBCache':"./node_modules/arcgis-js-api/views/3d/layers/i3s/IDBCache.js"
})
})(),(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[25],{

/***/ "./node_modules/arcgis-js-api/views/3d/layers/SceneLayerView3D.js":
/*!************************************************************************!*\
  !*** ./node_modules/arcgis-js-api/views/3d/layers/SceneLayerView3D.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2018 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.8/esri/copyright.txt for details.\n\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../core/tsSupport/declareExtendsHelper */ \"./node_modules/arcgis-js-api/core/tsSupport/declareExtendsHelper.js\"),__webpack_require__(/*! ../../../core/tsSupport/decorateHelper */ \"./node_modules/arcgis-js-api/core/tsSupport/decorateHelper.js\"),__webpack_require__(/*! ../../../core/tsSupport/awaiterHelper */ \"./node_modules/arcgis-js-api/core/tsSupport/awaiterHelper.js\"),__webpack_require__(/*! ../../../core/tsSupport/generatorHelper */ \"./node_modules/arcgis-js-api/core/tsSupport/generatorHelper.js\"),__webpack_require__(/*! dojo/has */ \"./node_modules/dojo/has.js\"),__webpack_require__(/*! dojo/errors/CancelError */ \"./node_modules/dojo/errors/CancelError.js\"),__webpack_require__(/*! ../../../Graphic */ \"./node_modules/arcgis-js-api/Graphic.js\"),__webpack_require__(/*! ../../../core/arrayUtils */ \"./node_modules/arcgis-js-api/core/arrayUtils.js\"),__webpack_require__(/*! ../../../core/arrayUtils */ \"./node_modules/arcgis-js-api/core/arrayUtils.js\"),__webpack_require__(/*! ../../../core/Collection */ \"./node_modules/arcgis-js-api/core/Collection.js\"),__webpack_require__(/*! ../../../core/lang */ \"./node_modules/arcgis-js-api/core/lang.js\"),__webpack_require__(/*! ../../../core/Logger */ \"./node_modules/arcgis-js-api/core/Logger.js\"),__webpack_require__(/*! ../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../core/requireUtils */ \"./node_modules/arcgis-js-api/core/requireUtils.js\"),__webpack_require__(/*! ../../../core/scheduling */ \"./node_modules/arcgis-js-api/core/scheduling.js\"),__webpack_require__(/*! ../../../core/watchUtils */ \"./node_modules/arcgis-js-api/core/watchUtils.js\"),__webpack_require__(/*! ../../../core/workers */ \"./node_modules/arcgis-js-api/core/workers.js\"),__webpack_require__(/*! ../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../../geometry/support/aaBoundingBox */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingBox.js\"),__webpack_require__(/*! ../../../geometry/support/scaleUtils */ \"./node_modules/arcgis-js-api/geometry/support/scaleUtils.js\"),__webpack_require__(/*! ../../../layers/IntegratedMeshLayer */ \"./node_modules/arcgis-js-api/layers/IntegratedMeshLayer.js\"),__webpack_require__(/*! ../../../symbols/FillSymbol3DLayer */ \"./node_modules/arcgis-js-api/symbols/FillSymbol3DLayer.js\"),__webpack_require__(/*! ../../../symbols/Symbol3D */ \"./node_modules/arcgis-js-api/symbols/Symbol3D.js\"),__webpack_require__(/*! ../../../symbols/support/unitConversionUtils */ \"./node_modules/arcgis-js-api/symbols/support/unitConversionUtils.js\"),__webpack_require__(/*! ../../../tasks/support/Query */ \"./node_modules/arcgis-js-api/tasks/support/Query.js\"),__webpack_require__(/*! ./LayerView3D */ \"./node_modules/arcgis-js-api/views/3d/layers/LayerView3D.js\"),__webpack_require__(/*! ./SceneLayerWorker */ \"./node_modules/arcgis-js-api/views/3d/layers/SceneLayerWorker.js\"),__webpack_require__(/*! ./graphics/graphicUtils */ \"./node_modules/arcgis-js-api/views/3d/layers/graphics/graphicUtils.js\"),__webpack_require__(/*! ./i3s/Highlights */ \"./node_modules/arcgis-js-api/views/3d/layers/i3s/Highlights.js\"),__webpack_require__(/*! ./i3s/I3SElevationProvider */ \"./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SElevationProvider.js\"),__webpack_require__(/*! ./i3s/I3SQueryEngine */ \"./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SQueryEngine.js\"),__webpack_require__(/*! ./i3s/I3SUtil */ \"./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SUtil.js\"),__webpack_require__(/*! ./i3s/IDBCache */ \"./node_modules/arcgis-js-api/views/3d/layers/i3s/IDBCache.js\"),__webpack_require__(/*! ./support/attributeUtils */ \"./node_modules/arcgis-js-api/views/3d/layers/support/attributeUtils.js\"),__webpack_require__(/*! ./support/edgeUtils */ \"./node_modules/arcgis-js-api/views/3d/layers/support/edgeUtils.js\"),__webpack_require__(/*! ./support/layerViewUpdatingProperties */ \"./node_modules/arcgis-js-api/views/3d/layers/support/layerViewUpdatingProperties.js\"),__webpack_require__(/*! ../lib/glMatrix */ \"./node_modules/arcgis-js-api/views/3d/lib/glMatrix.js\"),__webpack_require__(/*! ../support/orientedBoundingBox */ \"./node_modules/arcgis-js-api/views/3d/support/orientedBoundingBox.js\"),__webpack_require__(/*! ../support/projectionUtils */ \"./node_modules/arcgis-js-api/views/3d/support/projectionUtils.js\"),__webpack_require__(/*! ../webgl-engine/Stage */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/Stage.js\"),__webpack_require__(/*! ../webgl-engine/lib/Geometry */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/Geometry.js\"),__webpack_require__(/*! ../webgl-engine/lib/Layer */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/Layer.js\"),__webpack_require__(/*! ../webgl-engine/lib/Object3D */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/Object3D.js\"),__webpack_require__(/*! ../webgl-engine/lib/PreinterleavedGeometryData */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/PreinterleavedGeometryData.js\"),__webpack_require__(/*! ../webgl-engine/lib/Texture */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/Texture.js\"),__webpack_require__(/*! ../webgl-engine/lib/Util */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/Util.js\"),__webpack_require__(/*! ../webgl-engine/lib/TextureBackedBuffer/BufferManager */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/TextureBackedBuffer/BufferManager.js\"),__webpack_require__(/*! ../webgl-engine/materials/DefaultMaterial */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/materials/DefaultMaterial.js\"),__webpack_require__.dj.m(module)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,n,i,a,o,s,l,d,u,c,h,p,f,g,y,m,_,b,v,x,M,I,E,w,C,O,D,T,S,A,j,F,V,R,G,B,L,N,P,U,k,q,H,z,K,Q,J,W,X){function Y(e,t,r,n,i){var a,o=!1;t.encoding===F.DDS_ENCODING_STRING?a=K.DDS_ENCODING:o=!(Q.isPowerOfTwo(e.width)&&Q.isPowerOfTwo(e.height));var s=t.usedByEngineMats.some(function(e){return e.getParams().atlasRegions}),l=s||t.atlas,d=(l?n:r)&&!o;return{mipmap:d,wrapClamp:l||!t.wrap,disableAnisotropy:l&&d&&i,encoding:a,noUnpackFlip:!0}}function Z(e,t){for(var r=0,n=e;r<n.length;r++){var i=n[r];if(i.i3sTexId===t)return i.data}return null}function $(e){return e.data instanceof ArrayBuffer}function ee(e,t){for(var r=1024,n=0,i=e;n<i.length;n++){var a=i[n];r+=a.interleavedVertexData.byteLength+(a.indices?a.indices.byteLength:0),r+=a.positionData.data.byteLength+a.positionData.indices.byteLength}for(var o=0,s=t;o<s.length;o++){var l=s[o];l.data instanceof ArrayBuffer&&(r+=l.data.byteLength)}return r}var te=U.ModelContentType,re=p.getLogger(\"esri.views.3d.layers.SceneLayerView3D\"),ne=[1,1,1,1],ie=[.8,.8,.8],ae=[.5,.5,.5],oe=9,se=function(t){function p(){var e=null!==t&&t.apply(this,arguments)||this;return e._queryEngine=null,e._highlights=new S(e),e._elevationProvider=null,e._worker=new D,e._workerThread=null,e._controllerCreated=!1,e._idbCache=new V.IDBCache(\"esri-scenelayer-cache\",\"geometries\",oe),e._cancelCount=0,e._hasColors=!1,e._hasTextures=!1,e._hasData=!1,e.alwaysLoadEverythingModeEnabled=!1,e._cacheKeySuffix=null,e._definitionExpressionErrors=0,e._maxDefinitionExpressionErrors=20,e}return r(p,t),Object.defineProperty(p.prototype,\"hasTexturesOrVertexColors\",{get:function(){return this._hasData?this._hasTextures||this._hasColors?\"yes\":\"probably-not\":\"unknown\"},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"rendererNeedsTextures\",{get:function(){return F.rendererNeedsTextures(this.layer.renderer)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"elevationOffset\",{get:function(){var e=null!=this.layer?this.layer.elevationInfo:null;if(null!=e&&\"absolute-height\"===e.mode){var t=x.getMetersPerVerticalUnitForSR(this.layer.spatialReference),r=w.getMetersPerUnit(e.unit);return(e.offset||0)*r/t}return 0},enumerable:!0,configurable:!0}),p.prototype._enableSecretAlwayLoadMode=function(){this.layer.store.lodModel&&\"always-load\"===this.layer.store.lodModel&&(this.alwaysLoadEverythingModeEnabled=!0)},Object.defineProperty(p.prototype,\"uncompressedTextureDownsamplingEnabled\",{get:function(){return this.view.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled&&!this._useCompressedTextures},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"_useCompressedTextures\",{get:function(){var e=this.layer.version,t=!o(\"trident\")||e.major>1||1===e.major&&e.minor>3;return this.view._stage.has(\"s3tc\")&&t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"_enableMipMaps\",{get:function(){return!this.uncompressedTextureDownsamplingEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"_enableAtlasMipMaps\",{get:function(){return this._enableMipMaps&&this.view._stage.has(\"standardDerivatives\")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"_atlasBiasCompensationEnabled\",{get:function(){return!this.view._stage.has(\"shaderTextureLOD\")&&this._enableAtlasMipMaps},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,\"_disableAtlasAnisotropy\",{get:function(){return this._atlasBiasCompensationEnabled},enumerable:!0,configurable:!0}),p.prototype.initialize=function(){var t=this;_.open(g.getAbsMid(\"./SceneLayerWorker\",e,X),{client:this}).then(function(e){t.destroyed?e.close():t._workerThread=e}),F.checkSceneLayerValid(this.layer),F.checkSceneLayerCompatibleWithView(this.layer,this.view),this._initGraphicsController(),this.gpuMemoryEstimate=0,this.texMemoryEstimate=0,this.geoMemoryEstimate=0,this._stage=this.view._stage,this._isIntegratedMesh()||(this._edgeView=this._stage.view.getEdgeView()),this._texId2Meta=new Map,this._nodeId2Meta=new Map,this._addThisLayerToStage(),this._elevationProvider=new A({layerView:this,stageLayer:this._stageLayer}),this.handles.add([m.init(this.view,\"clippingArea\",function(){return t._clippingAreaChanged()}),m.init(this.layer,\"renderer\",function(e){return t._rendererChange(e)}),m.init(this.layer,\"objectIdFilter\",function(){return t._filterChange()}),m.init(this.layer,\"elevationInfo\",function(){return t._elevationInfoChanged()}),m.init(this.layer,\"rangeInfos\",function(e){return t._rangeInfosChanged(e)}),m.init(this,\"_controller.parsedDefinitionExpression\",function(){return t._filterChange()}),m.watch(this,\"fullOpacity\",function(e){return t._opacityChange(e)}),m.watch(this,[\"elevationOffset\",\"rendererNeedsTextures\"],function(){return t._reloadAll()}),m.watch(this,\"uncompressedTextureDownsamplingEnabled\",function(){return t._reloadAll()}),m.init(this,\"suspended\",function(e){return t.setVisibility(!e)})],\"sceneLayerHandles\"),this._idbCache.init(),this._cacheKeySuffix=F.getCacheKeySuffix(this.layer.spatialReference,this.view.renderSpatialReference),this._componentColorManager=this._hasSymbolColors()?new J.BufferManager(this._stage.view.renderingContext):null,this._enableSecretAlwayLoadMode()},p.prototype.destroy=function(){this.handles.remove(\"sceneLayerHandles\"),this._workerThread&&(this._workerThread.close(),this._workerThread=null),this._removeThisLayerFromStage(),this._stage=null,this._idbCache&&(this._idbCache.destroy(),this._idbCache=null),null!=this._controller&&(this._controller.destroy(),this._controller=null),this._highlights.destroy(),this._texId2Meta=null,this._nodeId2Meta=null,this.emit(\"visible-geometry-changed\"),this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle.remove(),this._visibleGeometryChangedSchedulerHandle=null)},p.prototype.canResume=function(){return this.inherited(arguments)&&(!this._controller||this._controller.rootNodeVisible)},p.prototype.isUpdating=function(){return!this._controllerCreated||!(!this._controller||!this._controller.updating)},p.prototype.memEstimateTextureAdded=function(e){var t=e.getEstimatedTexMemRequiredMB();return this.gpuMemoryEstimate+=t,this.texMemoryEstimate+=t,t},p.prototype.memEstimateTextureRemoved=function(e){var t=e.getEstimatedTexMemRequiredMB();this.gpuMemoryEstimate-=t,this.texMemoryEstimate-=t,this.gpuMemoryEstimate<9.5367431640625e-7&&(this.gpuMemoryEstimate=0,this.texMemoryEstimate=0)},p.prototype.memEstimateGeometryAdded=function(e){var t=e.estimateGpuMemoryUsage()/1048576;return this.gpuMemoryEstimate+=t,this.geoMemoryEstimate+=t,t},p.prototype.memEstimateGeometryRemoved=function(e){var t=e.estimateGpuMemoryUsage()/1048576;this.gpuMemoryEstimate-=t,this.geoMemoryEstimate-=t,this.gpuMemoryEstimate<9.5367431640625e-7&&(this.gpuMemoryEstimate=0,this.texMemoryEstimate=0)},p.prototype._isNodeLoaded=function(e){return this._nodeId2Meta.has(e.id)},p.prototype._initGraphicsController=function(){var e=this,t={addNodeData:function(t,r){return e._addNodeData(t,r)},isNodeLoaded:function(t){return e._isNodeLoaded(t)},removeNodeData:function(t){return e._removeNodeData(t)},getLoadedNodeIDs:function(){return e._getLoadedNodeIDs()},getLoadedAttributes:function(t){return e._getLoadedAttributes(t)},getAttributeData:function(t){return e._getAttributeData(t)},setAttributeData:function(t,r,n){return e._setAttributeData(t,r,n)},getMemoryUsage:function(){return e.view.resourceController.usedMemory}},r={setPolygonOffset:function(t,r){return e._setPolygonOffset(t,!!r)},textureOptions:{useCompressedTextures:this._useCompressedTextures},additionalCancelNodeLoadingHandler:function(){return e._cancel()},loadCachedNodeData:function(t,r){return e._loadCachedNodeData(t,r)},addCachedNodeData:function(t,r,n){return e._addCachedNodeData(t,r,n)}};this.layer.createGraphicsController({layerView:this,layerViewRequiredFunctions:t,layerViewOptionalFunctions:r}).then(function(t){e._controller=t,t.watch(\"rootNodeVisible\",function(){e.notifyChange(\"suspended\")})}).always(function(){e._controllerCreated=!0,e.notifyChange(\"updating\")})},p.prototype.getUsedMemory=function(){return this.gpuMemoryEstimate},p.prototype.getUnloadedMemory=function(){return this._controller?this._controller.getUnloadedMemoryEstimate():0},p.prototype.getCachedMemory=function(){return 0},p.prototype.removeCachedData=function(){this.suspended&&this._removeAllNodeDataFromStage()},p.prototype.setVisibility=function(e){var t=this;if(this._nodeId2Meta.forEach(function(r){var n=r.engineObject;n.setHidden(n.geometryRecords[0],!e),t._edgeView&&t._edgeView.updateObjectVisibility(n,e)}),e){var r=this._isIntegratedMesh()?\"im\":\"scene\";this.view.elevationProvider.register(r,this._elevationProvider),this.visibleGeometryChanged()}else this.visibleGeometryChanged(),this.view.elevationProvider.unregister(this._elevationProvider)},p.prototype.getStats=function(){var e={index:0,nodes:this._nodeId2Meta.size.toString(),textures:this._texId2Meta.size,\"Total GPU Memory Estimate\":this.gpuMemoryEstimate+\"MB\",\"Geometry Memory Estimate\":this.geoMemoryEstimate+\"MB\",\"Texture Memory Estimate\":this.texMemoryEstimate+\"MB\"};return this._controller&&(this._cachingEnabled()&&(e.cache=Math.round(100*this._idbCache.getHitRate())+\"% hit\"),this._controller.updateStats(e)),e},p.prototype._addThisLayerToStage=function(){for(var e=this._stage,t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;this._whiteTexture=new K(t,\"white\",{width:8,height:8}),e.add(te.TEXTURE,this._whiteTexture);var n=this.layer.id,i=new q(n,{},n);this._stageLayer=i,e.add(te.LAYER,i),this._stage.addToViewContent([i.id])},p.prototype._removeThisLayerFromStage=function(){if(null!=this._stageLayer){var e=this._stage;e.remove(te.TEXTURE,this._whiteTexture.id),this._removeAllNodeDataFromStage(),Q.assert(0===this._nodeId2Meta.size),Q.assert(0===this._texId2Meta.size),e.remove(te.LAYER,this._stageLayer.id),this._stageLayer=void 0,this.gpuMemoryEstimate=0}},p.prototype._getLoadedAttributes=function(e){var t=this._nodeId2Meta.get(e.id);if(t)return t.loadedAttributes},p.prototype._getAttributeData=function(e){var t=this._nodeId2Meta.get(e.id);if(t)return t.attributeData},p.prototype._setAttributeData=function(e,t,r){var n=this._nodeId2Meta.get(e.id);n&&(n.loadedAttributes=t,n.attributeData=r,this._setObjectSymbology(n),this._addOrUpdateEdgeRendering(n),this._applyFilters(e),this.visibleGeometryChanged(n.engineObject))},p.prototype._getLoadedNodeIDs=function(){return u.keysOfMap(this._nodeId2Meta)},p.prototype._calcEngineMaterialTransparencyParams=function(e,t,r){var n=this.fullOpacity,i=1-Q.clamp(Q.fallbackIfUndefined(t.transparency,0),0,1);return{opacity:i,layerOpacity:n,transparent:i<1||n<1||e&&h.endsWith(e.channels,\"a\")||!0===t.useVertexColorAlpha||r}},p.prototype._calcEngineMaterialDoubleSidedParams=function(e){return null==e.doubleSided||e.doubleSided},p.prototype._calcEngineMaterialCullFaceParams=function(e){return e.cullFace?e.cullFace:null!=e.doubleSided?e.doubleSided?\"none\":\"back\":\"none\"},p.prototype._getMaterialParameters=function(e,t,r,n){var i;if(null!=e){var a=this._texId2Meta.get(t);i=a&&a.engineTex?a.engineTex.id:this._whiteTexture.id}var o=r.params,s=Q.fallbackIfUndefined(o.diffuse,ie);\"standard\"!==r.type&&re.warn(\"Unknown material type '\"+r.type+\"', must be 'standard'\");var l=this._isIntegratedMesh(),d={ambient:s,diffuse:s,specular:Q.fallbackIfUndefined(o.specular,ae),atlasRegions:o.vertexRegions,textureId:i,vertexColors:this._hasVertexColors(),componentIndices:this._hasSymbolColors(),componentColorBuffer:this._hasSymbolColors()&&n?n.textureBuffer:null,flipV:!1,doubleSided:this._calcEngineMaterialDoubleSidedParams(o),cullFace:this._calcEngineMaterialCullFaceParams(o),writeStencil:l,receiveSSAO:!l,groundNormalShading:l,compressedNormals:!l};if(!l){var u=this._calcEngineMaterialTransparencyParams(e,o);h.mixin(d,u)}return d},p.prototype._createEngineMaterial=function(e,t,r,n,i,a,o){var s=null!=t?this._getI3STexEncoding(t):null,l=this._getMaterialParameters(t,r,n,o),d=new W(l,i);if(d.metadata={i3sMatId:i,i3sTexId:r,i3sTex:t,i3sMatParams:n.params},null!=t){var u=this._texId2Meta.get(r);u?u.usedByEngineMats.push(d):(u={id:r,usedByEngineMats:[d],images:t.images,encoding:s,atlas:!0===t.atlas,wrap:\"none\"!==t.wrap[0]||\"none\"!==t.wrap[1]},this._texId2Meta.set(r,u));var c=Z(a,r);if(null!=c&&null==u.engineTex){var h=Y(c,u,this._enableMipMaps,this._enableAtlasMipMaps,this._disableAtlasAnisotropy);u.engineTex=new K(c,u.id,h),this._stage.add(te.TEXTURE,u.engineTex),e.memory+=this.memEstimateTextureAdded(u.engineTex)}if(null!=u.engineTex)for(var p=u.engineTex.id,f=0,g=u.usedByEngineMats;f<g.length;f++){var y=g[f];y.setParameterValues({textureId:p})}}return d},p.prototype._getI3STexEncoding=function(e){var t=F.getAppropriateTextureEncoding(e.encoding,this._useCompressedTextures);return t>-1?e.encoding[t]:e.encoding},p.prototype._getVertexBufferLayout=function(e,t){var r=e.params.materialID,n=t.materialDefinitions[r];Q.assert(void 0!==n,\"geometry wants unknown material \"+r);var i,a=e.params.textureID||\"none\";\"none\"!==a&&(null!=t.textureDefinitions&&null!=t.textureDefinitions[a]||re.warn(\"textureDefinitions missing in shared resource\"),i=t.textureDefinitions[a]);var o=this._getMaterialParameters(i,a,n);return W.getVertexBufferLayout(o)},p.prototype._createEngineMat=function(e,t,r,n,i){var a=t.params.materialID,o=r.materialDefinitions[a];Q.assert(void 0!==o,\"geometry wants unknown material \"+a);var s,l=t.params.textureID||\"none\";return\"none\"!==l&&(null!=r.textureDefinitions&&null!=r.textureDefinitions[l]||re.warn(\"textureDefinitions missing in shared resource\"),s=r.textureDefinitions[l]),this._createEngineMaterial(e,s,l,o,a,n,i)},p.prototype._getObjectIdField=function(){return this.layer.objectIdField||\"OBJECTID\"},p.prototype._findGraphicNodeAndIndex=function(e){var t=R.attributeLookup(e.attributes,this._getObjectIdField()),r=null;return this._nodeId2Meta.forEach(function(e,n){if(!r){var i=e.featureIds.indexOf(t);-1!==i&&(r={node:e.node,index:i})}}),r},p.prototype._getGraphicIndices=function(e,t){var r=this._nodeId2Meta.get(e.id);if(!r)return[];for(var n=[],i=this._getObjectIdField(),a=0,o=t;a<o.length;a++){var s=o[a],l=R.attributeLookup(s.attributes,i),d=r.featureIds.indexOf(l);-1!==d&&n.push(d)}return n},p.prototype.whenGraphicBounds=function(e){var t=this._findGraphicNodeAndIndex(e);if(!t)return f.reject();var r=this._nodeId2Meta.get(t.node.id).engineObject,n=this._boundingBoxCornerPoints(t.index,r,new Float64Array(24));if(P.bufferToBuffer(n,this.view.renderSpatialReference,0,n,this.view.spatialReference,0,8)){var i=v.empty();return v.expandWithBuffer(i,n,0,8),f.resolve({boundingBox:i,screenSpaceObjects:[]})}},p.prototype.whenGraphicAttributes=function(e,t){var r=this,n=function(){var t=r._findGraphicNodeAndIndex(e);return{node:t.node,indices:[t.index]}};return F.whenGraphicAttributes(this.layer,[e],this._getObjectIdField(),t,n,{ignoreUnavailableFields:!0,populateObjectId:!0}).then(function(e){return e[0]})},p.prototype.getGraphicFromStageObject=function(e,t){if(this.layer instanceof M)return f.reject();var r=this._getMetadata(e),n=e.getComponentFromTriangleNr(0,t);if(null!=n&&null!=r.featureIds&&n<r.featureIds.length){var i=this._createGraphic(n,r);return f.resolve(i)}return f.reject()},p.prototype._getMetadata=function(e){var t=e.getMetadata();return this._nodeId2Meta.get(t.i3sNode)},p.prototype._getCacheKey=function(e){return e.baseUrl+this._cacheKeySuffix},p.prototype._cachingEnabled=function(){return!this._controller.disableCache&&0===this.elevationOffset&&null!=this._cacheKeySuffix},p.prototype._cancel=function(){this._cancelCount=this._cancelCount+1|0},p.prototype._handleCancelled=function(e){if((this._cancelCount-e|0)>0)throw new s},p.prototype._loadCachedNodeData=function(e,t){var r=this,n=this._cancelCount;return this._cachingEnabled()?this._idbCache.get(this._getCacheKey(e)).then(function(i){if(null==i)return null;if(r._handleCancelled(n),i.nodeVersion!==e.version)return r._idbCache.remove(r._getCacheKey(e)),null;e.obb||(e.obb=N.clone(i.nodeObb),r._controller.updateVisibility(e.id));var a=function(e){if(null==e.data)return!0;var t=i.sharedResource.textureDefinitions[e.i3sTexId],n=r._getI3STexEncoding(t);return e.encoding!==n};return r.rendererNeedsTextures&&i.textureData.some(a)?t(i.allGeometryData,i.sharedResource).then(function(t){return i.textureData=t,t.every($)&&r._idbCache.put(r._getCacheKey(e),i).catch(function(t){return re.warn(\"Failed to update node with textures in IndexedDB cache: \"+e.id+\": \"+t)}),r._handleCancelled(n),i}):i}):f.resolve(null)},p.prototype._addNodeData=function(e,t){var r=this;return this._transformBundle(e,t).then(function(n){e.obb||(e.obb=n.obb,r._controller.updateVisibility(e.id));var i={allGeometryData:t.allGeometryData,transformedGeometries:n.transformedGeometries,textureData:t.textureData,sharedResource:t.sharedResource,nodeVersion:e.version,nodeObb:e.obb,byteSize:ee(n.transformedGeometries,t.textureData)};if(r._cachingEnabled()){var a=i.textureData.map(function(e){return $(e)?e:{i3sTexId:e.i3sTexId,encoding:e.encoding,data:null}});r._idbCache.put(r._getCacheKey(e),{allGeometryData:i.allGeometryData,transformedGeometries:i.transformedGeometries,textureData:a,sharedResource:i.sharedResource,nodeVersion:i.nodeVersion,nodeObb:i.nodeObb,byteSize:i.byteSize}).catch(function(t){return re.warn(\"Failed to store node in IndexedDB cache: \"+e.id+\": \"+t)})}return r._addCachedNodeData(e,i,t.attributeDataInfo)})},p.prototype._transformBundle=function(e,t){for(var r=[],n=[t.geometryBuffer],i=0,a=t.allGeometryData;i<a.length;i++)for(var o=a[i].geometries,s=0,l=o;s<l.length;s++){var d=l[s];r.push(this._getVertexBufferLayout(d,t.sharedResource))}var u={geometryBuffer:t.geometryBuffer,geometryData:t.allGeometryData,layouts:r,center:e.mbs,obb:e.obb,elevationOffset:this.elevationOffset,hasColors:this._hasColors,needNormals:!this._isIntegratedMesh()&&this._controller.isMeshPyramid,normalReferenceFrame:this.layer.normalReferenceFrame||\"none\",indexSR:this._controller.crsIndex.toJSON(),vertexSR:this._controller.crsVertex.toJSON(),renderSR:this.view.renderSpatialReference.toJSON()};return this._workerThread?this._workerThread.invoke(\"process\",u,n):f.resolve(this._worker.transform(u))},p.prototype._addCachedNodeData=function(e,t,r){var n=this;if(this._nodeId2Meta.has(e.id))return this._addOrUpdateEdgeRendering(this._nodeId2Meta.get(e.id)),this._applyFilters(e),f.resolve();if(!this.alwaysLoadEverythingModeEnabled&&!this._controller.isGeometryVisible(e))return f.resolve();var i=t.allGeometryData,a=t.transformedGeometries,o=t.textureData,s=t.sharedResource;if(0===i.length)return f.resolve();if(1!==i.length&&console.warn(\"Node with\",i.length,\"geometries is unsupported\"),!this.rendererNeedsTextures)for(var l=0,d=o;l<d.length;l++){var u=d[l];u.data=null}var c={};c[te.OBJECT]={},c[te.GEOMETRY]={},c[te.MATERIAL]={};var h=0,p=!1;e.memory=0;var g=i[0],y=g.componentOffsets,m=g.geometries,_=g.featureIds,b=null,v=null;if(this._hasSymbolColors()){b=this._componentColorManager.getBuffer(_.length),v=new Uint16Array(_.length);for(var x=0;x<_.length;x++)v[x]=b.aquireIndex()}for(var M,I=e.id+\"|\"+_[0],E=[],w=[],C=[],O=0,D=m;O<D.length;O++){var T=D[O],S=this._createEngineMat(e,T,s,o,b),A=a[h++];p=p||A.hasColors;var j=new z(new Float32Array(A.interleavedVertexData),A.layout,A.positionData,y||z.DefaultOffsets,A.indices||z.DefaultIndices);this._hasSymbolColors()&&this._setComponentIndices(j,v),M=A.corMatrices;var F=L.mat4d.create(M.localTrafo);if(null!=T.transformation){var V=T.transformation;L.mat4d.multiply(F,V,F)}var R=E.length,G=I+(R>0?\"_\"+R:\"\"),B=new k(j,G);E.push(B),w.push(F),C.push([S]),e.memory+=this.memEstimateGeometryAdded(B.getData()),c[te.MATERIAL][S.id]=S,c[te.GEOMETRY][B.id]=B}var N={i3sNode:e.id,layerUid:this.layer.uid},P=new H({idHint:e.id,name:I,geometries:E,materials:C,transformations:w,castShadow:!0,metadata:N}),U=L.mat4d.create();L.mat4d.identity(U),L.mat4d.multiply(U,M.globalTrafo,U),P.setObjectTransformation(U),c[te.OBJECT][P.id]=P;var q={node:e,engineObject:P,featureIds:_,attributeData:r?r.attributeData:null,loadedAttributes:r?r.loadedAttributes:null,componentColorBuffer:b,componentIndices:v};return f.create(function(t){n._addOrUpdateEdgeRendering(q).then(function(){if(n._nodeId2Meta.has(e.id))return n._edgeView&&n._edgeView.removeObject(q.engineObject),void t();n._nodeId2Meta.set(e.id,q),n._setObjectSymbology(q),n._applyFilters(e),n._highlights.objectCreated(P),n.visibleGeometryChanged(P);var r=n._stageLayer,i=n._stage;i.beginMod();var a=c[te.OBJECT];for(var o in a)a.hasOwnProperty(o)&&r.addObject(a[o]);for(var s in c)if(c.hasOwnProperty(s)){var l=c[s];for(var d in l)l.hasOwnProperty(d)&&null==i.get(s,d)&&i.add(s,l[d])}i.endMod(),!n._hasTextures&&null!=e.textureData&&e.textureData.length>0&&(n._hasTextures=!0),n._hasColors||(n._hasColors=p),n._hasData=!0,n.notifyChange(\"hasTexturesOrVertexColors\"),t()})})},p.prototype._clippingAreaChanged=function(){var e=this,t=v.create();P.extentToBoundingBox(this.view.clippingArea,t,this.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null,this._updateFilters(),this._nodeId2Meta.forEach(function(t){return e._applyFilters(t.node)}),this._controller&&this._controller.updateClippingArea(this.view.clippingArea)},p.prototype._filterChange=function(){var e=this;this._updateFilters(),this._nodeId2Meta.forEach(function(t){return e._applyFilters(t.node)})},p.prototype._updateFilters=function(){var e=this,t=[];if(this.layer.objectIdFilter){var r=new Float64Array(this.layer.objectIdFilter.ids),n=\"include\"===this.layer.objectIdFilter.method;r.sort(),t.push(function(t,i){return e._objectIdFilter(r,n,i)})}if(this._controller&&this._controller.parsedDefinitionExpression&&this._controller.definitionExpressionFields){this._definitionExpressionErrors=0;var i=this._controller.parsedDefinitionExpression,a=this._controller.definitionExpressionFields;t.push(function(t,r){return e._sqlFilter(t,i,a,r)})}this._clippingArea&&t.push(function(t,r){return e._boundingboxFilter(t,e._clippingArea,r)}),this._filters=t},p.prototype._sqlFilter=function(e,t,r,n){var i={},a=new l(null,null,i);a.layer=this.layer,a.sourceLayer=this.layer;for(var o=this.layer.objectIdField,s=0,d=0,u=this._nodeId2Meta.get(e.id),c=u.featureIds,h=u.attributeData,p=r.every(function(e){return null!=h[e]||e===o}),f=0;f<c.length&&s<n.length;f++)if(n[s]===c[f]){var g=!0;if(p){i[o]=c[f];for(var y=0,m=r;y<m.length;y++){var _=m[y];_!==o&&(i[_]=F.getCachedAttributeValue(h[_],f))}g=this._evaluateClause(t,a)}g&&(n[d]=n[s],d++),s++}n.length=d},p.prototype._evaluateClause=function(e,t){try{return e.testFeature(t)}catch(e){return this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&re.error(\"Error while evaluating definitionExpression: \"+e),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&re.error(\"Further errors are ignored\"),!1}},p.prototype._objectIdFilter=function(e,t,r){for(var n=0,i=0;n<r.length;){d.binaryIndexOf(e,r[n])>=0===t&&(r[i]=r[n],i++),n++}r.length=i},p.prototype._boundingboxFilter=function(e,t,r){var n=[0,0,0,0];P.mbsToMbs(e.mbs,this._controller.crsIndex,n,this.view.renderSpatialReference);var i=null!=t?F.intersectBoundingBoxWithMbs(t,n):2;if(2!==i){if(0===i)return void(r.length=0);var a=0,o=0,s=this._nodeId2Meta.get(e.id),l=s.featureIds,d=s.engineObject.getObjectTransformation(),u=s.engineObject.getGeometryRecords()[0].getShaderTransformation();if(L.mat4d.multiply(d,u),0===d[1]&&0===d[2]&&0===d[3]&&0===d[4]&&0===d[6]&&0===d[7]&&0===d[8]&&0===d[9]&&0===d[11]&&1===d[15]){var c=de;c[0]=(t[0]-d[12])/d[0],c[1]=(t[1]-d[13])/d[5],c[2]=(t[2]-d[14])/d[10],c[3]=(t[3]-d[12])/d[0],c[4]=(t[4]-d[13])/d[5],c[5]=(t[5]-d[14])/d[10];for(var h=s.engineObject.getGeometryRecords()[0].geometry,p=h.getComponentCount(),f=0;f<p&&a<r.length;f++)if(r[a]===l[f]){var g=h.getComponentAABB(f,ue);v.intersects(c,g)&&(r[o]=r[a],o++),a++}r.length=o}}},p.prototype._addOrUpdateEdgeRendering=function(e){return i(this,void 0,void 0,function(){var t,r,n,i,o,s;return a(this,function(a){switch(a.label){case 0:return this._edgeView?(t=e.engineObject,r=this._edgeView.hasObject(t),n=this._extractObjectEdgeMaterials(e),i=n.hasEdges,o=n.perFeatureEdgeMaterials,s=!t.isHidden(t.geometryRecords[0]),r?(this._edgeView.updateAllComponentMaterials(t,o),this._edgeView.updateObjectVisibility(t,s),[3,3]):[3,1]):[2];case 1:return s&&i?[4,this._edgeView.addObject(t,o)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},p.prototype._applyFilters=function(e){var t=this._nodeId2Meta.get(e.id);t&&this._applyFiltersToObjects(e,t)},p.prototype.unhideEdgesForAllFeatures=function(e){var t=e.engineObject;if(this._edgeView&&this._edgeView.hasObject(t)){var r=this.fullOpacity;this._edgeView.updateAllComponentOpacities(t,r)}},p.prototype._applyFiltersToObjects=function(e,t){var r=t.engineObject;if(r.unhideAllComponents(),0===this._filters.length)return void this.unhideEdgesForAllFeatures(t);for(var n=t.featureIds,i=n.slice(),a=0,o=this._filters;a<o.length;a++){(0,o[a])(e,i)}if(i.length===n.length)return void this.unhideEdgesForAllFeatures(t);for(var s=0,l=r.getGeometryRecords()[0],d=new Array(t.featureIds.length),u=this.fullOpacity,c=0;c<n.length;c++){var h=n[c];s>=i.length||i[s]!==h?(r.setComponentVisibility(l,c,!1),d[c]=0):(s++,d[c]=u)}this._edgeView&&this._edgeView.hasObject(r)&&this._edgeView.updateAllComponentOpacities(r,d)},p.prototype._removeAllNodeDataFromStage=function(){var e=this;this._nodeId2Meta.forEach(function(t,r){return e._removeNodeStageData(r)})},p.prototype._removeNodeData=function(e){var t=this;e.forEach(function(e){return t._removeNodeStageData(e.id)})},p.prototype._removeNodeStageData=function(e){var t=this._nodeId2Meta.get(e);if(t){var r=this._stage,n=this._stageLayer,i=t.engineObject;this._highlights.objectDeleted(i),this._edgeView&&this._edgeView.removeObject(i),this.visibleGeometryChanged(i),n.removeObject(i);for(var a=0,o=i.getGeometryRecords();a<o.length;a++){var s=o[a];this.memEstimateGeometryRemoved(s.geometry.getData()),r.remove(te.GEOMETRY,s.geometry.id);for(var l=0,d=s.materials;l<d.length;l++){var u=d[l];this._removeMaterial(u,r)}}if(t.componentIndices){for(var c=0;c<t.componentIndices.length;c++)t.componentColorBuffer.releaseIndex(t.componentIndices[c]);this._componentColorManager.garbageCollect()}r.remove(te.OBJECT,i.id),this._nodeId2Meta.delete(e)}},p.prototype._removeMaterial=function(e,t){t.remove(te.MATERIAL,e.id);var r=e.metadata.i3sTexId||\"none\";if(\"none\"!==r){var n=this._texId2Meta.get(r),i=n.usedByEngineMats,a=i.indexOf(e);if(a>-1?(i[a]=i[i.length-1],i.pop()):re.error(\"Missing reference from material to texture\"),0===i.length){var o=n.engineTex;o&&o!==this._whiteTexture&&(this.memEstimateTextureRemoved(o),t.remove(te.TEXTURE,n.engineTex.id)),this._texId2Meta.delete(r)}}},p.prototype._setPolygonOffset=function(e,t){var r=this._nodeId2Meta.get(e.id);if(r)for(var n=0,i=r.engineObject.getGeometryRecords();n<i.length;n++)for(var a=i[n],o=0,s=a.materials;o<s.length;o++){var l=s[o];l.setParameterValues({polygonOffset:t})}},p.prototype._rendererChange=function(e){if(this._currentRenderer=e,e&&(e.colorInfo||e.sizeInfo)&&re.warn(\"renderer.colorInfo and renderer.sizeInfo are not supported for Scene Services. Use visualVariables instead.\"),e)for(var t=0,r=e.getSymbols();t<r.length;t++){var n=r[t];\"mesh-3d\"!==n.type&&re.error(\"Symbols of type '\"+n.type+\"' are not supported for 3D Object Scene Services.\")}this.view.resourceController.setMemoryDirty()},p.prototype._getRenderingInfo=function(e,t){var r=this._currentRenderer,n=r&&r.getSymbol(e);if(!(n instanceof E&&this._hasSymbolColors()))return null;var i,a;if(r&&r.visualVariables)for(var o=r.getVisualVariableValues(e),s=0;s<o.length;s++){var l=o[s],d=l.variable.type;\"color\"===d?i=l.value:\"opacity\"===d&&(a=l.value)}return t.symbol=n,t.color=i?[i.r/255,i.g/255,i.b/255]:null,null!=a?t.opacity=a:i&&null!=i.a?t.opacity=i.a:t.opacity=null,t},p.prototype._getSymbolFillMaterial=function(e,t){for(var r=0,n=e.symbolLayers.items;r<n.length;r++){var i=n[r];if(\"fill\"===i.type){var a=i.material,o=null!=a?a.color:null;return null!=o?(ce[0]=o.r/255,ce[1]=o.g/255,ce[2]=o.b/255,ce[3]=o.a,t.color=ce):t.color=null,void(t.colorMixMode=null!=a?a.colorMixMode:null)}}t.color=null,t.colorMixMode=null},p.prototype._hasSymbolColors=function(){if(this._isIntegratedMesh()||!this.layer.store.defaultGeometrySchema)return!1;var e=this.layer.store.defaultGeometrySchema.featureAttributes;return!!(e&&e.faceRange&&e.id)},p.prototype._isIntegratedMesh=function(){return this.layer instanceof M},p.prototype._hasVertexColors=function(){return null!=this.layer.store.defaultGeometrySchema.vertexAttributes.color&&(null==this.layer.cachedDrawingInfo||!this.layer.cachedDrawingInfo.color)},p.prototype._extractObjectEdgeMaterials=function(e){for(var t,r=[],n=e.featureIds?e.featureIds.length:1,i=this.layer.objectIdField,a=new l(null,null,{}),o=a.attributes,s=this._currentRenderer&&this._currentRenderer.requiredFields,d=this._edgeView.createSolidEdgeMaterial({color:[0,0,0,0],opacity:0}),u=this.fullOpacity,c=!1,h=0;h<n;h++){if(t=d,null!=i&&null!=e.featureIds&&(o[i]=e.featureIds[h]),null!=s&&null!=e.attributeData)for(var p=Object.keys(e.attributeData),f=0,g=p;f<g.length;f++){var y=g[f];o[y]=F.getCachedAttributeValue(e.attributeData[y],h)}var m=this._getRenderingInfo(a,he),_=e.engineObject,b=_.getComponentVisibility(_.getGeometryRecords()[0],h),v=b?u:0;if(m&&m.symbol instanceof E)for(var x=0,M=m.symbol.symbolLayers.items;x<M.length;x++){var w=M[x];if(w instanceof I){var C=G.createMaterial(this._edgeView,w,v);if(C){c=!0,t=C;break}}}r.push(t)}return{hasEdges:c,perFeatureEdgeMaterials:r}},p.prototype._setObjectSymbology=function(e){if(this._hasSymbolColors()){for(var t=e.featureIds?e.featureIds.length:1,r=new l(null,null,{}),n=r.attributes,i=this.layer.objectIdField,a=this._currentRenderer&&this._currentRenderer.requiredFields,o=!1,s=new Uint8Array(4),d={color:null,colorMixMode:null},u=[0,0,0,0],c=null,h=0;h<t;h++){if(null!=i&&null!=e.featureIds&&(n[i]=e.featureIds[h]),null!=a&&null!=e.attributeData)for(var p=Object.keys(e.attributeData),f=0,g=p;f<g.length;f++){var y=g[f];n[y]=F.getCachedAttributeValue(e.attributeData[y],h)}var m=this._getRenderingInfo(r,he);if(m){m.symbol!==c&&(c=m.symbol,this._getSymbolFillMaterial(m.symbol,d));var _=m.color,b=m.opacity;_=null==_||null==b?T.overrideColor(_,b,d.color,d.color&&d.color[3],ne,u):T.overrideColor(_,b,null,null,ne,u),_[3]<1&&(o=!0),\nF.encodeSymbolColor(_,d.colorMixMode,s)}else F.encodeSymbolColor(null,null,s);var v=e.componentIndices[h];e.componentColorBuffer.textureBuffer.setData(v,0,s[0],s[1],s[2],s[3])}this._updateObjectOpacity(e.engineObject,o)}},p.prototype._setComponentIndices=function(e,t){for(var r=e.getAttribute(Q.VertexAttrConstants.COMPONENTINDEX),n=r.data,i=r.offsetIdx,a=r.strideIdx,o=e.getIndices(Q.VertexAttrConstants.COMPONENTINDEX),s=0;s<t.length;s++)for(var l=e.componentOffsets[s],d=e.componentOffsets[s+1],u=l;u<d;u++){var c=i+o[u]*a;n[c]=t[s]}},p.prototype._elevationInfoChanged=function(){var e=this.layer.elevationInfo&&this.layer.elevationInfo.unit;e&&!w.supportsUnit(e)&&re.warn(\"elevationInfo.unit\",\"'\"+e+\"' is not a valid unit\")},p.prototype._rangeInfosChanged=function(e){null!=e&&e.length>0&&re.warn(\"Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.\")},p.prototype._reloadAll=function(){this._removeAllNodeDataFromStage(),null!=this._controller&&this._controller.restartNodeLoading()},p.prototype._opacityChange=function(e){var t=this;this._nodeId2Meta.forEach(function(e){t._updateObjectOpacity(e.engineObject),t._addOrUpdateEdgeRendering(e)})},p.prototype._updateObjectOpacity=function(e,t){for(var r=0,n=e.getGeometryRecords();r<n.length;r++)for(var i=n[r],a=0,o=i.materials;a<o.length;a++){var s=o[a],l=s.metadata;void 0!==t&&(l.symbolIsTransparent=t);var d=s.getParams(),u=this._calcEngineMaterialTransparencyParams(l.i3sTex,l.i3sMatParams,l.symbolIsTransparent);d.transparent===u.transparent&&d.layerOpacity===u.layerOpacity||s.setParameterValues(u)}},p.prototype.queryExtent=function(e){return this._ensureQueryEngine().queryExtent(e)},p.prototype.queryFeatureCount=function(e){return this._ensureQueryEngine().queryFeatureCount(e)},p.prototype.queryFeatures=function(e){return this._ensureQueryEngine().queryFeatures(e)},p.prototype.queryObjectIds=function(e){return this._ensureQueryEngine().queryObjectIds(e)},p.prototype._ensureQueryEngine=function(){return this._queryEngine||(this._queryEngine=this._createQueryEngine()),this._queryEngine},p.prototype._createQueryEngine=function(){var e=this,t={id:0,index:0,meta:null,bbCorners:new Float64Array(24)};return new j(this.layer,{forAll:function(r,n){var i=function(n,i,a){t.id=n,t.index=i,t.meta=a,e._boundingBoxCornerPoints(i,a.engineObject,t.bbCorners),r(t)};e._forAllFeatures(i,n)},createGraphic:function(t){return e._createGraphic(t.index,t.meta)},requestFields:function(t,r,n){var i=function(){var n=e._getGraphicIndices(t,r);return{node:t,indices:n}};return F.whenGraphicAttributes(e.layer,r,e._getObjectIdField(),n,i,{ignoreUnavailableFields:!1})},createExtentBuilder:function(){return e._createExtentBuilder()}},{enableObjectId:!0,enableOutFields:!!this.layer.objectIdField})},p.prototype._createExtentBuilder=function(){var e=this.view.renderSpatialReference,t=this.view.spatialReference,r=v.empty(),n=new Float64Array(24);return{add:function(i){P.bufferToBuffer(i.bbCorners,e,0,n,t,0,8)&&v.expandWithBuffer(r,n,0,8)},getExtent:function(){return v.toExtent(r,t)}}},p.prototype._forAllFeatures=function(e,t,r){var n=this;this._nodeId2Meta.forEach(function(i,a){n._forAllFeaturesOfNode(i,e,r),t&&t(i.node)})},p.prototype._forAllFeaturesOfNode=function(e,t,r){for(var n=e.featureIds,i=e.engineObject.getGeometryRecords()[0],a=0;a<n.length;a++)if(r||e.engineObject.getComponentVisibility(i,a)){var o=n[a];t(o,a,e,i)}},p.prototype._createGraphic=function(e,t){var r={};if(null!=t.featureIds&&(r[this._getObjectIdField()]=t.featureIds[e]),null!=t.attributeData)for(var n=0,i=Object.keys(t.attributeData);n<i.length;n++){var a=i[n];r[a]=F.getCachedAttributeValue(t.attributeData[a],e)}var o=new l(null,null,r);return o.layer=this.layer,o.sourceLayer=this.layer,o},p.prototype._boundingBoxCornerPoints=function(e,t,r){for(var n=t.geometries[0].getComponentAABB(e,de),i=0;i<8;++i)le[0]=1&i?n[0]:n[3],le[1]=2&i?n[1]:n[4],le[2]=4&i?n[2]:n[5],L.mat4d.multiplyVec3(t.objectTransformation,le),r[3*i]=le[0],r[3*i+1]=le[1],r[3*i+2]=le[2];return r},p.prototype.highlight=function(e,t){var r=this,n=this._highlights;if(e instanceof C){var i=n.acquireSet(t),a=i.set,o=i.handle;return this.queryObjectIds(e).then(function(e){return n.setFeatureIds(a,e)}),o}if(\"number\"==typeof e)return this.highlight([e],t);if(e instanceof l)return this.highlight([e],t);if(e instanceof c&&(e=e.toArray()),Array.isArray(e)&&e.length>0){if(e[0]instanceof l){var s=e,d=s.map(function(e){return R.attributeLookup(e.attributes,r._getObjectIdField())}),u=n.acquireSet(t),h=u.set,o=u.handle;return n.setFeatureIds(h,d),o}if(\"number\"==typeof e[0]){var d=e,p=n.acquireSet(t),h=p.set,o=p.handle;return n.setFeatureIds(h,d),o}}return{remove:function(){}}},p.prototype.visibleGeometryChanged=function(e){var t=this;e?this._elevationProvider.objectChanged(e):this._elevationProvider.layerChanged(),null==this._visibleGeometryChangedSchedulerHandle&&(this._visibleGeometryChangedSchedulerHandle=y.schedule(function(){t.emit(\"visible-geometry-changed\"),t._visibleGeometryChangedSchedulerHandle=null}))},n([b.property()],p.prototype,\"layer\",void 0),n([b.property()],p.prototype,\"_controller\",void 0),n([b.property({dependsOn:[\"_controller.updating\"]})],p.prototype,\"updating\",void 0),n([b.property(B.updatingPercentage)],p.prototype,\"updatingPercentage\",void 0),n([b.property({readOnly:!0,aliasOf:\"_controller.updatingPercentage\"})],p.prototype,\"updatingPercentageValue\",void 0),n([b.property({readOnly:!0})],p.prototype,\"hasTexturesOrVertexColors\",null),n([b.property({readOnly:!0,dependsOn:[\"layer.renderer\"]})],p.prototype,\"rendererNeedsTextures\",null),n([b.property({readOnly:!0,dependsOn:[\"layer.elevationInfo\"]})],p.prototype,\"elevationOffset\",null),n([b.property()],p.prototype,\"alwaysLoadEverythingModeEnabled\",void 0),n([b.property({dependsOn:[\"view.qualitySettings.sceneService.uncompressedTextureDownsamplingEnabled\",\"_useCompressedTextures\"]})],p.prototype,\"uncompressedTextureDownsamplingEnabled\",null),n([b.property({dependsOn:[\"layer.version\"]})],p.prototype,\"_useCompressedTextures\",null),p=n([b.subclass(\"esri.views.3d.layers.SceneLayerView3D\")],p)}(b.declared(O)),le=L.vec3d.create(),de=v.create(),ue=v.create(),ce=[0,0,0,0],he={symbol:null};return se}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYXJjZ2lzLWpzLWFwaS92aWV3cy8zZC9sYXllcnMvU2NlbmVMYXllclZpZXczRC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9hcmNnaXMtanMtYXBpL3ZpZXdzLzNkL2xheWVycy9TY2VuZUxheWVyVmlldzNELmpzP2JmOTgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ09QWVJJR0hUIMKpIDIwMTggRXNyaVxuLy9cbi8vIEFsbCByaWdodHMgcmVzZXJ2ZWQgdW5kZXIgdGhlIGNvcHlyaWdodCBsYXdzIG9mIHRoZSBVbml0ZWQgU3RhdGVzXG4vLyBhbmQgYXBwbGljYWJsZSBpbnRlcm5hdGlvbmFsIGxhd3MsIHRyZWF0aWVzLCBhbmQgY29udmVudGlvbnMuXG4vL1xuLy8gVGhpcyBtYXRlcmlhbCBpcyBsaWNlbnNlZCBmb3IgdXNlIHVuZGVyIHRoZSBFc3JpIE1hc3RlciBMaWNlbnNlXG4vLyBBZ3JlZW1lbnQgKE1MQSksIGFuZCBpcyBib3VuZCBieSB0aGUgdGVybXMgb2YgdGhhdCBhZ3JlZW1lbnQuXG4vLyBZb3UgbWF5IHJlZGlzdHJpYnV0ZSBhbmQgdXNlIHRoaXMgY29kZSB3aXRob3V0IG1vZGlmaWNhdGlvbixcbi8vIHByb3ZpZGVkIHlvdSBhZGhlcmUgdG8gdGhlIHRlcm1zIG9mIHRoZSBNTEEgYW5kIGluY2x1ZGUgdGhpc1xuLy8gY29weXJpZ2h0IG5vdGljZS5cbi8vXG4vLyBTZWUgdXNlIHJlc3RyaWN0aW9ucyBhdCBodHRwOi8vd3d3LmVzcmkuY29tL2xlZ2FsL3BkZnMvbWxhX2UyMDRfZTMwMC9lbmdsaXNoXG4vL1xuLy8gRm9yIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24sIGNvbnRhY3Q6XG4vLyBFbnZpcm9ubWVudGFsIFN5c3RlbXMgUmVzZWFyY2ggSW5zdGl0dXRlLCBJbmMuXG4vLyBBdHRuOiBDb250cmFjdHMgYW5kIExlZ2FsIFNlcnZpY2VzIERlcGFydG1lbnRcbi8vIDM4MCBOZXcgWW9yayBTdHJlZXRcbi8vIFJlZGxhbmRzLCBDYWxpZm9ybmlhLCBVU0EgOTIzNzNcbi8vIFVTQVxuLy9cbi8vIGVtYWlsOiBjb250cmFjdHNAZXNyaS5jb21cbi8vXG4vLyBTZWUgaHR0cDovL2pzLmFyY2dpcy5jb20vNC44L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cblxuZGVmaW5lKFtcInJlcXVpcmVcIixcImV4cG9ydHNcIixcIi4uLy4uLy4uL2NvcmUvdHNTdXBwb3J0L2RlY2xhcmVFeHRlbmRzSGVscGVyXCIsXCIuLi8uLi8uLi9jb3JlL3RzU3VwcG9ydC9kZWNvcmF0ZUhlbHBlclwiLFwiLi4vLi4vLi4vY29yZS90c1N1cHBvcnQvYXdhaXRlckhlbHBlclwiLFwiLi4vLi4vLi4vY29yZS90c1N1cHBvcnQvZ2VuZXJhdG9ySGVscGVyXCIsXCJkb2pvL2hhc1wiLFwiZG9qby9lcnJvcnMvQ2FuY2VsRXJyb3JcIixcIi4uLy4uLy4uL0dyYXBoaWNcIixcIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlsc1wiLFwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzXCIsXCIuLi8uLi8uLi9jb3JlL0NvbGxlY3Rpb25cIixcIi4uLy4uLy4uL2NvcmUvbGFuZ1wiLFwiLi4vLi4vLi4vY29yZS9Mb2dnZXJcIixcIi4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzXCIsXCIuLi8uLi8uLi9jb3JlL3JlcXVpcmVVdGlsc1wiLFwiLi4vLi4vLi4vY29yZS9zY2hlZHVsaW5nXCIsXCIuLi8uLi8uLi9jb3JlL3dhdGNoVXRpbHNcIixcIi4uLy4uLy4uL2NvcmUvd29ya2Vyc1wiLFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9yc1wiLFwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94XCIsXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NjYWxlVXRpbHNcIixcIi4uLy4uLy4uL2xheWVycy9JbnRlZ3JhdGVkTWVzaExheWVyXCIsXCIuLi8uLi8uLi9zeW1ib2xzL0ZpbGxTeW1ib2wzRExheWVyXCIsXCIuLi8uLi8uLi9zeW1ib2xzL1N5bWJvbDNEXCIsXCIuLi8uLi8uLi9zeW1ib2xzL3N1cHBvcnQvdW5pdENvbnZlcnNpb25VdGlsc1wiLFwiLi4vLi4vLi4vdGFza3Mvc3VwcG9ydC9RdWVyeVwiLFwiLi9MYXllclZpZXczRFwiLFwiLi9TY2VuZUxheWVyV29ya2VyXCIsXCIuL2dyYXBoaWNzL2dyYXBoaWNVdGlsc1wiLFwiLi9pM3MvSGlnaGxpZ2h0c1wiLFwiLi9pM3MvSTNTRWxldmF0aW9uUHJvdmlkZXJcIixcIi4vaTNzL0kzU1F1ZXJ5RW5naW5lXCIsXCIuL2kzcy9JM1NVdGlsXCIsXCIuL2kzcy9JREJDYWNoZVwiLFwiLi9zdXBwb3J0L2F0dHJpYnV0ZVV0aWxzXCIsXCIuL3N1cHBvcnQvZWRnZVV0aWxzXCIsXCIuL3N1cHBvcnQvbGF5ZXJWaWV3VXBkYXRpbmdQcm9wZXJ0aWVzXCIsXCIuLi9saWIvZ2xNYXRyaXhcIixcIi4uL3N1cHBvcnQvb3JpZW50ZWRCb3VuZGluZ0JveFwiLFwiLi4vc3VwcG9ydC9wcm9qZWN0aW9uVXRpbHNcIixcIi4uL3dlYmdsLWVuZ2luZS9TdGFnZVwiLFwiLi4vd2ViZ2wtZW5naW5lL2xpYi9HZW9tZXRyeVwiLFwiLi4vd2ViZ2wtZW5naW5lL2xpYi9MYXllclwiLFwiLi4vd2ViZ2wtZW5naW5lL2xpYi9PYmplY3QzRFwiLFwiLi4vd2ViZ2wtZW5naW5lL2xpYi9QcmVpbnRlcmxlYXZlZEdlb21ldHJ5RGF0YVwiLFwiLi4vd2ViZ2wtZW5naW5lL2xpYi9UZXh0dXJlXCIsXCIuLi93ZWJnbC1lbmdpbmUvbGliL1V0aWxcIixcIi4uL3dlYmdsLWVuZ2luZS9saWIvVGV4dHVyZUJhY2tlZEJ1ZmZlci9CdWZmZXJNYW5hZ2VyXCIsXCIuLi93ZWJnbC1lbmdpbmUvbWF0ZXJpYWxzL0RlZmF1bHRNYXRlcmlhbFwiLFwibW9kdWxlXCJdLGZ1bmN0aW9uKGUsdCxyLG4saSxhLG8scyxsLGQsdSxjLGgscCxmLGcseSxtLF8sYix2LHgsTSxJLEUsdyxDLE8sRCxULFMsQSxqLEYsVixSLEcsQixMLE4sUCxVLGsscSxILHosSyxRLEosVyxYKXtmdW5jdGlvbiBZKGUsdCxyLG4saSl7dmFyIGEsbz0hMTt0LmVuY29kaW5nPT09Ri5ERFNfRU5DT0RJTkdfU1RSSU5HP2E9Sy5ERFNfRU5DT0RJTkc6bz0hKFEuaXNQb3dlck9mVHdvKGUud2lkdGgpJiZRLmlzUG93ZXJPZlR3byhlLmhlaWdodCkpO3ZhciBzPXQudXNlZEJ5RW5naW5lTWF0cy5zb21lKGZ1bmN0aW9uKGUpe3JldHVybiBlLmdldFBhcmFtcygpLmF0bGFzUmVnaW9uc30pLGw9c3x8dC5hdGxhcyxkPShsP246cikmJiFvO3JldHVybnttaXBtYXA6ZCx3cmFwQ2xhbXA6bHx8IXQud3JhcCxkaXNhYmxlQW5pc290cm9weTpsJiZkJiZpLGVuY29kaW5nOmEsbm9VbnBhY2tGbGlwOiEwfX1mdW5jdGlvbiBaKGUsdCl7Zm9yKHZhciByPTAsbj1lO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2lmKGkuaTNzVGV4SWQ9PT10KXJldHVybiBpLmRhdGF9cmV0dXJuIG51bGx9ZnVuY3Rpb24gJChlKXtyZXR1cm4gZS5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ9ZnVuY3Rpb24gZWUoZSx0KXtmb3IodmFyIHI9MTAyNCxuPTAsaT1lO248aS5sZW5ndGg7bisrKXt2YXIgYT1pW25dO3IrPWEuaW50ZXJsZWF2ZWRWZXJ0ZXhEYXRhLmJ5dGVMZW5ndGgrKGEuaW5kaWNlcz9hLmluZGljZXMuYnl0ZUxlbmd0aDowKSxyKz1hLnBvc2l0aW9uRGF0YS5kYXRhLmJ5dGVMZW5ndGgrYS5wb3NpdGlvbkRhdGEuaW5kaWNlcy5ieXRlTGVuZ3RofWZvcih2YXIgbz0wLHM9dDtvPHMubGVuZ3RoO28rKyl7dmFyIGw9c1tvXTtsLmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciYmKHIrPWwuZGF0YS5ieXRlTGVuZ3RoKX1yZXR1cm4gcn12YXIgdGU9VS5Nb2RlbENvbnRlbnRUeXBlLHJlPXAuZ2V0TG9nZ2VyKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuU2NlbmVMYXllclZpZXczRFwiKSxuZT1bMSwxLDEsMV0saWU9Wy44LC44LC44XSxhZT1bLjUsLjUsLjVdLG9lPTksc2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gcCgpe3ZhciBlPW51bGwhPT10JiZ0LmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gZS5fcXVlcnlFbmdpbmU9bnVsbCxlLl9oaWdobGlnaHRzPW5ldyBTKGUpLGUuX2VsZXZhdGlvblByb3ZpZGVyPW51bGwsZS5fd29ya2VyPW5ldyBELGUuX3dvcmtlclRocmVhZD1udWxsLGUuX2NvbnRyb2xsZXJDcmVhdGVkPSExLGUuX2lkYkNhY2hlPW5ldyBWLklEQkNhY2hlKFwiZXNyaS1zY2VuZWxheWVyLWNhY2hlXCIsXCJnZW9tZXRyaWVzXCIsb2UpLGUuX2NhbmNlbENvdW50PTAsZS5faGFzQ29sb3JzPSExLGUuX2hhc1RleHR1cmVzPSExLGUuX2hhc0RhdGE9ITEsZS5hbHdheXNMb2FkRXZlcnl0aGluZ01vZGVFbmFibGVkPSExLGUuX2NhY2hlS2V5U3VmZml4PW51bGwsZS5fZGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnM9MCxlLl9tYXhEZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycz0yMCxlfXJldHVybiByKHAsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KHAucHJvdG90eXBlLFwiaGFzVGV4dHVyZXNPclZlcnRleENvbG9yc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzRGF0YT90aGlzLl9oYXNUZXh0dXJlc3x8dGhpcy5faGFzQ29sb3JzP1wieWVzXCI6XCJwcm9iYWJseS1ub3RcIjpcInVua25vd25cIn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocC5wcm90b3R5cGUsXCJyZW5kZXJlck5lZWRzVGV4dHVyZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEYucmVuZGVyZXJOZWVkc1RleHR1cmVzKHRoaXMubGF5ZXIucmVuZGVyZXIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwLnByb3RvdHlwZSxcImVsZXZhdGlvbk9mZnNldFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1udWxsIT10aGlzLmxheWVyP3RoaXMubGF5ZXIuZWxldmF0aW9uSW5mbzpudWxsO2lmKG51bGwhPWUmJlwiYWJzb2x1dGUtaGVpZ2h0XCI9PT1lLm1vZGUpe3ZhciB0PXguZ2V0TWV0ZXJzUGVyVmVydGljYWxVbml0Rm9yU1IodGhpcy5sYXllci5zcGF0aWFsUmVmZXJlbmNlKSxyPXcuZ2V0TWV0ZXJzUGVyVW5pdChlLnVuaXQpO3JldHVybihlLm9mZnNldHx8MCkqci90fXJldHVybiAwfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHAucHJvdG90eXBlLl9lbmFibGVTZWNyZXRBbHdheUxvYWRNb2RlPWZ1bmN0aW9uKCl7dGhpcy5sYXllci5zdG9yZS5sb2RNb2RlbCYmXCJhbHdheXMtbG9hZFwiPT09dGhpcy5sYXllci5zdG9yZS5sb2RNb2RlbCYmKHRoaXMuYWx3YXlzTG9hZEV2ZXJ5dGhpbmdNb2RlRW5hYmxlZD0hMCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwLnByb3RvdHlwZSxcInVuY29tcHJlc3NlZFRleHR1cmVEb3duc2FtcGxpbmdFbmFibGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcucXVhbGl0eVNldHRpbmdzLnNjZW5lU2VydmljZS51bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZCYmIXRoaXMuX3VzZUNvbXByZXNzZWRUZXh0dXJlc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocC5wcm90b3R5cGUsXCJfdXNlQ29tcHJlc3NlZFRleHR1cmVzXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubGF5ZXIudmVyc2lvbix0PSFvKFwidHJpZGVudFwiKXx8ZS5tYWpvcj4xfHwxPT09ZS5tYWpvciYmZS5taW5vcj4zO3JldHVybiB0aGlzLnZpZXcuX3N0YWdlLmhhcyhcInMzdGNcIikmJnR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHAucHJvdG90eXBlLFwiX2VuYWJsZU1pcE1hcHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMudW5jb21wcmVzc2VkVGV4dHVyZURvd25zYW1wbGluZ0VuYWJsZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHAucHJvdG90eXBlLFwiX2VuYWJsZUF0bGFzTWlwTWFwc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5hYmxlTWlwTWFwcyYmdGhpcy52aWV3Ll9zdGFnZS5oYXMoXCJzdGFuZGFyZERlcml2YXRpdmVzXCIpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwLnByb3RvdHlwZSxcIl9hdGxhc0JpYXNDb21wZW5zYXRpb25FbmFibGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiF0aGlzLnZpZXcuX3N0YWdlLmhhcyhcInNoYWRlclRleHR1cmVMT0RcIikmJnRoaXMuX2VuYWJsZUF0bGFzTWlwTWFwc30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocC5wcm90b3R5cGUsXCJfZGlzYWJsZUF0bGFzQW5pc290cm9weVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXRsYXNCaWFzQ29tcGVuc2F0aW9uRW5hYmxlZH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxwLnByb3RvdHlwZS5pbml0aWFsaXplPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztfLm9wZW4oZy5nZXRBYnNNaWQoXCIuL1NjZW5lTGF5ZXJXb3JrZXJcIixlLFgpLHtjbGllbnQ6dGhpc30pLnRoZW4oZnVuY3Rpb24oZSl7dC5kZXN0cm95ZWQ/ZS5jbG9zZSgpOnQuX3dvcmtlclRocmVhZD1lfSksRi5jaGVja1NjZW5lTGF5ZXJWYWxpZCh0aGlzLmxheWVyKSxGLmNoZWNrU2NlbmVMYXllckNvbXBhdGlibGVXaXRoVmlldyh0aGlzLmxheWVyLHRoaXMudmlldyksdGhpcy5faW5pdEdyYXBoaWNzQ29udHJvbGxlcigpLHRoaXMuZ3B1TWVtb3J5RXN0aW1hdGU9MCx0aGlzLnRleE1lbW9yeUVzdGltYXRlPTAsdGhpcy5nZW9NZW1vcnlFc3RpbWF0ZT0wLHRoaXMuX3N0YWdlPXRoaXMudmlldy5fc3RhZ2UsdGhpcy5faXNJbnRlZ3JhdGVkTWVzaCgpfHwodGhpcy5fZWRnZVZpZXc9dGhpcy5fc3RhZ2Uudmlldy5nZXRFZGdlVmlldygpKSx0aGlzLl90ZXhJZDJNZXRhPW5ldyBNYXAsdGhpcy5fbm9kZUlkMk1ldGE9bmV3IE1hcCx0aGlzLl9hZGRUaGlzTGF5ZXJUb1N0YWdlKCksdGhpcy5fZWxldmF0aW9uUHJvdmlkZXI9bmV3IEEoe2xheWVyVmlldzp0aGlzLHN0YWdlTGF5ZXI6dGhpcy5fc3RhZ2VMYXllcn0pLHRoaXMuaGFuZGxlcy5hZGQoW20uaW5pdCh0aGlzLnZpZXcsXCJjbGlwcGluZ0FyZWFcIixmdW5jdGlvbigpe3JldHVybiB0Ll9jbGlwcGluZ0FyZWFDaGFuZ2VkKCl9KSxtLmluaXQodGhpcy5sYXllcixcInJlbmRlcmVyXCIsZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3JlbmRlcmVyQ2hhbmdlKGUpfSksbS5pbml0KHRoaXMubGF5ZXIsXCJvYmplY3RJZEZpbHRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2ZpbHRlckNoYW5nZSgpfSksbS5pbml0KHRoaXMubGF5ZXIsXCJlbGV2YXRpb25JbmZvXCIsZnVuY3Rpb24oKXtyZXR1cm4gdC5fZWxldmF0aW9uSW5mb0NoYW5nZWQoKX0pLG0uaW5pdCh0aGlzLmxheWVyLFwicmFuZ2VJbmZvc1wiLGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yYW5nZUluZm9zQ2hhbmdlZChlKX0pLG0uaW5pdCh0aGlzLFwiX2NvbnRyb2xsZXIucGFyc2VkRGVmaW5pdGlvbkV4cHJlc3Npb25cIixmdW5jdGlvbigpe3JldHVybiB0Ll9maWx0ZXJDaGFuZ2UoKX0pLG0ud2F0Y2godGhpcyxcImZ1bGxPcGFjaXR5XCIsZnVuY3Rpb24oZSl7cmV0dXJuIHQuX29wYWNpdHlDaGFuZ2UoZSl9KSxtLndhdGNoKHRoaXMsW1wiZWxldmF0aW9uT2Zmc2V0XCIsXCJyZW5kZXJlck5lZWRzVGV4dHVyZXNcIl0sZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVsb2FkQWxsKCl9KSxtLndhdGNoKHRoaXMsXCJ1bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbG9hZEFsbCgpfSksbS5pbml0KHRoaXMsXCJzdXNwZW5kZWRcIixmdW5jdGlvbihlKXtyZXR1cm4gdC5zZXRWaXNpYmlsaXR5KCFlKX0pXSxcInNjZW5lTGF5ZXJIYW5kbGVzXCIpLHRoaXMuX2lkYkNhY2hlLmluaXQoKSx0aGlzLl9jYWNoZUtleVN1ZmZpeD1GLmdldENhY2hlS2V5U3VmZml4KHRoaXMubGF5ZXIuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZSksdGhpcy5fY29tcG9uZW50Q29sb3JNYW5hZ2VyPXRoaXMuX2hhc1N5bWJvbENvbG9ycygpP25ldyBKLkJ1ZmZlck1hbmFnZXIodGhpcy5fc3RhZ2Uudmlldy5yZW5kZXJpbmdDb250ZXh0KTpudWxsLHRoaXMuX2VuYWJsZVNlY3JldEFsd2F5TG9hZE1vZGUoKX0scC5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3RoaXMuaGFuZGxlcy5yZW1vdmUoXCJzY2VuZUxheWVySGFuZGxlc1wiKSx0aGlzLl93b3JrZXJUaHJlYWQmJih0aGlzLl93b3JrZXJUaHJlYWQuY2xvc2UoKSx0aGlzLl93b3JrZXJUaHJlYWQ9bnVsbCksdGhpcy5fcmVtb3ZlVGhpc0xheWVyRnJvbVN0YWdlKCksdGhpcy5fc3RhZ2U9bnVsbCx0aGlzLl9pZGJDYWNoZSYmKHRoaXMuX2lkYkNhY2hlLmRlc3Ryb3koKSx0aGlzLl9pZGJDYWNoZT1udWxsKSxudWxsIT10aGlzLl9jb250cm9sbGVyJiYodGhpcy5fY29udHJvbGxlci5kZXN0cm95KCksdGhpcy5fY29udHJvbGxlcj1udWxsKSx0aGlzLl9oaWdobGlnaHRzLmRlc3Ryb3koKSx0aGlzLl90ZXhJZDJNZXRhPW51bGwsdGhpcy5fbm9kZUlkMk1ldGE9bnVsbCx0aGlzLmVtaXQoXCJ2aXNpYmxlLWdlb21ldHJ5LWNoYW5nZWRcIiksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZSYmKHRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWRTY2hlZHVsZXJIYW5kbGUucmVtb3ZlKCksdGhpcy5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsKX0scC5wcm90b3R5cGUuY2FuUmVzdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5oZXJpdGVkKGFyZ3VtZW50cykmJighdGhpcy5fY29udHJvbGxlcnx8dGhpcy5fY29udHJvbGxlci5yb290Tm9kZVZpc2libGUpfSxwLnByb3RvdHlwZS5pc1VwZGF0aW5nPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2NvbnRyb2xsZXJDcmVhdGVkfHwhKCF0aGlzLl9jb250cm9sbGVyfHwhdGhpcy5fY29udHJvbGxlci51cGRhdGluZyl9LHAucHJvdG90eXBlLm1lbUVzdGltYXRlVGV4dHVyZUFkZGVkPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0RXN0aW1hdGVkVGV4TWVtUmVxdWlyZWRNQigpO3JldHVybiB0aGlzLmdwdU1lbW9yeUVzdGltYXRlKz10LHRoaXMudGV4TWVtb3J5RXN0aW1hdGUrPXQsdH0scC5wcm90b3R5cGUubWVtRXN0aW1hdGVUZXh0dXJlUmVtb3ZlZD1mdW5jdGlvbihlKXt2YXIgdD1lLmdldEVzdGltYXRlZFRleE1lbVJlcXVpcmVkTUIoKTt0aGlzLmdwdU1lbW9yeUVzdGltYXRlLT10LHRoaXMudGV4TWVtb3J5RXN0aW1hdGUtPXQsdGhpcy5ncHVNZW1vcnlFc3RpbWF0ZTw5LjUzNjc0MzE2NDA2MjVlLTcmJih0aGlzLmdwdU1lbW9yeUVzdGltYXRlPTAsdGhpcy50ZXhNZW1vcnlFc3RpbWF0ZT0wKX0scC5wcm90b3R5cGUubWVtRXN0aW1hdGVHZW9tZXRyeUFkZGVkPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZXN0aW1hdGVHcHVNZW1vcnlVc2FnZSgpLzEwNDg1NzY7cmV0dXJuIHRoaXMuZ3B1TWVtb3J5RXN0aW1hdGUrPXQsdGhpcy5nZW9NZW1vcnlFc3RpbWF0ZSs9dCx0fSxwLnByb3RvdHlwZS5tZW1Fc3RpbWF0ZUdlb21ldHJ5UmVtb3ZlZD1mdW5jdGlvbihlKXt2YXIgdD1lLmVzdGltYXRlR3B1TWVtb3J5VXNhZ2UoKS8xMDQ4NTc2O3RoaXMuZ3B1TWVtb3J5RXN0aW1hdGUtPXQsdGhpcy5nZW9NZW1vcnlFc3RpbWF0ZS09dCx0aGlzLmdwdU1lbW9yeUVzdGltYXRlPDkuNTM2NzQzMTY0MDYyNWUtNyYmKHRoaXMuZ3B1TWVtb3J5RXN0aW1hdGU9MCx0aGlzLnRleE1lbW9yeUVzdGltYXRlPTApfSxwLnByb3RvdHlwZS5faXNOb2RlTG9hZGVkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9ub2RlSWQyTWV0YS5oYXMoZS5pZCl9LHAucHJvdG90eXBlLl9pbml0R3JhcGhpY3NDb250cm9sbGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXthZGROb2RlRGF0YTpmdW5jdGlvbih0LHIpe3JldHVybiBlLl9hZGROb2RlRGF0YSh0LHIpfSxpc05vZGVMb2FkZWQ6ZnVuY3Rpb24odCl7cmV0dXJuIGUuX2lzTm9kZUxvYWRlZCh0KX0scmVtb3ZlTm9kZURhdGE6ZnVuY3Rpb24odCl7cmV0dXJuIGUuX3JlbW92ZU5vZGVEYXRhKHQpfSxnZXRMb2FkZWROb2RlSURzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuX2dldExvYWRlZE5vZGVJRHMoKX0sZ2V0TG9hZGVkQXR0cmlidXRlczpmdW5jdGlvbih0KXtyZXR1cm4gZS5fZ2V0TG9hZGVkQXR0cmlidXRlcyh0KX0sZ2V0QXR0cmlidXRlRGF0YTpmdW5jdGlvbih0KXtyZXR1cm4gZS5fZ2V0QXR0cmlidXRlRGF0YSh0KX0sc2V0QXR0cmlidXRlRGF0YTpmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUuX3NldEF0dHJpYnV0ZURhdGEodCxyLG4pfSxnZXRNZW1vcnlVc2FnZTpmdW5jdGlvbigpe3JldHVybiBlLnZpZXcucmVzb3VyY2VDb250cm9sbGVyLnVzZWRNZW1vcnl9fSxyPXtzZXRQb2x5Z29uT2Zmc2V0OmZ1bmN0aW9uKHQscil7cmV0dXJuIGUuX3NldFBvbHlnb25PZmZzZXQodCwhIXIpfSx0ZXh0dXJlT3B0aW9uczp7dXNlQ29tcHJlc3NlZFRleHR1cmVzOnRoaXMuX3VzZUNvbXByZXNzZWRUZXh0dXJlc30sYWRkaXRpb25hbENhbmNlbE5vZGVMb2FkaW5nSGFuZGxlcjpmdW5jdGlvbigpe3JldHVybiBlLl9jYW5jZWwoKX0sbG9hZENhY2hlZE5vZGVEYXRhOmZ1bmN0aW9uKHQscil7cmV0dXJuIGUuX2xvYWRDYWNoZWROb2RlRGF0YSh0LHIpfSxhZGRDYWNoZWROb2RlRGF0YTpmdW5jdGlvbih0LHIsbil7cmV0dXJuIGUuX2FkZENhY2hlZE5vZGVEYXRhKHQscixuKX19O3RoaXMubGF5ZXIuY3JlYXRlR3JhcGhpY3NDb250cm9sbGVyKHtsYXllclZpZXc6dGhpcyxsYXllclZpZXdSZXF1aXJlZEZ1bmN0aW9uczp0LGxheWVyVmlld09wdGlvbmFsRnVuY3Rpb25zOnJ9KS50aGVuKGZ1bmN0aW9uKHQpe2UuX2NvbnRyb2xsZXI9dCx0LndhdGNoKFwicm9vdE5vZGVWaXNpYmxlXCIsZnVuY3Rpb24oKXtlLm5vdGlmeUNoYW5nZShcInN1c3BlbmRlZFwiKX0pfSkuYWx3YXlzKGZ1bmN0aW9uKCl7ZS5fY29udHJvbGxlckNyZWF0ZWQ9ITAsZS5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKX0pfSxwLnByb3RvdHlwZS5nZXRVc2VkTWVtb3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3B1TWVtb3J5RXN0aW1hdGV9LHAucHJvdG90eXBlLmdldFVubG9hZGVkTWVtb3J5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXI/dGhpcy5fY29udHJvbGxlci5nZXRVbmxvYWRlZE1lbW9yeUVzdGltYXRlKCk6MH0scC5wcm90b3R5cGUuZ2V0Q2FjaGVkTWVtb3J5PWZ1bmN0aW9uKCl7cmV0dXJuIDB9LHAucHJvdG90eXBlLnJlbW92ZUNhY2hlZERhdGE9ZnVuY3Rpb24oKXt0aGlzLnN1c3BlbmRlZCYmdGhpcy5fcmVtb3ZlQWxsTm9kZURhdGFGcm9tU3RhZ2UoKX0scC5wcm90b3R5cGUuc2V0VmlzaWJpbGl0eT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goZnVuY3Rpb24ocil7dmFyIG49ci5lbmdpbmVPYmplY3Q7bi5zZXRIaWRkZW4obi5nZW9tZXRyeVJlY29yZHNbMF0sIWUpLHQuX2VkZ2VWaWV3JiZ0Ll9lZGdlVmlldy51cGRhdGVPYmplY3RWaXNpYmlsaXR5KG4sZSl9KSxlKXt2YXIgcj10aGlzLl9pc0ludGVncmF0ZWRNZXNoKCk/XCJpbVwiOlwic2NlbmVcIjt0aGlzLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIucmVnaXN0ZXIocix0aGlzLl9lbGV2YXRpb25Qcm92aWRlciksdGhpcy52aXNpYmxlR2VvbWV0cnlDaGFuZ2VkKCl9ZWxzZSB0aGlzLnZpc2libGVHZW9tZXRyeUNoYW5nZWQoKSx0aGlzLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIudW5yZWdpc3Rlcih0aGlzLl9lbGV2YXRpb25Qcm92aWRlcil9LHAucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKCl7dmFyIGU9e2luZGV4OjAsbm9kZXM6dGhpcy5fbm9kZUlkMk1ldGEuc2l6ZS50b1N0cmluZygpLHRleHR1cmVzOnRoaXMuX3RleElkMk1ldGEuc2l6ZSxcIlRvdGFsIEdQVSBNZW1vcnkgRXN0aW1hdGVcIjp0aGlzLmdwdU1lbW9yeUVzdGltYXRlK1wiTUJcIixcIkdlb21ldHJ5IE1lbW9yeSBFc3RpbWF0ZVwiOnRoaXMuZ2VvTWVtb3J5RXN0aW1hdGUrXCJNQlwiLFwiVGV4dHVyZSBNZW1vcnkgRXN0aW1hdGVcIjp0aGlzLnRleE1lbW9yeUVzdGltYXRlK1wiTUJcIn07cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXImJih0aGlzLl9jYWNoaW5nRW5hYmxlZCgpJiYoZS5jYWNoZT1NYXRoLnJvdW5kKDEwMCp0aGlzLl9pZGJDYWNoZS5nZXRIaXRSYXRlKCkpK1wiJSBoaXRcIiksdGhpcy5fY29udHJvbGxlci51cGRhdGVTdGF0cyhlKSksZX0scC5wcm90b3R5cGUuX2FkZFRoaXNMYXllclRvU3RhZ2U9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fc3RhZ2UsdD1uZXcgVWludDhBcnJheSgyNTYpLHI9MDtyPHQubGVuZ3RoO3IrKyl0W3JdPTI1NTt0aGlzLl93aGl0ZVRleHR1cmU9bmV3IEsodCxcIndoaXRlXCIse3dpZHRoOjgsaGVpZ2h0Ojh9KSxlLmFkZCh0ZS5URVhUVVJFLHRoaXMuX3doaXRlVGV4dHVyZSk7dmFyIG49dGhpcy5sYXllci5pZCxpPW5ldyBxKG4se30sbik7dGhpcy5fc3RhZ2VMYXllcj1pLGUuYWRkKHRlLkxBWUVSLGkpLHRoaXMuX3N0YWdlLmFkZFRvVmlld0NvbnRlbnQoW2kuaWRdKX0scC5wcm90b3R5cGUuX3JlbW92ZVRoaXNMYXllckZyb21TdGFnZT1mdW5jdGlvbigpe2lmKG51bGwhPXRoaXMuX3N0YWdlTGF5ZXIpe3ZhciBlPXRoaXMuX3N0YWdlO2UucmVtb3ZlKHRlLlRFWFRVUkUsdGhpcy5fd2hpdGVUZXh0dXJlLmlkKSx0aGlzLl9yZW1vdmVBbGxOb2RlRGF0YUZyb21TdGFnZSgpLFEuYXNzZXJ0KDA9PT10aGlzLl9ub2RlSWQyTWV0YS5zaXplKSxRLmFzc2VydCgwPT09dGhpcy5fdGV4SWQyTWV0YS5zaXplKSxlLnJlbW92ZSh0ZS5MQVlFUix0aGlzLl9zdGFnZUxheWVyLmlkKSx0aGlzLl9zdGFnZUxheWVyPXZvaWQgMCx0aGlzLmdwdU1lbW9yeUVzdGltYXRlPTB9fSxwLnByb3RvdHlwZS5fZ2V0TG9hZGVkQXR0cmlidXRlcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZS5pZCk7aWYodClyZXR1cm4gdC5sb2FkZWRBdHRyaWJ1dGVzfSxwLnByb3RvdHlwZS5fZ2V0QXR0cmlidXRlRGF0YT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZS5pZCk7aWYodClyZXR1cm4gdC5hdHRyaWJ1dGVEYXRhfSxwLnByb3RvdHlwZS5fc2V0QXR0cmlidXRlRGF0YT1mdW5jdGlvbihlLHQscil7dmFyIG49dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUuaWQpO24mJihuLmxvYWRlZEF0dHJpYnV0ZXM9dCxuLmF0dHJpYnV0ZURhdGE9cix0aGlzLl9zZXRPYmplY3RTeW1ib2xvZ3kobiksdGhpcy5fYWRkT3JVcGRhdGVFZGdlUmVuZGVyaW5nKG4pLHRoaXMuX2FwcGx5RmlsdGVycyhlKSx0aGlzLnZpc2libGVHZW9tZXRyeUNoYW5nZWQobi5lbmdpbmVPYmplY3QpKX0scC5wcm90b3R5cGUuX2dldExvYWRlZE5vZGVJRHM9ZnVuY3Rpb24oKXtyZXR1cm4gdS5rZXlzT2ZNYXAodGhpcy5fbm9kZUlkMk1ldGEpfSxwLnByb3RvdHlwZS5fY2FsY0VuZ2luZU1hdGVyaWFsVHJhbnNwYXJlbmN5UGFyYW1zPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzLmZ1bGxPcGFjaXR5LGk9MS1RLmNsYW1wKFEuZmFsbGJhY2tJZlVuZGVmaW5lZCh0LnRyYW5zcGFyZW5jeSwwKSwwLDEpO3JldHVybntvcGFjaXR5OmksbGF5ZXJPcGFjaXR5Om4sdHJhbnNwYXJlbnQ6aTwxfHxuPDF8fGUmJmguZW5kc1dpdGgoZS5jaGFubmVscyxcImFcIil8fCEwPT09dC51c2VWZXJ0ZXhDb2xvckFscGhhfHxyfX0scC5wcm90b3R5cGUuX2NhbGNFbmdpbmVNYXRlcmlhbERvdWJsZVNpZGVkUGFyYW1zPWZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT1lLmRvdWJsZVNpZGVkfHxlLmRvdWJsZVNpZGVkfSxwLnByb3RvdHlwZS5fY2FsY0VuZ2luZU1hdGVyaWFsQ3VsbEZhY2VQYXJhbXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY3VsbEZhY2U/ZS5jdWxsRmFjZTpudWxsIT1lLmRvdWJsZVNpZGVkP2UuZG91YmxlU2lkZWQ/XCJub25lXCI6XCJiYWNrXCI6XCJub25lXCJ9LHAucHJvdG90eXBlLl9nZXRNYXRlcmlhbFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk7aWYobnVsbCE9ZSl7dmFyIGE9dGhpcy5fdGV4SWQyTWV0YS5nZXQodCk7aT1hJiZhLmVuZ2luZVRleD9hLmVuZ2luZVRleC5pZDp0aGlzLl93aGl0ZVRleHR1cmUuaWR9dmFyIG89ci5wYXJhbXMscz1RLmZhbGxiYWNrSWZVbmRlZmluZWQoby5kaWZmdXNlLGllKTtcInN0YW5kYXJkXCIhPT1yLnR5cGUmJnJlLndhcm4oXCJVbmtub3duIG1hdGVyaWFsIHR5cGUgJ1wiK3IudHlwZStcIicsIG11c3QgYmUgJ3N0YW5kYXJkJ1wiKTt2YXIgbD10aGlzLl9pc0ludGVncmF0ZWRNZXNoKCksZD17YW1iaWVudDpzLGRpZmZ1c2U6cyxzcGVjdWxhcjpRLmZhbGxiYWNrSWZVbmRlZmluZWQoby5zcGVjdWxhcixhZSksYXRsYXNSZWdpb25zOm8udmVydGV4UmVnaW9ucyx0ZXh0dXJlSWQ6aSx2ZXJ0ZXhDb2xvcnM6dGhpcy5faGFzVmVydGV4Q29sb3JzKCksY29tcG9uZW50SW5kaWNlczp0aGlzLl9oYXNTeW1ib2xDb2xvcnMoKSxjb21wb25lbnRDb2xvckJ1ZmZlcjp0aGlzLl9oYXNTeW1ib2xDb2xvcnMoKSYmbj9uLnRleHR1cmVCdWZmZXI6bnVsbCxmbGlwVjohMSxkb3VibGVTaWRlZDp0aGlzLl9jYWxjRW5naW5lTWF0ZXJpYWxEb3VibGVTaWRlZFBhcmFtcyhvKSxjdWxsRmFjZTp0aGlzLl9jYWxjRW5naW5lTWF0ZXJpYWxDdWxsRmFjZVBhcmFtcyhvKSx3cml0ZVN0ZW5jaWw6bCxyZWNlaXZlU1NBTzohbCxncm91bmROb3JtYWxTaGFkaW5nOmwsY29tcHJlc3NlZE5vcm1hbHM6IWx9O2lmKCFsKXt2YXIgdT10aGlzLl9jYWxjRW5naW5lTWF0ZXJpYWxUcmFuc3BhcmVuY3lQYXJhbXMoZSxvKTtoLm1peGluKGQsdSl9cmV0dXJuIGR9LHAucHJvdG90eXBlLl9jcmVhdGVFbmdpbmVNYXRlcmlhbD1mdW5jdGlvbihlLHQscixuLGksYSxvKXt2YXIgcz1udWxsIT10P3RoaXMuX2dldEkzU1RleEVuY29kaW5nKHQpOm51bGwsbD10aGlzLl9nZXRNYXRlcmlhbFBhcmFtZXRlcnModCxyLG4sbyksZD1uZXcgVyhsLGkpO2lmKGQubWV0YWRhdGE9e2kzc01hdElkOmksaTNzVGV4SWQ6cixpM3NUZXg6dCxpM3NNYXRQYXJhbXM6bi5wYXJhbXN9LG51bGwhPXQpe3ZhciB1PXRoaXMuX3RleElkMk1ldGEuZ2V0KHIpO3U/dS51c2VkQnlFbmdpbmVNYXRzLnB1c2goZCk6KHU9e2lkOnIsdXNlZEJ5RW5naW5lTWF0czpbZF0saW1hZ2VzOnQuaW1hZ2VzLGVuY29kaW5nOnMsYXRsYXM6ITA9PT10LmF0bGFzLHdyYXA6XCJub25lXCIhPT10LndyYXBbMF18fFwibm9uZVwiIT09dC53cmFwWzFdfSx0aGlzLl90ZXhJZDJNZXRhLnNldChyLHUpKTt2YXIgYz1aKGEscik7aWYobnVsbCE9YyYmbnVsbD09dS5lbmdpbmVUZXgpe3ZhciBoPVkoYyx1LHRoaXMuX2VuYWJsZU1pcE1hcHMsdGhpcy5fZW5hYmxlQXRsYXNNaXBNYXBzLHRoaXMuX2Rpc2FibGVBdGxhc0FuaXNvdHJvcHkpO3UuZW5naW5lVGV4PW5ldyBLKGMsdS5pZCxoKSx0aGlzLl9zdGFnZS5hZGQodGUuVEVYVFVSRSx1LmVuZ2luZVRleCksZS5tZW1vcnkrPXRoaXMubWVtRXN0aW1hdGVUZXh0dXJlQWRkZWQodS5lbmdpbmVUZXgpfWlmKG51bGwhPXUuZW5naW5lVGV4KWZvcih2YXIgcD11LmVuZ2luZVRleC5pZCxmPTAsZz11LnVzZWRCeUVuZ2luZU1hdHM7ZjxnLmxlbmd0aDtmKyspe3ZhciB5PWdbZl07eS5zZXRQYXJhbWV0ZXJWYWx1ZXMoe3RleHR1cmVJZDpwfSl9fXJldHVybiBkfSxwLnByb3RvdHlwZS5fZ2V0STNTVGV4RW5jb2Rpbmc9ZnVuY3Rpb24oZSl7dmFyIHQ9Ri5nZXRBcHByb3ByaWF0ZVRleHR1cmVFbmNvZGluZyhlLmVuY29kaW5nLHRoaXMuX3VzZUNvbXByZXNzZWRUZXh0dXJlcyk7cmV0dXJuIHQ+LTE/ZS5lbmNvZGluZ1t0XTplLmVuY29kaW5nfSxwLnByb3RvdHlwZS5fZ2V0VmVydGV4QnVmZmVyTGF5b3V0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5wYXJhbXMubWF0ZXJpYWxJRCxuPXQubWF0ZXJpYWxEZWZpbml0aW9uc1tyXTtRLmFzc2VydCh2b2lkIDAhPT1uLFwiZ2VvbWV0cnkgd2FudHMgdW5rbm93biBtYXRlcmlhbCBcIityKTt2YXIgaSxhPWUucGFyYW1zLnRleHR1cmVJRHx8XCJub25lXCI7XCJub25lXCIhPT1hJiYobnVsbCE9dC50ZXh0dXJlRGVmaW5pdGlvbnMmJm51bGwhPXQudGV4dHVyZURlZmluaXRpb25zW2FdfHxyZS53YXJuKFwidGV4dHVyZURlZmluaXRpb25zIG1pc3NpbmcgaW4gc2hhcmVkIHJlc291cmNlXCIpLGk9dC50ZXh0dXJlRGVmaW5pdGlvbnNbYV0pO3ZhciBvPXRoaXMuX2dldE1hdGVyaWFsUGFyYW1ldGVycyhpLGEsbik7cmV0dXJuIFcuZ2V0VmVydGV4QnVmZmVyTGF5b3V0KG8pfSxwLnByb3RvdHlwZS5fY3JlYXRlRW5naW5lTWF0PWZ1bmN0aW9uKGUsdCxyLG4saSl7dmFyIGE9dC5wYXJhbXMubWF0ZXJpYWxJRCxvPXIubWF0ZXJpYWxEZWZpbml0aW9uc1thXTtRLmFzc2VydCh2b2lkIDAhPT1vLFwiZ2VvbWV0cnkgd2FudHMgdW5rbm93biBtYXRlcmlhbCBcIithKTt2YXIgcyxsPXQucGFyYW1zLnRleHR1cmVJRHx8XCJub25lXCI7cmV0dXJuXCJub25lXCIhPT1sJiYobnVsbCE9ci50ZXh0dXJlRGVmaW5pdGlvbnMmJm51bGwhPXIudGV4dHVyZURlZmluaXRpb25zW2xdfHxyZS53YXJuKFwidGV4dHVyZURlZmluaXRpb25zIG1pc3NpbmcgaW4gc2hhcmVkIHJlc291cmNlXCIpLHM9ci50ZXh0dXJlRGVmaW5pdGlvbnNbbF0pLHRoaXMuX2NyZWF0ZUVuZ2luZU1hdGVyaWFsKGUscyxsLG8sYSxuLGkpfSxwLnByb3RvdHlwZS5fZ2V0T2JqZWN0SWRGaWVsZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxheWVyLm9iamVjdElkRmllbGR8fFwiT0JKRUNUSURcIn0scC5wcm90b3R5cGUuX2ZpbmRHcmFwaGljTm9kZUFuZEluZGV4PWZ1bmN0aW9uKGUpe3ZhciB0PVIuYXR0cmlidXRlTG9va3VwKGUuYXR0cmlidXRlcyx0aGlzLl9nZXRPYmplY3RJZEZpZWxkKCkpLHI9bnVsbDtyZXR1cm4gdGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaChmdW5jdGlvbihlLG4pe2lmKCFyKXt2YXIgaT1lLmZlYXR1cmVJZHMuaW5kZXhPZih0KTstMSE9PWkmJihyPXtub2RlOmUubm9kZSxpbmRleDppfSl9fSkscn0scC5wcm90b3R5cGUuX2dldEdyYXBoaWNJbmRpY2VzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUuaWQpO2lmKCFyKXJldHVybltdO2Zvcih2YXIgbj1bXSxpPXRoaXMuX2dldE9iamVjdElkRmllbGQoKSxhPTAsbz10O2E8by5sZW5ndGg7YSsrKXt2YXIgcz1vW2FdLGw9Ui5hdHRyaWJ1dGVMb29rdXAocy5hdHRyaWJ1dGVzLGkpLGQ9ci5mZWF0dXJlSWRzLmluZGV4T2YobCk7LTEhPT1kJiZuLnB1c2goZCl9cmV0dXJuIG59LHAucHJvdG90eXBlLndoZW5HcmFwaGljQm91bmRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2ZpbmRHcmFwaGljTm9kZUFuZEluZGV4KGUpO2lmKCF0KXJldHVybiBmLnJlamVjdCgpO3ZhciByPXRoaXMuX25vZGVJZDJNZXRhLmdldCh0Lm5vZGUuaWQpLmVuZ2luZU9iamVjdCxuPXRoaXMuX2JvdW5kaW5nQm94Q29ybmVyUG9pbnRzKHQuaW5kZXgscixuZXcgRmxvYXQ2NEFycmF5KDI0KSk7aWYoUC5idWZmZXJUb0J1ZmZlcihuLHRoaXMudmlldy5yZW5kZXJTcGF0aWFsUmVmZXJlbmNlLDAsbix0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSwwLDgpKXt2YXIgaT12LmVtcHR5KCk7cmV0dXJuIHYuZXhwYW5kV2l0aEJ1ZmZlcihpLG4sMCw4KSxmLnJlc29sdmUoe2JvdW5kaW5nQm94Omksc2NyZWVuU3BhY2VPYmplY3RzOltdfSl9fSxwLnByb3RvdHlwZS53aGVuR3JhcGhpY0F0dHJpYnV0ZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLG49ZnVuY3Rpb24oKXt2YXIgdD1yLl9maW5kR3JhcGhpY05vZGVBbmRJbmRleChlKTtyZXR1cm57bm9kZTp0Lm5vZGUsaW5kaWNlczpbdC5pbmRleF19fTtyZXR1cm4gRi53aGVuR3JhcGhpY0F0dHJpYnV0ZXModGhpcy5sYXllcixbZV0sdGhpcy5fZ2V0T2JqZWN0SWRGaWVsZCgpLHQsbix7aWdub3JlVW5hdmFpbGFibGVGaWVsZHM6ITAscG9wdWxhdGVPYmplY3RJZDohMH0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF19KX0scC5wcm90b3R5cGUuZ2V0R3JhcGhpY0Zyb21TdGFnZU9iamVjdD1mdW5jdGlvbihlLHQpe2lmKHRoaXMubGF5ZXIgaW5zdGFuY2VvZiBNKXJldHVybiBmLnJlamVjdCgpO3ZhciByPXRoaXMuX2dldE1ldGFkYXRhKGUpLG49ZS5nZXRDb21wb25lbnRGcm9tVHJpYW5nbGVOcigwLHQpO2lmKG51bGwhPW4mJm51bGwhPXIuZmVhdHVyZUlkcyYmbjxyLmZlYXR1cmVJZHMubGVuZ3RoKXt2YXIgaT10aGlzLl9jcmVhdGVHcmFwaGljKG4scik7cmV0dXJuIGYucmVzb2x2ZShpKX1yZXR1cm4gZi5yZWplY3QoKX0scC5wcm90b3R5cGUuX2dldE1ldGFkYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0TWV0YWRhdGEoKTtyZXR1cm4gdGhpcy5fbm9kZUlkMk1ldGEuZ2V0KHQuaTNzTm9kZSl9LHAucHJvdG90eXBlLl9nZXRDYWNoZUtleT1mdW5jdGlvbihlKXtyZXR1cm4gZS5iYXNlVXJsK3RoaXMuX2NhY2hlS2V5U3VmZml4fSxwLnByb3RvdHlwZS5fY2FjaGluZ0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fY29udHJvbGxlci5kaXNhYmxlQ2FjaGUmJjA9PT10aGlzLmVsZXZhdGlvbk9mZnNldCYmbnVsbCE9dGhpcy5fY2FjaGVLZXlTdWZmaXh9LHAucHJvdG90eXBlLl9jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLl9jYW5jZWxDb3VudD10aGlzLl9jYW5jZWxDb3VudCsxfDB9LHAucHJvdG90eXBlLl9oYW5kbGVDYW5jZWxsZWQ9ZnVuY3Rpb24oZSl7aWYoKHRoaXMuX2NhbmNlbENvdW50LWV8MCk+MCl0aHJvdyBuZXcgc30scC5wcm90b3R5cGUuX2xvYWRDYWNoZWROb2RlRGF0YT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzLl9jYW5jZWxDb3VudDtyZXR1cm4gdGhpcy5fY2FjaGluZ0VuYWJsZWQoKT90aGlzLl9pZGJDYWNoZS5nZXQodGhpcy5fZ2V0Q2FjaGVLZXkoZSkpLnRoZW4oZnVuY3Rpb24oaSl7aWYobnVsbD09aSlyZXR1cm4gbnVsbDtpZihyLl9oYW5kbGVDYW5jZWxsZWQobiksaS5ub2RlVmVyc2lvbiE9PWUudmVyc2lvbilyZXR1cm4gci5faWRiQ2FjaGUucmVtb3ZlKHIuX2dldENhY2hlS2V5KGUpKSxudWxsO2Uub2JifHwoZS5vYmI9Ti5jbG9uZShpLm5vZGVPYmIpLHIuX2NvbnRyb2xsZXIudXBkYXRlVmlzaWJpbGl0eShlLmlkKSk7dmFyIGE9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZS5kYXRhKXJldHVybiEwO3ZhciB0PWkuc2hhcmVkUmVzb3VyY2UudGV4dHVyZURlZmluaXRpb25zW2UuaTNzVGV4SWRdLG49ci5fZ2V0STNTVGV4RW5jb2RpbmcodCk7cmV0dXJuIGUuZW5jb2RpbmchPT1ufTtyZXR1cm4gci5yZW5kZXJlck5lZWRzVGV4dHVyZXMmJmkudGV4dHVyZURhdGEuc29tZShhKT90KGkuYWxsR2VvbWV0cnlEYXRhLGkuc2hhcmVkUmVzb3VyY2UpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGkudGV4dHVyZURhdGE9dCx0LmV2ZXJ5KCQpJiZyLl9pZGJDYWNoZS5wdXQoci5fZ2V0Q2FjaGVLZXkoZSksaSkuY2F0Y2goZnVuY3Rpb24odCl7cmV0dXJuIHJlLndhcm4oXCJGYWlsZWQgdG8gdXBkYXRlIG5vZGUgd2l0aCB0ZXh0dXJlcyBpbiBJbmRleGVkREIgY2FjaGU6IFwiK2UuaWQrXCI6IFwiK3QpfSksci5faGFuZGxlQ2FuY2VsbGVkKG4pLGl9KTppfSk6Zi5yZXNvbHZlKG51bGwpfSxwLnByb3RvdHlwZS5fYWRkTm9kZURhdGE9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiB0aGlzLl90cmFuc2Zvcm1CdW5kbGUoZSx0KS50aGVuKGZ1bmN0aW9uKG4pe2Uub2JifHwoZS5vYmI9bi5vYmIsci5fY29udHJvbGxlci51cGRhdGVWaXNpYmlsaXR5KGUuaWQpKTt2YXIgaT17YWxsR2VvbWV0cnlEYXRhOnQuYWxsR2VvbWV0cnlEYXRhLHRyYW5zZm9ybWVkR2VvbWV0cmllczpuLnRyYW5zZm9ybWVkR2VvbWV0cmllcyx0ZXh0dXJlRGF0YTp0LnRleHR1cmVEYXRhLHNoYXJlZFJlc291cmNlOnQuc2hhcmVkUmVzb3VyY2Usbm9kZVZlcnNpb246ZS52ZXJzaW9uLG5vZGVPYmI6ZS5vYmIsYnl0ZVNpemU6ZWUobi50cmFuc2Zvcm1lZEdlb21ldHJpZXMsdC50ZXh0dXJlRGF0YSl9O2lmKHIuX2NhY2hpbmdFbmFibGVkKCkpe3ZhciBhPWkudGV4dHVyZURhdGEubWFwKGZ1bmN0aW9uKGUpe3JldHVybiAkKGUpP2U6e2kzc1RleElkOmUuaTNzVGV4SWQsZW5jb2Rpbmc6ZS5lbmNvZGluZyxkYXRhOm51bGx9fSk7ci5faWRiQ2FjaGUucHV0KHIuX2dldENhY2hlS2V5KGUpLHthbGxHZW9tZXRyeURhdGE6aS5hbGxHZW9tZXRyeURhdGEsdHJhbnNmb3JtZWRHZW9tZXRyaWVzOmkudHJhbnNmb3JtZWRHZW9tZXRyaWVzLHRleHR1cmVEYXRhOmEsc2hhcmVkUmVzb3VyY2U6aS5zaGFyZWRSZXNvdXJjZSxub2RlVmVyc2lvbjppLm5vZGVWZXJzaW9uLG5vZGVPYmI6aS5ub2RlT2JiLGJ5dGVTaXplOmkuYnl0ZVNpemV9KS5jYXRjaChmdW5jdGlvbih0KXtyZXR1cm4gcmUud2FybihcIkZhaWxlZCB0byBzdG9yZSBub2RlIGluIEluZGV4ZWREQiBjYWNoZTogXCIrZS5pZCtcIjogXCIrdCl9KX1yZXR1cm4gci5fYWRkQ2FjaGVkTm9kZURhdGEoZSxpLHQuYXR0cmlidXRlRGF0YUluZm8pfSl9LHAucHJvdG90eXBlLl90cmFuc2Zvcm1CdW5kbGU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10sbj1bdC5nZW9tZXRyeUJ1ZmZlcl0saT0wLGE9dC5hbGxHZW9tZXRyeURhdGE7aTxhLmxlbmd0aDtpKyspZm9yKHZhciBvPWFbaV0uZ2VvbWV0cmllcyxzPTAsbD1vO3M8bC5sZW5ndGg7cysrKXt2YXIgZD1sW3NdO3IucHVzaCh0aGlzLl9nZXRWZXJ0ZXhCdWZmZXJMYXlvdXQoZCx0LnNoYXJlZFJlc291cmNlKSl9dmFyIHU9e2dlb21ldHJ5QnVmZmVyOnQuZ2VvbWV0cnlCdWZmZXIsZ2VvbWV0cnlEYXRhOnQuYWxsR2VvbWV0cnlEYXRhLGxheW91dHM6cixjZW50ZXI6ZS5tYnMsb2JiOmUub2JiLGVsZXZhdGlvbk9mZnNldDp0aGlzLmVsZXZhdGlvbk9mZnNldCxoYXNDb2xvcnM6dGhpcy5faGFzQ29sb3JzLG5lZWROb3JtYWxzOiF0aGlzLl9pc0ludGVncmF0ZWRNZXNoKCkmJnRoaXMuX2NvbnRyb2xsZXIuaXNNZXNoUHlyYW1pZCxub3JtYWxSZWZlcmVuY2VGcmFtZTp0aGlzLmxheWVyLm5vcm1hbFJlZmVyZW5jZUZyYW1lfHxcIm5vbmVcIixpbmRleFNSOnRoaXMuX2NvbnRyb2xsZXIuY3JzSW5kZXgudG9KU09OKCksdmVydGV4U1I6dGhpcy5fY29udHJvbGxlci5jcnNWZXJ0ZXgudG9KU09OKCkscmVuZGVyU1I6dGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UudG9KU09OKCl9O3JldHVybiB0aGlzLl93b3JrZXJUaHJlYWQ/dGhpcy5fd29ya2VyVGhyZWFkLmludm9rZShcInByb2Nlc3NcIix1LG4pOmYucmVzb2x2ZSh0aGlzLl93b3JrZXIudHJhbnNmb3JtKHUpKX0scC5wcm90b3R5cGUuX2FkZENhY2hlZE5vZGVEYXRhPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO2lmKHRoaXMuX25vZGVJZDJNZXRhLmhhcyhlLmlkKSlyZXR1cm4gdGhpcy5fYWRkT3JVcGRhdGVFZGdlUmVuZGVyaW5nKHRoaXMuX25vZGVJZDJNZXRhLmdldChlLmlkKSksdGhpcy5fYXBwbHlGaWx0ZXJzKGUpLGYucmVzb2x2ZSgpO2lmKCF0aGlzLmFsd2F5c0xvYWRFdmVyeXRoaW5nTW9kZUVuYWJsZWQmJiF0aGlzLl9jb250cm9sbGVyLmlzR2VvbWV0cnlWaXNpYmxlKGUpKXJldHVybiBmLnJlc29sdmUoKTt2YXIgaT10LmFsbEdlb21ldHJ5RGF0YSxhPXQudHJhbnNmb3JtZWRHZW9tZXRyaWVzLG89dC50ZXh0dXJlRGF0YSxzPXQuc2hhcmVkUmVzb3VyY2U7aWYoMD09PWkubGVuZ3RoKXJldHVybiBmLnJlc29sdmUoKTtpZigxIT09aS5sZW5ndGgmJmNvbnNvbGUud2FybihcIk5vZGUgd2l0aFwiLGkubGVuZ3RoLFwiZ2VvbWV0cmllcyBpcyB1bnN1cHBvcnRlZFwiKSwhdGhpcy5yZW5kZXJlck5lZWRzVGV4dHVyZXMpZm9yKHZhciBsPTAsZD1vO2w8ZC5sZW5ndGg7bCsrKXt2YXIgdT1kW2xdO3UuZGF0YT1udWxsfXZhciBjPXt9O2NbdGUuT0JKRUNUXT17fSxjW3RlLkdFT01FVFJZXT17fSxjW3RlLk1BVEVSSUFMXT17fTt2YXIgaD0wLHA9ITE7ZS5tZW1vcnk9MDt2YXIgZz1pWzBdLHk9Zy5jb21wb25lbnRPZmZzZXRzLG09Zy5nZW9tZXRyaWVzLF89Zy5mZWF0dXJlSWRzLGI9bnVsbCx2PW51bGw7aWYodGhpcy5faGFzU3ltYm9sQ29sb3JzKCkpe2I9dGhpcy5fY29tcG9uZW50Q29sb3JNYW5hZ2VyLmdldEJ1ZmZlcihfLmxlbmd0aCksdj1uZXcgVWludDE2QXJyYXkoXy5sZW5ndGgpO2Zvcih2YXIgeD0wO3g8Xy5sZW5ndGg7eCsrKXZbeF09Yi5hcXVpcmVJbmRleCgpfWZvcih2YXIgTSxJPWUuaWQrXCJ8XCIrX1swXSxFPVtdLHc9W10sQz1bXSxPPTAsRD1tO088RC5sZW5ndGg7TysrKXt2YXIgVD1EW09dLFM9dGhpcy5fY3JlYXRlRW5naW5lTWF0KGUsVCxzLG8sYiksQT1hW2grK107cD1wfHxBLmhhc0NvbG9yczt2YXIgaj1uZXcgeihuZXcgRmxvYXQzMkFycmF5KEEuaW50ZXJsZWF2ZWRWZXJ0ZXhEYXRhKSxBLmxheW91dCxBLnBvc2l0aW9uRGF0YSx5fHx6LkRlZmF1bHRPZmZzZXRzLEEuaW5kaWNlc3x8ei5EZWZhdWx0SW5kaWNlcyk7dGhpcy5faGFzU3ltYm9sQ29sb3JzKCkmJnRoaXMuX3NldENvbXBvbmVudEluZGljZXMoaix2KSxNPUEuY29yTWF0cmljZXM7dmFyIEY9TC5tYXQ0ZC5jcmVhdGUoTS5sb2NhbFRyYWZvKTtpZihudWxsIT1ULnRyYW5zZm9ybWF0aW9uKXt2YXIgVj1ULnRyYW5zZm9ybWF0aW9uO0wubWF0NGQubXVsdGlwbHkoRixWLEYpfXZhciBSPUUubGVuZ3RoLEc9SSsoUj4wP1wiX1wiK1I6XCJcIiksQj1uZXcgayhqLEcpO0UucHVzaChCKSx3LnB1c2goRiksQy5wdXNoKFtTXSksZS5tZW1vcnkrPXRoaXMubWVtRXN0aW1hdGVHZW9tZXRyeUFkZGVkKEIuZ2V0RGF0YSgpKSxjW3RlLk1BVEVSSUFMXVtTLmlkXT1TLGNbdGUuR0VPTUVUUlldW0IuaWRdPUJ9dmFyIE49e2kzc05vZGU6ZS5pZCxsYXllclVpZDp0aGlzLmxheWVyLnVpZH0sUD1uZXcgSCh7aWRIaW50OmUuaWQsbmFtZTpJLGdlb21ldHJpZXM6RSxtYXRlcmlhbHM6Qyx0cmFuc2Zvcm1hdGlvbnM6dyxjYXN0U2hhZG93OiEwLG1ldGFkYXRhOk59KSxVPUwubWF0NGQuY3JlYXRlKCk7TC5tYXQ0ZC5pZGVudGl0eShVKSxMLm1hdDRkLm11bHRpcGx5KFUsTS5nbG9iYWxUcmFmbyxVKSxQLnNldE9iamVjdFRyYW5zZm9ybWF0aW9uKFUpLGNbdGUuT0JKRUNUXVtQLmlkXT1QO3ZhciBxPXtub2RlOmUsZW5naW5lT2JqZWN0OlAsZmVhdHVyZUlkczpfLGF0dHJpYnV0ZURhdGE6cj9yLmF0dHJpYnV0ZURhdGE6bnVsbCxsb2FkZWRBdHRyaWJ1dGVzOnI/ci5sb2FkZWRBdHRyaWJ1dGVzOm51bGwsY29tcG9uZW50Q29sb3JCdWZmZXI6Yixjb21wb25lbnRJbmRpY2VzOnZ9O3JldHVybiBmLmNyZWF0ZShmdW5jdGlvbih0KXtuLl9hZGRPclVwZGF0ZUVkZ2VSZW5kZXJpbmcocSkudGhlbihmdW5jdGlvbigpe2lmKG4uX25vZGVJZDJNZXRhLmhhcyhlLmlkKSlyZXR1cm4gbi5fZWRnZVZpZXcmJm4uX2VkZ2VWaWV3LnJlbW92ZU9iamVjdChxLmVuZ2luZU9iamVjdCksdm9pZCB0KCk7bi5fbm9kZUlkMk1ldGEuc2V0KGUuaWQscSksbi5fc2V0T2JqZWN0U3ltYm9sb2d5KHEpLG4uX2FwcGx5RmlsdGVycyhlKSxuLl9oaWdobGlnaHRzLm9iamVjdENyZWF0ZWQoUCksbi52aXNpYmxlR2VvbWV0cnlDaGFuZ2VkKFApO3ZhciByPW4uX3N0YWdlTGF5ZXIsaT1uLl9zdGFnZTtpLmJlZ2luTW9kKCk7dmFyIGE9Y1t0ZS5PQkpFQ1RdO2Zvcih2YXIgbyBpbiBhKWEuaGFzT3duUHJvcGVydHkobykmJnIuYWRkT2JqZWN0KGFbb10pO2Zvcih2YXIgcyBpbiBjKWlmKGMuaGFzT3duUHJvcGVydHkocykpe3ZhciBsPWNbc107Zm9yKHZhciBkIGluIGwpbC5oYXNPd25Qcm9wZXJ0eShkKSYmbnVsbD09aS5nZXQocyxkKSYmaS5hZGQocyxsW2RdKX1pLmVuZE1vZCgpLCFuLl9oYXNUZXh0dXJlcyYmbnVsbCE9ZS50ZXh0dXJlRGF0YSYmZS50ZXh0dXJlRGF0YS5sZW5ndGg+MCYmKG4uX2hhc1RleHR1cmVzPSEwKSxuLl9oYXNDb2xvcnN8fChuLl9oYXNDb2xvcnM9cCksbi5faGFzRGF0YT0hMCxuLm5vdGlmeUNoYW5nZShcImhhc1RleHR1cmVzT3JWZXJ0ZXhDb2xvcnNcIiksdCgpfSl9KX0scC5wcm90b3R5cGUuX2NsaXBwaW5nQXJlYUNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9di5jcmVhdGUoKTtQLmV4dGVudFRvQm91bmRpbmdCb3godGhpcy52aWV3LmNsaXBwaW5nQXJlYSx0LHRoaXMudmlldy5yZW5kZXJTcGF0aWFsUmVmZXJlbmNlKT90aGlzLl9jbGlwcGluZ0FyZWE9dDp0aGlzLl9jbGlwcGluZ0FyZWE9bnVsbCx0aGlzLl91cGRhdGVGaWx0ZXJzKCksdGhpcy5fbm9kZUlkMk1ldGEuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5fYXBwbHlGaWx0ZXJzKHQubm9kZSl9KSx0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLnVwZGF0ZUNsaXBwaW5nQXJlYSh0aGlzLnZpZXcuY2xpcHBpbmdBcmVhKX0scC5wcm90b3R5cGUuX2ZpbHRlckNoYW5nZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fdXBkYXRlRmlsdGVycygpLHRoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGUuX2FwcGx5RmlsdGVycyh0Lm5vZGUpfSl9LHAucHJvdG90eXBlLl91cGRhdGVGaWx0ZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PVtdO2lmKHRoaXMubGF5ZXIub2JqZWN0SWRGaWx0ZXIpe3ZhciByPW5ldyBGbG9hdDY0QXJyYXkodGhpcy5sYXllci5vYmplY3RJZEZpbHRlci5pZHMpLG49XCJpbmNsdWRlXCI9PT10aGlzLmxheWVyLm9iamVjdElkRmlsdGVyLm1ldGhvZDtyLnNvcnQoKSx0LnB1c2goZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5fb2JqZWN0SWRGaWx0ZXIocixuLGkpfSl9aWYodGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci5wYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbiYmdGhpcy5fY29udHJvbGxlci5kZWZpbml0aW9uRXhwcmVzc2lvbkZpZWxkcyl7dGhpcy5fZGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnM9MDt2YXIgaT10aGlzLl9jb250cm9sbGVyLnBhcnNlZERlZmluaXRpb25FeHByZXNzaW9uLGE9dGhpcy5fY29udHJvbGxlci5kZWZpbml0aW9uRXhwcmVzc2lvbkZpZWxkczt0LnB1c2goZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5fc3FsRmlsdGVyKHQsaSxhLHIpfSl9dGhpcy5fY2xpcHBpbmdBcmVhJiZ0LnB1c2goZnVuY3Rpb24odCxyKXtyZXR1cm4gZS5fYm91bmRpbmdib3hGaWx0ZXIodCxlLl9jbGlwcGluZ0FyZWEscil9KSx0aGlzLl9maWx0ZXJzPXR9LHAucHJvdG90eXBlLl9zcWxGaWx0ZXI9ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9e30sYT1uZXcgbChudWxsLG51bGwsaSk7YS5sYXllcj10aGlzLmxheWVyLGEuc291cmNlTGF5ZXI9dGhpcy5sYXllcjtmb3IodmFyIG89dGhpcy5sYXllci5vYmplY3RJZEZpZWxkLHM9MCxkPTAsdT10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZS5pZCksYz11LmZlYXR1cmVJZHMsaD11LmF0dHJpYnV0ZURhdGEscD1yLmV2ZXJ5KGZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1oW2VdfHxlPT09b30pLGY9MDtmPGMubGVuZ3RoJiZzPG4ubGVuZ3RoO2YrKylpZihuW3NdPT09Y1tmXSl7dmFyIGc9ITA7aWYocCl7aVtvXT1jW2ZdO2Zvcih2YXIgeT0wLG09cjt5PG0ubGVuZ3RoO3krKyl7dmFyIF89bVt5XTtfIT09byYmKGlbX109Ri5nZXRDYWNoZWRBdHRyaWJ1dGVWYWx1ZShoW19dLGYpKX1nPXRoaXMuX2V2YWx1YXRlQ2xhdXNlKHQsYSl9ZyYmKG5bZF09bltzXSxkKyspLHMrK31uLmxlbmd0aD1kfSxwLnByb3RvdHlwZS5fZXZhbHVhdGVDbGF1c2U9ZnVuY3Rpb24oZSx0KXt0cnl7cmV0dXJuIGUudGVzdEZlYXR1cmUodCl9Y2F0Y2goZSl7cmV0dXJuIHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzPHRoaXMuX21heERlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzJiZyZS5lcnJvcihcIkVycm9yIHdoaWxlIGV2YWx1YXRpbmcgZGVmaW5pdGlvbkV4cHJlc3Npb246IFwiK2UpLHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzKyssdGhpcy5fZGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnM9PT10aGlzLl9tYXhEZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycyYmcmUuZXJyb3IoXCJGdXJ0aGVyIGVycm9ycyBhcmUgaWdub3JlZFwiKSwhMX19LHAucHJvdG90eXBlLl9vYmplY3RJZEZpbHRlcj1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPTAsaT0wO248ci5sZW5ndGg7KXtkLmJpbmFyeUluZGV4T2YoZSxyW25dKT49MD09PXQmJihyW2ldPXJbbl0saSsrKSxuKyt9ci5sZW5ndGg9aX0scC5wcm90b3R5cGUuX2JvdW5kaW5nYm94RmlsdGVyPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1bMCwwLDAsMF07UC5tYnNUb01icyhlLm1icyx0aGlzLl9jb250cm9sbGVyLmNyc0luZGV4LG4sdGhpcy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UpO3ZhciBpPW51bGwhPXQ/Ri5pbnRlcnNlY3RCb3VuZGluZ0JveFdpdGhNYnModCxuKToyO2lmKDIhPT1pKXtpZigwPT09aSlyZXR1cm4gdm9pZChyLmxlbmd0aD0wKTt2YXIgYT0wLG89MCxzPXRoaXMuX25vZGVJZDJNZXRhLmdldChlLmlkKSxsPXMuZmVhdHVyZUlkcyxkPXMuZW5naW5lT2JqZWN0LmdldE9iamVjdFRyYW5zZm9ybWF0aW9uKCksdT1zLmVuZ2luZU9iamVjdC5nZXRHZW9tZXRyeVJlY29yZHMoKVswXS5nZXRTaGFkZXJUcmFuc2Zvcm1hdGlvbigpO2lmKEwubWF0NGQubXVsdGlwbHkoZCx1KSwwPT09ZFsxXSYmMD09PWRbMl0mJjA9PT1kWzNdJiYwPT09ZFs0XSYmMD09PWRbNl0mJjA9PT1kWzddJiYwPT09ZFs4XSYmMD09PWRbOV0mJjA9PT1kWzExXSYmMT09PWRbMTVdKXt2YXIgYz1kZTtjWzBdPSh0WzBdLWRbMTJdKS9kWzBdLGNbMV09KHRbMV0tZFsxM10pL2RbNV0sY1syXT0odFsyXS1kWzE0XSkvZFsxMF0sY1szXT0odFszXS1kWzEyXSkvZFswXSxjWzRdPSh0WzRdLWRbMTNdKS9kWzVdLGNbNV09KHRbNV0tZFsxNF0pL2RbMTBdO2Zvcih2YXIgaD1zLmVuZ2luZU9iamVjdC5nZXRHZW9tZXRyeVJlY29yZHMoKVswXS5nZW9tZXRyeSxwPWguZ2V0Q29tcG9uZW50Q291bnQoKSxmPTA7ZjxwJiZhPHIubGVuZ3RoO2YrKylpZihyW2FdPT09bFtmXSl7dmFyIGc9aC5nZXRDb21wb25lbnRBQUJCKGYsdWUpO3YuaW50ZXJzZWN0cyhjLGcpJiYocltvXT1yW2FdLG8rKyksYSsrfXIubGVuZ3RoPW99fX0scC5wcm90b3R5cGUuX2FkZE9yVXBkYXRlRWRnZVJlbmRlcmluZz1mdW5jdGlvbihlKXtyZXR1cm4gaSh0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgdCxyLG4saSxvLHM7cmV0dXJuIGEodGhpcyxmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9lZGdlVmlldz8odD1lLmVuZ2luZU9iamVjdCxyPXRoaXMuX2VkZ2VWaWV3Lmhhc09iamVjdCh0KSxuPXRoaXMuX2V4dHJhY3RPYmplY3RFZGdlTWF0ZXJpYWxzKGUpLGk9bi5oYXNFZGdlcyxvPW4ucGVyRmVhdHVyZUVkZ2VNYXRlcmlhbHMscz0hdC5pc0hpZGRlbih0Lmdlb21ldHJ5UmVjb3Jkc1swXSkscj8odGhpcy5fZWRnZVZpZXcudXBkYXRlQWxsQ29tcG9uZW50TWF0ZXJpYWxzKHQsbyksdGhpcy5fZWRnZVZpZXcudXBkYXRlT2JqZWN0VmlzaWJpbGl0eSh0LHMpLFszLDNdKTpbMywxXSk6WzJdO2Nhc2UgMTpyZXR1cm4gcyYmaT9bNCx0aGlzLl9lZGdlVmlldy5hZGRPYmplY3QodCxvKV06WzMsM107Y2FzZSAyOmEuc2VudCgpLGEubGFiZWw9MztjYXNlIDM6cmV0dXJuWzJdfX0pfSl9LHAucHJvdG90eXBlLl9hcHBseUZpbHRlcnM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbm9kZUlkMk1ldGEuZ2V0KGUuaWQpO3QmJnRoaXMuX2FwcGx5RmlsdGVyc1RvT2JqZWN0cyhlLHQpfSxwLnByb3RvdHlwZS51bmhpZGVFZGdlc0ZvckFsbEZlYXR1cmVzPWZ1bmN0aW9uKGUpe3ZhciB0PWUuZW5naW5lT2JqZWN0O2lmKHRoaXMuX2VkZ2VWaWV3JiZ0aGlzLl9lZGdlVmlldy5oYXNPYmplY3QodCkpe3ZhciByPXRoaXMuZnVsbE9wYWNpdHk7dGhpcy5fZWRnZVZpZXcudXBkYXRlQWxsQ29tcG9uZW50T3BhY2l0aWVzKHQscil9fSxwLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzVG9PYmplY3RzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dC5lbmdpbmVPYmplY3Q7aWYoci51bmhpZGVBbGxDb21wb25lbnRzKCksMD09PXRoaXMuX2ZpbHRlcnMubGVuZ3RoKXJldHVybiB2b2lkIHRoaXMudW5oaWRlRWRnZXNGb3JBbGxGZWF0dXJlcyh0KTtmb3IodmFyIG49dC5mZWF0dXJlSWRzLGk9bi5zbGljZSgpLGE9MCxvPXRoaXMuX2ZpbHRlcnM7YTxvLmxlbmd0aDthKyspeygwLG9bYV0pKGUsaSl9aWYoaS5sZW5ndGg9PT1uLmxlbmd0aClyZXR1cm4gdm9pZCB0aGlzLnVuaGlkZUVkZ2VzRm9yQWxsRmVhdHVyZXModCk7Zm9yKHZhciBzPTAsbD1yLmdldEdlb21ldHJ5UmVjb3JkcygpWzBdLGQ9bmV3IEFycmF5KHQuZmVhdHVyZUlkcy5sZW5ndGgpLHU9dGhpcy5mdWxsT3BhY2l0eSxjPTA7YzxuLmxlbmd0aDtjKyspe3ZhciBoPW5bY107cz49aS5sZW5ndGh8fGlbc10hPT1oPyhyLnNldENvbXBvbmVudFZpc2liaWxpdHkobCxjLCExKSxkW2NdPTApOihzKyssZFtjXT11KX10aGlzLl9lZGdlVmlldyYmdGhpcy5fZWRnZVZpZXcuaGFzT2JqZWN0KHIpJiZ0aGlzLl9lZGdlVmlldy51cGRhdGVBbGxDb21wb25lbnRPcGFjaXRpZXMocixkKX0scC5wcm90b3R5cGUuX3JlbW92ZUFsbE5vZGVEYXRhRnJvbVN0YWdlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKGZ1bmN0aW9uKHQscil7cmV0dXJuIGUuX3JlbW92ZU5vZGVTdGFnZURhdGEocil9KX0scC5wcm90b3R5cGUuX3JlbW92ZU5vZGVEYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yZW1vdmVOb2RlU3RhZ2VEYXRhKGUuaWQpfSl9LHAucHJvdG90eXBlLl9yZW1vdmVOb2RlU3RhZ2VEYXRhPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX25vZGVJZDJNZXRhLmdldChlKTtpZih0KXt2YXIgcj10aGlzLl9zdGFnZSxuPXRoaXMuX3N0YWdlTGF5ZXIsaT10LmVuZ2luZU9iamVjdDt0aGlzLl9oaWdobGlnaHRzLm9iamVjdERlbGV0ZWQoaSksdGhpcy5fZWRnZVZpZXcmJnRoaXMuX2VkZ2VWaWV3LnJlbW92ZU9iamVjdChpKSx0aGlzLnZpc2libGVHZW9tZXRyeUNoYW5nZWQoaSksbi5yZW1vdmVPYmplY3QoaSk7Zm9yKHZhciBhPTAsbz1pLmdldEdlb21ldHJ5UmVjb3JkcygpO2E8by5sZW5ndGg7YSsrKXt2YXIgcz1vW2FdO3RoaXMubWVtRXN0aW1hdGVHZW9tZXRyeVJlbW92ZWQocy5nZW9tZXRyeS5nZXREYXRhKCkpLHIucmVtb3ZlKHRlLkdFT01FVFJZLHMuZ2VvbWV0cnkuaWQpO2Zvcih2YXIgbD0wLGQ9cy5tYXRlcmlhbHM7bDxkLmxlbmd0aDtsKyspe3ZhciB1PWRbbF07dGhpcy5fcmVtb3ZlTWF0ZXJpYWwodSxyKX19aWYodC5jb21wb25lbnRJbmRpY2VzKXtmb3IodmFyIGM9MDtjPHQuY29tcG9uZW50SW5kaWNlcy5sZW5ndGg7YysrKXQuY29tcG9uZW50Q29sb3JCdWZmZXIucmVsZWFzZUluZGV4KHQuY29tcG9uZW50SW5kaWNlc1tjXSk7dGhpcy5fY29tcG9uZW50Q29sb3JNYW5hZ2VyLmdhcmJhZ2VDb2xsZWN0KCl9ci5yZW1vdmUodGUuT0JKRUNULGkuaWQpLHRoaXMuX25vZGVJZDJNZXRhLmRlbGV0ZShlKX19LHAucHJvdG90eXBlLl9yZW1vdmVNYXRlcmlhbD1mdW5jdGlvbihlLHQpe3QucmVtb3ZlKHRlLk1BVEVSSUFMLGUuaWQpO3ZhciByPWUubWV0YWRhdGEuaTNzVGV4SWR8fFwibm9uZVwiO2lmKFwibm9uZVwiIT09cil7dmFyIG49dGhpcy5fdGV4SWQyTWV0YS5nZXQociksaT1uLnVzZWRCeUVuZ2luZU1hdHMsYT1pLmluZGV4T2YoZSk7aWYoYT4tMT8oaVthXT1pW2kubGVuZ3RoLTFdLGkucG9wKCkpOnJlLmVycm9yKFwiTWlzc2luZyByZWZlcmVuY2UgZnJvbSBtYXRlcmlhbCB0byB0ZXh0dXJlXCIpLDA9PT1pLmxlbmd0aCl7dmFyIG89bi5lbmdpbmVUZXg7byYmbyE9PXRoaXMuX3doaXRlVGV4dHVyZSYmKHRoaXMubWVtRXN0aW1hdGVUZXh0dXJlUmVtb3ZlZChvKSx0LnJlbW92ZSh0ZS5URVhUVVJFLG4uZW5naW5lVGV4LmlkKSksdGhpcy5fdGV4SWQyTWV0YS5kZWxldGUocil9fX0scC5wcm90b3R5cGUuX3NldFBvbHlnb25PZmZzZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9ub2RlSWQyTWV0YS5nZXQoZS5pZCk7aWYocilmb3IodmFyIG49MCxpPXIuZW5naW5lT2JqZWN0LmdldEdlb21ldHJ5UmVjb3JkcygpO248aS5sZW5ndGg7bisrKWZvcih2YXIgYT1pW25dLG89MCxzPWEubWF0ZXJpYWxzO288cy5sZW5ndGg7bysrKXt2YXIgbD1zW29dO2wuc2V0UGFyYW1ldGVyVmFsdWVzKHtwb2x5Z29uT2Zmc2V0OnR9KX19LHAucHJvdG90eXBlLl9yZW5kZXJlckNoYW5nZT1mdW5jdGlvbihlKXtpZih0aGlzLl9jdXJyZW50UmVuZGVyZXI9ZSxlJiYoZS5jb2xvckluZm98fGUuc2l6ZUluZm8pJiZyZS53YXJuKFwicmVuZGVyZXIuY29sb3JJbmZvIGFuZCByZW5kZXJlci5zaXplSW5mbyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgU2NlbmUgU2VydmljZXMuIFVzZSB2aXN1YWxWYXJpYWJsZXMgaW5zdGVhZC5cIiksZSlmb3IodmFyIHQ9MCxyPWUuZ2V0U3ltYm9scygpO3Q8ci5sZW5ndGg7dCsrKXt2YXIgbj1yW3RdO1wibWVzaC0zZFwiIT09bi50eXBlJiZyZS5lcnJvcihcIlN5bWJvbHMgb2YgdHlwZSAnXCIrbi50eXBlK1wiJyBhcmUgbm90IHN1cHBvcnRlZCBmb3IgM0QgT2JqZWN0IFNjZW5lIFNlcnZpY2VzLlwiKX10aGlzLnZpZXcucmVzb3VyY2VDb250cm9sbGVyLnNldE1lbW9yeURpcnR5KCl9LHAucHJvdG90eXBlLl9nZXRSZW5kZXJpbmdJbmZvPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fY3VycmVudFJlbmRlcmVyLG49ciYmci5nZXRTeW1ib2woZSk7aWYoIShuIGluc3RhbmNlb2YgRSYmdGhpcy5faGFzU3ltYm9sQ29sb3JzKCkpKXJldHVybiBudWxsO3ZhciBpLGE7aWYociYmci52aXN1YWxWYXJpYWJsZXMpZm9yKHZhciBvPXIuZ2V0VmlzdWFsVmFyaWFibGVWYWx1ZXMoZSkscz0wO3M8by5sZW5ndGg7cysrKXt2YXIgbD1vW3NdLGQ9bC52YXJpYWJsZS50eXBlO1wiY29sb3JcIj09PWQ/aT1sLnZhbHVlOlwib3BhY2l0eVwiPT09ZCYmKGE9bC52YWx1ZSl9cmV0dXJuIHQuc3ltYm9sPW4sdC5jb2xvcj1pP1tpLnIvMjU1LGkuZy8yNTUsaS5iLzI1NV06bnVsbCxudWxsIT1hP3Qub3BhY2l0eT1hOmkmJm51bGwhPWkuYT90Lm9wYWNpdHk9aS5hOnQub3BhY2l0eT1udWxsLHR9LHAucHJvdG90eXBlLl9nZXRTeW1ib2xGaWxsTWF0ZXJpYWw9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxuPWUuc3ltYm9sTGF5ZXJzLml0ZW1zO3I8bi5sZW5ndGg7cisrKXt2YXIgaT1uW3JdO2lmKFwiZmlsbFwiPT09aS50eXBlKXt2YXIgYT1pLm1hdGVyaWFsLG89bnVsbCE9YT9hLmNvbG9yOm51bGw7cmV0dXJuIG51bGwhPW8/KGNlWzBdPW8uci8yNTUsY2VbMV09by5nLzI1NSxjZVsyXT1vLmIvMjU1LGNlWzNdPW8uYSx0LmNvbG9yPWNlKTp0LmNvbG9yPW51bGwsdm9pZCh0LmNvbG9yTWl4TW9kZT1udWxsIT1hP2EuY29sb3JNaXhNb2RlOm51bGwpfX10LmNvbG9yPW51bGwsdC5jb2xvck1peE1vZGU9bnVsbH0scC5wcm90b3R5cGUuX2hhc1N5bWJvbENvbG9ycz1mdW5jdGlvbigpe2lmKHRoaXMuX2lzSW50ZWdyYXRlZE1lc2goKXx8IXRoaXMubGF5ZXIuc3RvcmUuZGVmYXVsdEdlb21ldHJ5U2NoZW1hKXJldHVybiExO3ZhciBlPXRoaXMubGF5ZXIuc3RvcmUuZGVmYXVsdEdlb21ldHJ5U2NoZW1hLmZlYXR1cmVBdHRyaWJ1dGVzO3JldHVybiEhKGUmJmUuZmFjZVJhbmdlJiZlLmlkKX0scC5wcm90b3R5cGUuX2lzSW50ZWdyYXRlZE1lc2g9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXllciBpbnN0YW5jZW9mIE19LHAucHJvdG90eXBlLl9oYXNWZXJ0ZXhDb2xvcnM9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9dGhpcy5sYXllci5zdG9yZS5kZWZhdWx0R2VvbWV0cnlTY2hlbWEudmVydGV4QXR0cmlidXRlcy5jb2xvciYmKG51bGw9PXRoaXMubGF5ZXIuY2FjaGVkRHJhd2luZ0luZm98fCF0aGlzLmxheWVyLmNhY2hlZERyYXdpbmdJbmZvLmNvbG9yKX0scC5wcm90b3R5cGUuX2V4dHJhY3RPYmplY3RFZGdlTWF0ZXJpYWxzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPVtdLG49ZS5mZWF0dXJlSWRzP2UuZmVhdHVyZUlkcy5sZW5ndGg6MSxpPXRoaXMubGF5ZXIub2JqZWN0SWRGaWVsZCxhPW5ldyBsKG51bGwsbnVsbCx7fSksbz1hLmF0dHJpYnV0ZXMscz10aGlzLl9jdXJyZW50UmVuZGVyZXImJnRoaXMuX2N1cnJlbnRSZW5kZXJlci5yZXF1aXJlZEZpZWxkcyxkPXRoaXMuX2VkZ2VWaWV3LmNyZWF0ZVNvbGlkRWRnZU1hdGVyaWFsKHtjb2xvcjpbMCwwLDAsMF0sb3BhY2l0eTowfSksdT10aGlzLmZ1bGxPcGFjaXR5LGM9ITEsaD0wO2g8bjtoKyspe2lmKHQ9ZCxudWxsIT1pJiZudWxsIT1lLmZlYXR1cmVJZHMmJihvW2ldPWUuZmVhdHVyZUlkc1toXSksbnVsbCE9cyYmbnVsbCE9ZS5hdHRyaWJ1dGVEYXRhKWZvcih2YXIgcD1PYmplY3Qua2V5cyhlLmF0dHJpYnV0ZURhdGEpLGY9MCxnPXA7ZjxnLmxlbmd0aDtmKyspe3ZhciB5PWdbZl07b1t5XT1GLmdldENhY2hlZEF0dHJpYnV0ZVZhbHVlKGUuYXR0cmlidXRlRGF0YVt5XSxoKX12YXIgbT10aGlzLl9nZXRSZW5kZXJpbmdJbmZvKGEsaGUpLF89ZS5lbmdpbmVPYmplY3QsYj1fLmdldENvbXBvbmVudFZpc2liaWxpdHkoXy5nZXRHZW9tZXRyeVJlY29yZHMoKVswXSxoKSx2PWI/dTowO2lmKG0mJm0uc3ltYm9sIGluc3RhbmNlb2YgRSlmb3IodmFyIHg9MCxNPW0uc3ltYm9sLnN5bWJvbExheWVycy5pdGVtczt4PE0ubGVuZ3RoO3grKyl7dmFyIHc9TVt4XTtpZih3IGluc3RhbmNlb2YgSSl7dmFyIEM9Ry5jcmVhdGVNYXRlcmlhbCh0aGlzLl9lZGdlVmlldyx3LHYpO2lmKEMpe2M9ITAsdD1DO2JyZWFrfX19ci5wdXNoKHQpfXJldHVybntoYXNFZGdlczpjLHBlckZlYXR1cmVFZGdlTWF0ZXJpYWxzOnJ9fSxwLnByb3RvdHlwZS5fc2V0T2JqZWN0U3ltYm9sb2d5PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2hhc1N5bWJvbENvbG9ycygpKXtmb3IodmFyIHQ9ZS5mZWF0dXJlSWRzP2UuZmVhdHVyZUlkcy5sZW5ndGg6MSxyPW5ldyBsKG51bGwsbnVsbCx7fSksbj1yLmF0dHJpYnV0ZXMsaT10aGlzLmxheWVyLm9iamVjdElkRmllbGQsYT10aGlzLl9jdXJyZW50UmVuZGVyZXImJnRoaXMuX2N1cnJlbnRSZW5kZXJlci5yZXF1aXJlZEZpZWxkcyxvPSExLHM9bmV3IFVpbnQ4QXJyYXkoNCksZD17Y29sb3I6bnVsbCxjb2xvck1peE1vZGU6bnVsbH0sdT1bMCwwLDAsMF0sYz1udWxsLGg9MDtoPHQ7aCsrKXtpZihudWxsIT1pJiZudWxsIT1lLmZlYXR1cmVJZHMmJihuW2ldPWUuZmVhdHVyZUlkc1toXSksbnVsbCE9YSYmbnVsbCE9ZS5hdHRyaWJ1dGVEYXRhKWZvcih2YXIgcD1PYmplY3Qua2V5cyhlLmF0dHJpYnV0ZURhdGEpLGY9MCxnPXA7ZjxnLmxlbmd0aDtmKyspe3ZhciB5PWdbZl07blt5XT1GLmdldENhY2hlZEF0dHJpYnV0ZVZhbHVlKGUuYXR0cmlidXRlRGF0YVt5XSxoKX12YXIgbT10aGlzLl9nZXRSZW5kZXJpbmdJbmZvKHIsaGUpO2lmKG0pe20uc3ltYm9sIT09YyYmKGM9bS5zeW1ib2wsdGhpcy5fZ2V0U3ltYm9sRmlsbE1hdGVyaWFsKG0uc3ltYm9sLGQpKTt2YXIgXz1tLmNvbG9yLGI9bS5vcGFjaXR5O189bnVsbD09X3x8bnVsbD09Yj9ULm92ZXJyaWRlQ29sb3IoXyxiLGQuY29sb3IsZC5jb2xvciYmZC5jb2xvclszXSxuZSx1KTpULm92ZXJyaWRlQ29sb3IoXyxiLG51bGwsbnVsbCxuZSx1KSxfWzNdPDEmJihvPSEwKSxcbkYuZW5jb2RlU3ltYm9sQ29sb3IoXyxkLmNvbG9yTWl4TW9kZSxzKX1lbHNlIEYuZW5jb2RlU3ltYm9sQ29sb3IobnVsbCxudWxsLHMpO3ZhciB2PWUuY29tcG9uZW50SW5kaWNlc1toXTtlLmNvbXBvbmVudENvbG9yQnVmZmVyLnRleHR1cmVCdWZmZXIuc2V0RGF0YSh2LDAsc1swXSxzWzFdLHNbMl0sc1szXSl9dGhpcy5fdXBkYXRlT2JqZWN0T3BhY2l0eShlLmVuZ2luZU9iamVjdCxvKX19LHAucHJvdG90eXBlLl9zZXRDb21wb25lbnRJbmRpY2VzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWUuZ2V0QXR0cmlidXRlKFEuVmVydGV4QXR0ckNvbnN0YW50cy5DT01QT05FTlRJTkRFWCksbj1yLmRhdGEsaT1yLm9mZnNldElkeCxhPXIuc3RyaWRlSWR4LG89ZS5nZXRJbmRpY2VzKFEuVmVydGV4QXR0ckNvbnN0YW50cy5DT01QT05FTlRJTkRFWCkscz0wO3M8dC5sZW5ndGg7cysrKWZvcih2YXIgbD1lLmNvbXBvbmVudE9mZnNldHNbc10sZD1lLmNvbXBvbmVudE9mZnNldHNbcysxXSx1PWw7dTxkO3UrKyl7dmFyIGM9aStvW3VdKmE7bltjXT10W3NdfX0scC5wcm90b3R5cGUuX2VsZXZhdGlvbkluZm9DaGFuZ2VkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5sYXllci5lbGV2YXRpb25JbmZvJiZ0aGlzLmxheWVyLmVsZXZhdGlvbkluZm8udW5pdDtlJiYhdy5zdXBwb3J0c1VuaXQoZSkmJnJlLndhcm4oXCJlbGV2YXRpb25JbmZvLnVuaXRcIixcIidcIitlK1wiJyBpcyBub3QgYSB2YWxpZCB1bml0XCIpfSxwLnByb3RvdHlwZS5fcmFuZ2VJbmZvc0NoYW5nZWQ9ZnVuY3Rpb24oZSl7bnVsbCE9ZSYmZS5sZW5ndGg+MCYmcmUud2FybihcIlVuc3VwcG9ydGVkIHByb3BlcnR5OiByYW5nZUluZm9zIGFyZSBjdXJyZW50bHkgb25seSBzZXJpYWxpemVkIHRvIGFuZCBmcm9tIHdlYiBzY2VuZXMgYnV0IGRvIG5vdCBhZmZlY3QgcmVuZGVyaW5nLlwiKX0scC5wcm90b3R5cGUuX3JlbG9hZEFsbD1mdW5jdGlvbigpe3RoaXMuX3JlbW92ZUFsbE5vZGVEYXRhRnJvbVN0YWdlKCksbnVsbCE9dGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci5yZXN0YXJ0Tm9kZUxvYWRpbmcoKX0scC5wcm90b3R5cGUuX29wYWNpdHlDaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9ub2RlSWQyTWV0YS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuX3VwZGF0ZU9iamVjdE9wYWNpdHkoZS5lbmdpbmVPYmplY3QpLHQuX2FkZE9yVXBkYXRlRWRnZVJlbmRlcmluZyhlKX0pfSxwLnByb3RvdHlwZS5fdXBkYXRlT2JqZWN0T3BhY2l0eT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wLG49ZS5nZXRHZW9tZXRyeVJlY29yZHMoKTtyPG4ubGVuZ3RoO3IrKylmb3IodmFyIGk9bltyXSxhPTAsbz1pLm1hdGVyaWFsczthPG8ubGVuZ3RoO2ErKyl7dmFyIHM9b1thXSxsPXMubWV0YWRhdGE7dm9pZCAwIT09dCYmKGwuc3ltYm9sSXNUcmFuc3BhcmVudD10KTt2YXIgZD1zLmdldFBhcmFtcygpLHU9dGhpcy5fY2FsY0VuZ2luZU1hdGVyaWFsVHJhbnNwYXJlbmN5UGFyYW1zKGwuaTNzVGV4LGwuaTNzTWF0UGFyYW1zLGwuc3ltYm9sSXNUcmFuc3BhcmVudCk7ZC50cmFuc3BhcmVudD09PXUudHJhbnNwYXJlbnQmJmQubGF5ZXJPcGFjaXR5PT09dS5sYXllck9wYWNpdHl8fHMuc2V0UGFyYW1ldGVyVmFsdWVzKHUpfX0scC5wcm90b3R5cGUucXVlcnlFeHRlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2Vuc3VyZVF1ZXJ5RW5naW5lKCkucXVlcnlFeHRlbnQoZSl9LHAucHJvdG90eXBlLnF1ZXJ5RmVhdHVyZUNvdW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbnN1cmVRdWVyeUVuZ2luZSgpLnF1ZXJ5RmVhdHVyZUNvdW50KGUpfSxwLnByb3RvdHlwZS5xdWVyeUZlYXR1cmVzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbnN1cmVRdWVyeUVuZ2luZSgpLnF1ZXJ5RmVhdHVyZXMoZSl9LHAucHJvdG90eXBlLnF1ZXJ5T2JqZWN0SWRzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbnN1cmVRdWVyeUVuZ2luZSgpLnF1ZXJ5T2JqZWN0SWRzKGUpfSxwLnByb3RvdHlwZS5fZW5zdXJlUXVlcnlFbmdpbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcXVlcnlFbmdpbmV8fCh0aGlzLl9xdWVyeUVuZ2luZT10aGlzLl9jcmVhdGVRdWVyeUVuZ2luZSgpKSx0aGlzLl9xdWVyeUVuZ2luZX0scC5wcm90b3R5cGUuX2NyZWF0ZVF1ZXJ5RW5naW5lPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXtpZDowLGluZGV4OjAsbWV0YTpudWxsLGJiQ29ybmVyczpuZXcgRmxvYXQ2NEFycmF5KDI0KX07cmV0dXJuIG5ldyBqKHRoaXMubGF5ZXIse2ZvckFsbDpmdW5jdGlvbihyLG4pe3ZhciBpPWZ1bmN0aW9uKG4saSxhKXt0LmlkPW4sdC5pbmRleD1pLHQubWV0YT1hLGUuX2JvdW5kaW5nQm94Q29ybmVyUG9pbnRzKGksYS5lbmdpbmVPYmplY3QsdC5iYkNvcm5lcnMpLHIodCl9O2UuX2ZvckFsbEZlYXR1cmVzKGksbil9LGNyZWF0ZUdyYXBoaWM6ZnVuY3Rpb24odCl7cmV0dXJuIGUuX2NyZWF0ZUdyYXBoaWModC5pbmRleCx0Lm1ldGEpfSxyZXF1ZXN0RmllbGRzOmZ1bmN0aW9uKHQscixuKXt2YXIgaT1mdW5jdGlvbigpe3ZhciBuPWUuX2dldEdyYXBoaWNJbmRpY2VzKHQscik7cmV0dXJue25vZGU6dCxpbmRpY2VzOm59fTtyZXR1cm4gRi53aGVuR3JhcGhpY0F0dHJpYnV0ZXMoZS5sYXllcixyLGUuX2dldE9iamVjdElkRmllbGQoKSxuLGkse2lnbm9yZVVuYXZhaWxhYmxlRmllbGRzOiExfSl9LGNyZWF0ZUV4dGVudEJ1aWxkZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZS5fY3JlYXRlRXh0ZW50QnVpbGRlcigpfX0se2VuYWJsZU9iamVjdElkOiEwLGVuYWJsZU91dEZpZWxkczohIXRoaXMubGF5ZXIub2JqZWN0SWRGaWVsZH0pfSxwLnByb3RvdHlwZS5fY3JlYXRlRXh0ZW50QnVpbGRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXMudmlldy5yZW5kZXJTcGF0aWFsUmVmZXJlbmNlLHQ9dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2Uscj12LmVtcHR5KCksbj1uZXcgRmxvYXQ2NEFycmF5KDI0KTtyZXR1cm57YWRkOmZ1bmN0aW9uKGkpe1AuYnVmZmVyVG9CdWZmZXIoaS5iYkNvcm5lcnMsZSwwLG4sdCwwLDgpJiZ2LmV4cGFuZFdpdGhCdWZmZXIocixuLDAsOCl9LGdldEV4dGVudDpmdW5jdGlvbigpe3JldHVybiB2LnRvRXh0ZW50KHIsdCl9fX0scC5wcm90b3R5cGUuX2ZvckFsbEZlYXR1cmVzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj10aGlzO3RoaXMuX25vZGVJZDJNZXRhLmZvckVhY2goZnVuY3Rpb24oaSxhKXtuLl9mb3JBbGxGZWF0dXJlc09mTm9kZShpLGUsciksdCYmdChpLm5vZGUpfSl9LHAucHJvdG90eXBlLl9mb3JBbGxGZWF0dXJlc09mTm9kZT1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBuPWUuZmVhdHVyZUlkcyxpPWUuZW5naW5lT2JqZWN0LmdldEdlb21ldHJ5UmVjb3JkcygpWzBdLGE9MDthPG4ubGVuZ3RoO2ErKylpZihyfHxlLmVuZ2luZU9iamVjdC5nZXRDb21wb25lbnRWaXNpYmlsaXR5KGksYSkpe3ZhciBvPW5bYV07dChvLGEsZSxpKX19LHAucHJvdG90eXBlLl9jcmVhdGVHcmFwaGljPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e307aWYobnVsbCE9dC5mZWF0dXJlSWRzJiYoclt0aGlzLl9nZXRPYmplY3RJZEZpZWxkKCldPXQuZmVhdHVyZUlkc1tlXSksbnVsbCE9dC5hdHRyaWJ1dGVEYXRhKWZvcih2YXIgbj0wLGk9T2JqZWN0LmtleXModC5hdHRyaWJ1dGVEYXRhKTtuPGkubGVuZ3RoO24rKyl7dmFyIGE9aVtuXTtyW2FdPUYuZ2V0Q2FjaGVkQXR0cmlidXRlVmFsdWUodC5hdHRyaWJ1dGVEYXRhW2FdLGUpfXZhciBvPW5ldyBsKG51bGwsbnVsbCxyKTtyZXR1cm4gby5sYXllcj10aGlzLmxheWVyLG8uc291cmNlTGF5ZXI9dGhpcy5sYXllcixvfSxwLnByb3RvdHlwZS5fYm91bmRpbmdCb3hDb3JuZXJQb2ludHM9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgbj10Lmdlb21ldHJpZXNbMF0uZ2V0Q29tcG9uZW50QUFCQihlLGRlKSxpPTA7aTw4OysraSlsZVswXT0xJmk/blswXTpuWzNdLGxlWzFdPTImaT9uWzFdOm5bNF0sbGVbMl09NCZpP25bMl06bls1XSxMLm1hdDRkLm11bHRpcGx5VmVjMyh0Lm9iamVjdFRyYW5zZm9ybWF0aW9uLGxlKSxyWzMqaV09bGVbMF0sclszKmkrMV09bGVbMV0sclszKmkrMl09bGVbMl07cmV0dXJuIHJ9LHAucHJvdG90eXBlLmhpZ2hsaWdodD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsbj10aGlzLl9oaWdobGlnaHRzO2lmKGUgaW5zdGFuY2VvZiBDKXt2YXIgaT1uLmFjcXVpcmVTZXQodCksYT1pLnNldCxvPWkuaGFuZGxlO3JldHVybiB0aGlzLnF1ZXJ5T2JqZWN0SWRzKGUpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG4uc2V0RmVhdHVyZUlkcyhhLGUpfSksb31pZihcIm51bWJlclwiPT10eXBlb2YgZSlyZXR1cm4gdGhpcy5oaWdobGlnaHQoW2VdLHQpO2lmKGUgaW5zdGFuY2VvZiBsKXJldHVybiB0aGlzLmhpZ2hsaWdodChbZV0sdCk7aWYoZSBpbnN0YW5jZW9mIGMmJihlPWUudG9BcnJheSgpKSxBcnJheS5pc0FycmF5KGUpJiZlLmxlbmd0aD4wKXtpZihlWzBdaW5zdGFuY2VvZiBsKXt2YXIgcz1lLGQ9cy5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIFIuYXR0cmlidXRlTG9va3VwKGUuYXR0cmlidXRlcyxyLl9nZXRPYmplY3RJZEZpZWxkKCkpfSksdT1uLmFjcXVpcmVTZXQodCksaD11LnNldCxvPXUuaGFuZGxlO3JldHVybiBuLnNldEZlYXR1cmVJZHMoaCxkKSxvfWlmKFwibnVtYmVyXCI9PXR5cGVvZiBlWzBdKXt2YXIgZD1lLHA9bi5hY3F1aXJlU2V0KHQpLGg9cC5zZXQsbz1wLmhhbmRsZTtyZXR1cm4gbi5zZXRGZWF0dXJlSWRzKGgsZCksb319cmV0dXJue3JlbW92ZTpmdW5jdGlvbigpe319fSxwLnByb3RvdHlwZS52aXNpYmxlR2VvbWV0cnlDaGFuZ2VkPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ZT90aGlzLl9lbGV2YXRpb25Qcm92aWRlci5vYmplY3RDaGFuZ2VkKGUpOnRoaXMuX2VsZXZhdGlvblByb3ZpZGVyLmxheWVyQ2hhbmdlZCgpLG51bGw9PXRoaXMuX3Zpc2libGVHZW9tZXRyeUNoYW5nZWRTY2hlZHVsZXJIYW5kbGUmJih0aGlzLl92aXNpYmxlR2VvbWV0cnlDaGFuZ2VkU2NoZWR1bGVySGFuZGxlPXkuc2NoZWR1bGUoZnVuY3Rpb24oKXt0LmVtaXQoXCJ2aXNpYmxlLWdlb21ldHJ5LWNoYW5nZWRcIiksdC5fdmlzaWJsZUdlb21ldHJ5Q2hhbmdlZFNjaGVkdWxlckhhbmRsZT1udWxsfSkpfSxuKFtiLnByb3BlcnR5KCldLHAucHJvdG90eXBlLFwibGF5ZXJcIix2b2lkIDApLG4oW2IucHJvcGVydHkoKV0scC5wcm90b3R5cGUsXCJfY29udHJvbGxlclwiLHZvaWQgMCksbihbYi5wcm9wZXJ0eSh7ZGVwZW5kc09uOltcIl9jb250cm9sbGVyLnVwZGF0aW5nXCJdfSldLHAucHJvdG90eXBlLFwidXBkYXRpbmdcIix2b2lkIDApLG4oW2IucHJvcGVydHkoQi51cGRhdGluZ1BlcmNlbnRhZ2UpXSxwLnByb3RvdHlwZSxcInVwZGF0aW5nUGVyY2VudGFnZVwiLHZvaWQgMCksbihbYi5wcm9wZXJ0eSh7cmVhZE9ubHk6ITAsYWxpYXNPZjpcIl9jb250cm9sbGVyLnVwZGF0aW5nUGVyY2VudGFnZVwifSldLHAucHJvdG90eXBlLFwidXBkYXRpbmdQZXJjZW50YWdlVmFsdWVcIix2b2lkIDApLG4oW2IucHJvcGVydHkoe3JlYWRPbmx5OiEwfSldLHAucHJvdG90eXBlLFwiaGFzVGV4dHVyZXNPclZlcnRleENvbG9yc1wiLG51bGwpLG4oW2IucHJvcGVydHkoe3JlYWRPbmx5OiEwLGRlcGVuZHNPbjpbXCJsYXllci5yZW5kZXJlclwiXX0pXSxwLnByb3RvdHlwZSxcInJlbmRlcmVyTmVlZHNUZXh0dXJlc1wiLG51bGwpLG4oW2IucHJvcGVydHkoe3JlYWRPbmx5OiEwLGRlcGVuZHNPbjpbXCJsYXllci5lbGV2YXRpb25JbmZvXCJdfSldLHAucHJvdG90eXBlLFwiZWxldmF0aW9uT2Zmc2V0XCIsbnVsbCksbihbYi5wcm9wZXJ0eSgpXSxwLnByb3RvdHlwZSxcImFsd2F5c0xvYWRFdmVyeXRoaW5nTW9kZUVuYWJsZWRcIix2b2lkIDApLG4oW2IucHJvcGVydHkoe2RlcGVuZHNPbjpbXCJ2aWV3LnF1YWxpdHlTZXR0aW5ncy5zY2VuZVNlcnZpY2UudW5jb21wcmVzc2VkVGV4dHVyZURvd25zYW1wbGluZ0VuYWJsZWRcIixcIl91c2VDb21wcmVzc2VkVGV4dHVyZXNcIl19KV0scC5wcm90b3R5cGUsXCJ1bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZFwiLG51bGwpLG4oW2IucHJvcGVydHkoe2RlcGVuZHNPbjpbXCJsYXllci52ZXJzaW9uXCJdfSldLHAucHJvdG90eXBlLFwiX3VzZUNvbXByZXNzZWRUZXh0dXJlc1wiLG51bGwpLHA9bihbYi5zdWJjbGFzcyhcImVzcmkudmlld3MuM2QubGF5ZXJzLlNjZW5lTGF5ZXJWaWV3M0RcIildLHApfShiLmRlY2xhcmVkKE8pKSxsZT1MLnZlYzNkLmNyZWF0ZSgpLGRlPXYuY3JlYXRlKCksdWU9di5jcmVhdGUoKSxjZT1bMCwwLDAsMF0saGU9e3N5bWJvbDpudWxsfTtyZXR1cm4gc2V9KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/arcgis-js-api/views/3d/layers/SceneLayerView3D.js\n");

/***/ }),

/***/ "./node_modules/arcgis-js-api/views/3d/layers/i3s/Highlights.js":
/*!**********************************************************************!*\
  !*** ./node_modules/arcgis-js-api/views/3d/layers/i3s/Highlights.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2018 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.8/esri/copyright.txt for details.\n\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../webgl-engine/lib/HighlightSet */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/HighlightSet.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t,e,i){var h=function(){function t(t){this.highlightSet=new i,this.ids=new Set,this.options=t}return t}();return function(){function t(t){this.highlights=[],this.layerView=t}return t.prototype.destroy=function(){this.highlights.forEach(function(t){return t.highlightSet.removeAll()}),this.highlights=null},t.prototype.acquireSet=function(t){var e=this,i=new h(t);return this.highlights.push(i),{set:i,handle:{remove:function(){return e.releaseSet(i)}}}},t.prototype.releaseSet=function(t){t.highlightSet.removeAll();var e=this.highlights?this.highlights.indexOf(t):-1;-1!==e&&this.highlights.splice(e,1)},t.prototype.setFeatureIds=function(t,e){e.forEach(function(e){return t.ids.add(e)}),this.layerView._forAllFeatures(function(e,i,h,n){if(t.ids.has(e)){var o=h.engineObject.setComponentHighlight(n,i,t.options);t.highlightSet.addObject(h.engineObject,o)}},null,!0)},t.prototype.objectCreated=function(t){var e=this;this.highlights.forEach(function(i){e.layerView._forAllFeaturesOfNode(e.layerView._getMetadata(t),function(e,h,n,o){if(i.ids.has(e)){var r=t.setComponentHighlight(o,h,i.options);i.highlightSet.addObject(t,r)}},!0)})},t.prototype.objectDeleted=function(t){this.highlights.forEach(function(e){e.highlightSet.removeObject(t)})},t.prototype.allObjectsDeleted=function(){this.highlights.forEach(function(t){return t.highlightSet.removeAll()})},t}()}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYXJjZ2lzLWpzLWFwaS92aWV3cy8zZC9sYXllcnMvaTNzL0hpZ2hsaWdodHMuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYXJjZ2lzLWpzLWFwaS92aWV3cy8zZC9sYXllcnMvaTNzL0hpZ2hsaWdodHMuanM/NjU3NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDT1BZUklHSFQgwqkgMjAxOCBFc3JpXG4vL1xuLy8gQWxsIHJpZ2h0cyByZXNlcnZlZCB1bmRlciB0aGUgY29weXJpZ2h0IGxhd3Mgb2YgdGhlIFVuaXRlZCBTdGF0ZXNcbi8vIGFuZCBhcHBsaWNhYmxlIGludGVybmF0aW9uYWwgbGF3cywgdHJlYXRpZXMsIGFuZCBjb252ZW50aW9ucy5cbi8vXG4vLyBUaGlzIG1hdGVyaWFsIGlzIGxpY2Vuc2VkIGZvciB1c2UgdW5kZXIgdGhlIEVzcmkgTWFzdGVyIExpY2Vuc2Vcbi8vIEFncmVlbWVudCAoTUxBKSwgYW5kIGlzIGJvdW5kIGJ5IHRoZSB0ZXJtcyBvZiB0aGF0IGFncmVlbWVudC5cbi8vIFlvdSBtYXkgcmVkaXN0cmlidXRlIGFuZCB1c2UgdGhpcyBjb2RlIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuLy8gcHJvdmlkZWQgeW91IGFkaGVyZSB0byB0aGUgdGVybXMgb2YgdGhlIE1MQSBhbmQgaW5jbHVkZSB0aGlzXG4vLyBjb3B5cmlnaHQgbm90aWNlLlxuLy9cbi8vIFNlZSB1c2UgcmVzdHJpY3Rpb25zIGF0IGh0dHA6Ly93d3cuZXNyaS5jb20vbGVnYWwvcGRmcy9tbGFfZTIwNF9lMzAwL2VuZ2xpc2hcbi8vXG4vLyBGb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiwgY29udGFjdDpcbi8vIEVudmlyb25tZW50YWwgU3lzdGVtcyBSZXNlYXJjaCBJbnN0aXR1dGUsIEluYy5cbi8vIEF0dG46IENvbnRyYWN0cyBhbmQgTGVnYWwgU2VydmljZXMgRGVwYXJ0bWVudFxuLy8gMzgwIE5ldyBZb3JrIFN0cmVldFxuLy8gUmVkbGFuZHMsIENhbGlmb3JuaWEsIFVTQSA5MjM3M1xuLy8gVVNBXG4vL1xuLy8gZW1haWw6IGNvbnRyYWN0c0Blc3JpLmNvbVxuLy9cbi8vIFNlZSBodHRwOi8vanMuYXJjZ2lzLmNvbS80LjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuXG5kZWZpbmUoW1wicmVxdWlyZVwiLFwiZXhwb3J0c1wiLFwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9IaWdobGlnaHRTZXRcIl0sZnVuY3Rpb24odCxlLGkpe3ZhciBoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmhpZ2hsaWdodFNldD1uZXcgaSx0aGlzLmlkcz1uZXcgU2V0LHRoaXMub3B0aW9ucz10fXJldHVybiB0fSgpO3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5oaWdobGlnaHRzPVtdLHRoaXMubGF5ZXJWaWV3PXR9cmV0dXJuIHQucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt0aGlzLmhpZ2hsaWdodHMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5oaWdobGlnaHRTZXQucmVtb3ZlQWxsKCl9KSx0aGlzLmhpZ2hsaWdodHM9bnVsbH0sdC5wcm90b3R5cGUuYWNxdWlyZVNldD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9bmV3IGgodCk7cmV0dXJuIHRoaXMuaGlnaGxpZ2h0cy5wdXNoKGkpLHtzZXQ6aSxoYW5kbGU6e3JlbW92ZTpmdW5jdGlvbigpe3JldHVybiBlLnJlbGVhc2VTZXQoaSl9fX19LHQucHJvdG90eXBlLnJlbGVhc2VTZXQ9ZnVuY3Rpb24odCl7dC5oaWdobGlnaHRTZXQucmVtb3ZlQWxsKCk7dmFyIGU9dGhpcy5oaWdobGlnaHRzP3RoaXMuaGlnaGxpZ2h0cy5pbmRleE9mKHQpOi0xOy0xIT09ZSYmdGhpcy5oaWdobGlnaHRzLnNwbGljZShlLDEpfSx0LnByb3RvdHlwZS5zZXRGZWF0dXJlSWRzPWZ1bmN0aW9uKHQsZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Lmlkcy5hZGQoZSl9KSx0aGlzLmxheWVyVmlldy5fZm9yQWxsRmVhdHVyZXMoZnVuY3Rpb24oZSxpLGgsbil7aWYodC5pZHMuaGFzKGUpKXt2YXIgbz1oLmVuZ2luZU9iamVjdC5zZXRDb21wb25lbnRIaWdobGlnaHQobixpLHQub3B0aW9ucyk7dC5oaWdobGlnaHRTZXQuYWRkT2JqZWN0KGguZW5naW5lT2JqZWN0LG8pfX0sbnVsbCwhMCl9LHQucHJvdG90eXBlLm9iamVjdENyZWF0ZWQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLmhpZ2hsaWdodHMuZm9yRWFjaChmdW5jdGlvbihpKXtlLmxheWVyVmlldy5fZm9yQWxsRmVhdHVyZXNPZk5vZGUoZS5sYXllclZpZXcuX2dldE1ldGFkYXRhKHQpLGZ1bmN0aW9uKGUsaCxuLG8pe2lmKGkuaWRzLmhhcyhlKSl7dmFyIHI9dC5zZXRDb21wb25lbnRIaWdobGlnaHQobyxoLGkub3B0aW9ucyk7aS5oaWdobGlnaHRTZXQuYWRkT2JqZWN0KHQscil9fSwhMCl9KX0sdC5wcm90b3R5cGUub2JqZWN0RGVsZXRlZD1mdW5jdGlvbih0KXt0aGlzLmhpZ2hsaWdodHMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmhpZ2hsaWdodFNldC5yZW1vdmVPYmplY3QodCl9KX0sdC5wcm90b3R5cGUuYWxsT2JqZWN0c0RlbGV0ZWQ9ZnVuY3Rpb24oKXt0aGlzLmhpZ2hsaWdodHMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5oaWdobGlnaHRTZXQucmVtb3ZlQWxsKCl9KX0sdH0oKX0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/arcgis-js-api/views/3d/layers/i3s/Highlights.js\n");

/***/ }),

/***/ "./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SElevationProvider.js":
/*!********************************************************************************!*\
  !*** ./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SElevationProvider.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2018 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.8/esri/copyright.txt for details.\n\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../../core/tsSupport/declareExtendsHelper */ \"./node_modules/arcgis-js-api/core/tsSupport/declareExtendsHelper.js\"),__webpack_require__(/*! ../../../../core/tsSupport/decorateHelper */ \"./node_modules/arcgis-js-api/core/tsSupport/decorateHelper.js\"),__webpack_require__(/*! ../../../../core/Accessor */ \"./node_modules/arcgis-js-api/core/Accessor.js\"),__webpack_require__(/*! ../../../../core/Logger */ \"./node_modules/arcgis-js-api/core/Logger.js\"),__webpack_require__(/*! ../../../../core/accessorSupport/decorators */ \"./node_modules/arcgis-js-api/core/accessorSupport/decorators.js\"),__webpack_require__(/*! ../../../../geometry/support/aaBoundingRect */ \"./node_modules/arcgis-js-api/geometry/support/aaBoundingRect.js\"),__webpack_require__(/*! ../../../../layers/graphics/dehydratedFeatures */ \"./node_modules/arcgis-js-api/layers/graphics/dehydratedFeatures.js\"),__webpack_require__(/*! ../../lib/glMatrix */ \"./node_modules/arcgis-js-api/views/3d/lib/glMatrix.js\"),__webpack_require__(/*! ../../support/Evented */ \"./node_modules/arcgis-js-api/views/3d/support/Evented.js\"),__webpack_require__(/*! ../../webgl-engine/lib/Selector */ \"./node_modules/arcgis-js-api/views/3d/webgl-engine/lib/Selector.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,r,i,o,n,s,a,l,p,c,d){var u=a.empty(),h={spatialReference:null,extent:u},y=p.vec3d.create(),f=p.vec3d.create(),v=p.vec3d.create(),g=n.getLogger(\"esri.views.3d.layers.i3s.I3SElevationProvider\");return function(e){function t(t){return e.call(this)||this}return r(t,e),t.prototype.initialize=function(){this.renderCoordsHelper=this.layerView.view.renderCoordsHelper,this.intersectLayers=[this.stageLayer],this.selector=new d(this.layerView.view.viewingMode);var e=this.layerView.layer.fullExtent;this.zmin=e.zmin,this.zmax=e.zmax},t.prototype.getElevation=function(e){if(l.isPoint(e)){if(!this.renderCoordsHelper.toRenderCoords(e,y))return g.error(\"could not project point for elevation alignment\"),-1/0}else if(!this.renderCoordsHelper.toRenderCoords(e,this.spatialReference,y))return g.error(\"could not project point for elevation alignment\"),-1/0;var t=this.layerView.elevationOffset,r=this.zmin+t,i=this.zmax+t;return p.vec3d.set(y,f),p.vec3d.set(y,v),this.renderCoordsHelper.setAltitude(i,f),this.renderCoordsHelper.setAltitude(r,v),this.selector.init(this.intersectLayers,f,v,null,null,1,!1),this.selector.getMinResult().getIntersectionPoint(y)?this.renderCoordsHelper.getAltitude(y):-1/0},t.prototype.layerChanged=function(){this.spatialReference&&(h.extent=this.computeLayerExtent(this.intersectLayers[0]),h.spatialReference=this.spatialReference,this.emit(\"elevation-change\",h))},t.prototype.objectChanged=function(e){this.spatialReference&&(h.extent=this.computeObjectExtent(e),h.spatialReference=this.spatialReference,this.emit(\"elevation-change\",h))},t.prototype.computeObjectExtent=function(e){return a.empty(u),this.expandExtent(e,u),u},t.prototype.computeLayerExtent=function(e){a.empty(u);for(var t=0,r=e.getObjects();t<r.length;t++){var i=r[t];this.expandExtent(i,u)}return u},t.prototype.expandExtent=function(e,t){for(var r=e.getBBMin(!0),i=e.getBBMax(!0),o=0;o<8;++o)y[0]=1&o?r[0]:i[0],y[1]=2&o?r[1]:i[1],y[2]=4&o?r[2]:i[2],p.mat4d.multiplyVec3(e.objectTransformation,y),this.renderCoordsHelper.fromRenderCoords(y,y,this.spatialReference),a.expand(t,y);return t},i([s.property({constructOnly:!0})],t.prototype,\"layerView\",void 0),i([s.property({constructOnly:!0})],t.prototype,\"stageLayer\",void 0),i([s.property({readOnly:!0,aliasOf:\"layerView.view.elevationProvider.spatialReference\"})],t.prototype,\"spatialReference\",void 0),t=i([s.subclass(\"esri.views.3d.layers.i3s.I3SElevationProvider\")],t)}(s.declared(o,c.Evented))}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYXJjZ2lzLWpzLWFwaS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0VsZXZhdGlvblByb3ZpZGVyLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FyY2dpcy1qcy1hcGkvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NFbGV2YXRpb25Qcm92aWRlci5qcz8yZDEwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENPUFlSSUdIVCDCqSAyMDE4IEVzcmlcbi8vXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkIHVuZGVyIHRoZSBjb3B5cmlnaHQgbGF3cyBvZiB0aGUgVW5pdGVkIFN0YXRlc1xuLy8gYW5kIGFwcGxpY2FibGUgaW50ZXJuYXRpb25hbCBsYXdzLCB0cmVhdGllcywgYW5kIGNvbnZlbnRpb25zLlxuLy9cbi8vIFRoaXMgbWF0ZXJpYWwgaXMgbGljZW5zZWQgZm9yIHVzZSB1bmRlciB0aGUgRXNyaSBNYXN0ZXIgTGljZW5zZVxuLy8gQWdyZWVtZW50IChNTEEpLCBhbmQgaXMgYm91bmQgYnkgdGhlIHRlcm1zIG9mIHRoYXQgYWdyZWVtZW50LlxuLy8gWW91IG1heSByZWRpc3RyaWJ1dGUgYW5kIHVzZSB0aGlzIGNvZGUgd2l0aG91dCBtb2RpZmljYXRpb24sXG4vLyBwcm92aWRlZCB5b3UgYWRoZXJlIHRvIHRoZSB0ZXJtcyBvZiB0aGUgTUxBIGFuZCBpbmNsdWRlIHRoaXNcbi8vIGNvcHlyaWdodCBub3RpY2UuXG4vL1xuLy8gU2VlIHVzZSByZXN0cmljdGlvbnMgYXQgaHR0cDovL3d3dy5lc3JpLmNvbS9sZWdhbC9wZGZzL21sYV9lMjA0X2UzMDAvZW5nbGlzaFxuLy9cbi8vIEZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLCBjb250YWN0OlxuLy8gRW52aXJvbm1lbnRhbCBTeXN0ZW1zIFJlc2VhcmNoIEluc3RpdHV0ZSwgSW5jLlxuLy8gQXR0bjogQ29udHJhY3RzIGFuZCBMZWdhbCBTZXJ2aWNlcyBEZXBhcnRtZW50XG4vLyAzODAgTmV3IFlvcmsgU3RyZWV0XG4vLyBSZWRsYW5kcywgQ2FsaWZvcm5pYSwgVVNBIDkyMzczXG4vLyBVU0Fcbi8vXG4vLyBlbWFpbDogY29udHJhY3RzQGVzcmkuY29tXG4vL1xuLy8gU2VlIGh0dHA6Ly9qcy5hcmNnaXMuY29tLzQuOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG5cbmRlZmluZShbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCIuLi8uLi8uLi8uLi9jb3JlL3RzU3VwcG9ydC9kZWNsYXJlRXh0ZW5kc0hlbHBlclwiLFwiLi4vLi4vLi4vLi4vY29yZS90c1N1cHBvcnQvZGVjb3JhdGVIZWxwZXJcIixcIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3JcIixcIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyXCIsXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzXCIsXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0XCIsXCIuLi8uLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvZGVoeWRyYXRlZEZlYXR1cmVzXCIsXCIuLi8uLi9saWIvZ2xNYXRyaXhcIixcIi4uLy4uL3N1cHBvcnQvRXZlbnRlZFwiLFwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9TZWxlY3RvclwiXSxmdW5jdGlvbihlLHQscixpLG8sbixzLGEsbCxwLGMsZCl7dmFyIHU9YS5lbXB0eSgpLGg9e3NwYXRpYWxSZWZlcmVuY2U6bnVsbCxleHRlbnQ6dX0seT1wLnZlYzNkLmNyZWF0ZSgpLGY9cC52ZWMzZC5jcmVhdGUoKSx2PXAudmVjM2QuY3JlYXRlKCksZz1uLmdldExvZ2dlcihcImVzcmkudmlld3MuM2QubGF5ZXJzLmkzcy5JM1NFbGV2YXRpb25Qcm92aWRlclwiKTtyZXR1cm4gZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXtyZXR1cm4gZS5jYWxsKHRoaXMpfHx0aGlzfXJldHVybiByKHQsZSksdC5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbigpe3RoaXMucmVuZGVyQ29vcmRzSGVscGVyPXRoaXMubGF5ZXJWaWV3LnZpZXcucmVuZGVyQ29vcmRzSGVscGVyLHRoaXMuaW50ZXJzZWN0TGF5ZXJzPVt0aGlzLnN0YWdlTGF5ZXJdLHRoaXMuc2VsZWN0b3I9bmV3IGQodGhpcy5sYXllclZpZXcudmlldy52aWV3aW5nTW9kZSk7dmFyIGU9dGhpcy5sYXllclZpZXcubGF5ZXIuZnVsbEV4dGVudDt0aGlzLnptaW49ZS56bWluLHRoaXMuem1heD1lLnptYXh9LHQucHJvdG90eXBlLmdldEVsZXZhdGlvbj1mdW5jdGlvbihlKXtpZihsLmlzUG9pbnQoZSkpe2lmKCF0aGlzLnJlbmRlckNvb3Jkc0hlbHBlci50b1JlbmRlckNvb3JkcyhlLHkpKXJldHVybiBnLmVycm9yKFwiY291bGQgbm90IHByb2plY3QgcG9pbnQgZm9yIGVsZXZhdGlvbiBhbGlnbm1lbnRcIiksLTEvMH1lbHNlIGlmKCF0aGlzLnJlbmRlckNvb3Jkc0hlbHBlci50b1JlbmRlckNvb3JkcyhlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSx5KSlyZXR1cm4gZy5lcnJvcihcImNvdWxkIG5vdCBwcm9qZWN0IHBvaW50IGZvciBlbGV2YXRpb24gYWxpZ25tZW50XCIpLC0xLzA7dmFyIHQ9dGhpcy5sYXllclZpZXcuZWxldmF0aW9uT2Zmc2V0LHI9dGhpcy56bWluK3QsaT10aGlzLnptYXgrdDtyZXR1cm4gcC52ZWMzZC5zZXQoeSxmKSxwLnZlYzNkLnNldCh5LHYpLHRoaXMucmVuZGVyQ29vcmRzSGVscGVyLnNldEFsdGl0dWRlKGksZiksdGhpcy5yZW5kZXJDb29yZHNIZWxwZXIuc2V0QWx0aXR1ZGUocix2KSx0aGlzLnNlbGVjdG9yLmluaXQodGhpcy5pbnRlcnNlY3RMYXllcnMsZix2LG51bGwsbnVsbCwxLCExKSx0aGlzLnNlbGVjdG9yLmdldE1pblJlc3VsdCgpLmdldEludGVyc2VjdGlvblBvaW50KHkpP3RoaXMucmVuZGVyQ29vcmRzSGVscGVyLmdldEFsdGl0dWRlKHkpOi0xLzB9LHQucHJvdG90eXBlLmxheWVyQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuc3BhdGlhbFJlZmVyZW5jZSYmKGguZXh0ZW50PXRoaXMuY29tcHV0ZUxheWVyRXh0ZW50KHRoaXMuaW50ZXJzZWN0TGF5ZXJzWzBdKSxoLnNwYXRpYWxSZWZlcmVuY2U9dGhpcy5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuZW1pdChcImVsZXZhdGlvbi1jaGFuZ2VcIixoKSl9LHQucHJvdG90eXBlLm9iamVjdENoYW5nZWQ9ZnVuY3Rpb24oZSl7dGhpcy5zcGF0aWFsUmVmZXJlbmNlJiYoaC5leHRlbnQ9dGhpcy5jb21wdXRlT2JqZWN0RXh0ZW50KGUpLGguc3BhdGlhbFJlZmVyZW5jZT10aGlzLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5lbWl0KFwiZWxldmF0aW9uLWNoYW5nZVwiLGgpKX0sdC5wcm90b3R5cGUuY29tcHV0ZU9iamVjdEV4dGVudD1mdW5jdGlvbihlKXtyZXR1cm4gYS5lbXB0eSh1KSx0aGlzLmV4cGFuZEV4dGVudChlLHUpLHV9LHQucHJvdG90eXBlLmNvbXB1dGVMYXllckV4dGVudD1mdW5jdGlvbihlKXthLmVtcHR5KHUpO2Zvcih2YXIgdD0wLHI9ZS5nZXRPYmplY3RzKCk7dDxyLmxlbmd0aDt0Kyspe3ZhciBpPXJbdF07dGhpcy5leHBhbmRFeHRlbnQoaSx1KX1yZXR1cm4gdX0sdC5wcm90b3R5cGUuZXhwYW5kRXh0ZW50PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWUuZ2V0QkJNaW4oITApLGk9ZS5nZXRCQk1heCghMCksbz0wO288ODsrK28peVswXT0xJm8/clswXTppWzBdLHlbMV09MiZvP3JbMV06aVsxXSx5WzJdPTQmbz9yWzJdOmlbMl0scC5tYXQ0ZC5tdWx0aXBseVZlYzMoZS5vYmplY3RUcmFuc2Zvcm1hdGlvbix5KSx0aGlzLnJlbmRlckNvb3Jkc0hlbHBlci5mcm9tUmVuZGVyQ29vcmRzKHkseSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpLGEuZXhwYW5kKHQseSk7cmV0dXJuIHR9LGkoW3MucHJvcGVydHkoe2NvbnN0cnVjdE9ubHk6ITB9KV0sdC5wcm90b3R5cGUsXCJsYXllclZpZXdcIix2b2lkIDApLGkoW3MucHJvcGVydHkoe2NvbnN0cnVjdE9ubHk6ITB9KV0sdC5wcm90b3R5cGUsXCJzdGFnZUxheWVyXCIsdm9pZCAwKSxpKFtzLnByb3BlcnR5KHtyZWFkT25seTohMCxhbGlhc09mOlwibGF5ZXJWaWV3LnZpZXcuZWxldmF0aW9uUHJvdmlkZXIuc3BhdGlhbFJlZmVyZW5jZVwifSldLHQucHJvdG90eXBlLFwic3BhdGlhbFJlZmVyZW5jZVwiLHZvaWQgMCksdD1pKFtzLnN1YmNsYXNzKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuaTNzLkkzU0VsZXZhdGlvblByb3ZpZGVyXCIpXSx0KX0ocy5kZWNsYXJlZChvLGMuRXZlbnRlZCkpfSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SElevationProvider.js\n");

/***/ }),

/***/ "./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SQueryEngine.js":
/*!**************************************************************************!*\
  !*** ./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SQueryEngine.js ***!
  \**************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2018 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.8/esri/copyright.txt for details.\n\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! dojo/promise/all */ \"./node_modules/dojo/promise/all.js\"),__webpack_require__(/*! ../../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\"),__webpack_require__(/*! ../../../../layers/graphics/dehydratedFeatures */ \"./node_modules/arcgis-js-api/layers/graphics/dehydratedFeatures.js\"),__webpack_require__(/*! ../../../../tasks/support/FeatureSet */ \"./node_modules/arcgis-js-api/tasks/support/FeatureSet.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t,e,r,n,u,o,i){return function(){function t(t,e,r){this._layer=t,this._support=e,this._options=r}return t.prototype.queryExtent=function(t){var e=this;return this._rejectUnsupported(t).then(function(){var r=0,n=e._support.createExtentBuilder();return e._forAllQueried(t,function(t){r++,n.add(t)}),{count:r,extent:0===r?null:n.getExtent()}})},t.prototype.queryFeatureCount=function(t){var e=this;return this._rejectUnsupported(t).then(function(){var r=0;return e._forAllQueried(t,function(){return r++}),r})},t.prototype.queryFeatures=function(t){var e=this;return this._rejectUnsupported(t).then(function(){var o=[],i=t&&t.outFields,s=[];return e._forAllQueried(t,function(t){return s.push(e._support.createGraphic(t))},function(t){i&&(o.push(e._support.requestFields(t,s,i)),s=[])})>0&&!t.num?u.reject(new n(\"Unsupported Query\",\"Large feature query, use Query.num and Query.start to batch\")):(i||o.push(u.resolve(s)),r(o))}).then(function(t){for(var r=[],n=0;n<t.length;++n)for(var u=t[n],s=0;s<u.length;++s)r.push(o.hydrateGraphic(u[s],e._layer));var a=new i;return a.features=r,a})},t.prototype.queryObjectIds=function(t){var e=this;return this._rejectUnsupported(t).then(function(){var r=[];return e._forAllQueried(t,function(t){return r.push(t.id)}),r})},t.defaultExtentBuilder=function(t){var e=null;return{add:function(r){var n=t(r);n&&(e=null!=e?e.union(n):n.clone())},getExtent:function(){return e}}},t.prototype._forAllQueried=function(t,e,r){var n=[];if(t&&t.objectIds){var u=t.objectIds;n.push(function(t){return u.indexOf(t.id)>=0})}var o=t&&t.start||0,i=t&&t.num||1e4;return n.push(function(){return i<=0?(--i,!1):o>0?(--o,!1):(--i,!0)}),this._support.forAll(function(t){for(var r=0,u=n;r<u.length;r++){if(!(0,u[r])(t))return}e(t)},r),Math.max(0,-i)},t.prototype._rejectUnsupported=function(t){if(null==t)return u.resolve();var e=function(t){return u.reject(new n(\"Unsupported Query\",\"Unsupported property '\"+t+\"'\"))};return null!=t.distance?e(\"distance\"):null!=t.geometryPrecision?e(\"geometryPrecision\"):t.groupByFieldsForStatistics&&t.groupByFieldsForStatistics.length?e(\"groupByFieldsForStatistics\"):null!=t.maxAllowableOffset?e(\"maxAllowableOffset\"):t.multipatchOption?e(\"multipatchOption\"):t.orderByFields&&t.orderByFields.length?e(\"orderByFields\"):t.outSpatialReference?e(\"outSpatialReference\"):t.outStatistics&&t.outStatistics.length?e(\"outStatistics\"):t.pixelSize?e(\"pixelSize\"):t.quantizationParameters?e(\"quantizationParameters\"):t.relationParameter?e(\"relationParameter\"):t.returnDistinctValues?e(\"returnDistinctValues\"):t.text?e(\"text\"):t.timeExtent?e(\"timeExtent\"):t.where?e(\"where\"):t.geometry?e(\"geometry\"):!this._options.enableOutFields&&t.outFields&&t.outFields.length?e(\"outFields\"):!this._options.enableObjectId&&t.objectIds&&t.objectIds.length?e(\"objectIds\"):u.resolve()},t}()}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYXJjZ2lzLWpzLWFwaS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU1F1ZXJ5RW5naW5lLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FyY2dpcy1qcy1hcGkvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NRdWVyeUVuZ2luZS5qcz9lMjM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENPUFlSSUdIVCDCqSAyMDE4IEVzcmlcbi8vXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkIHVuZGVyIHRoZSBjb3B5cmlnaHQgbGF3cyBvZiB0aGUgVW5pdGVkIFN0YXRlc1xuLy8gYW5kIGFwcGxpY2FibGUgaW50ZXJuYXRpb25hbCBsYXdzLCB0cmVhdGllcywgYW5kIGNvbnZlbnRpb25zLlxuLy9cbi8vIFRoaXMgbWF0ZXJpYWwgaXMgbGljZW5zZWQgZm9yIHVzZSB1bmRlciB0aGUgRXNyaSBNYXN0ZXIgTGljZW5zZVxuLy8gQWdyZWVtZW50IChNTEEpLCBhbmQgaXMgYm91bmQgYnkgdGhlIHRlcm1zIG9mIHRoYXQgYWdyZWVtZW50LlxuLy8gWW91IG1heSByZWRpc3RyaWJ1dGUgYW5kIHVzZSB0aGlzIGNvZGUgd2l0aG91dCBtb2RpZmljYXRpb24sXG4vLyBwcm92aWRlZCB5b3UgYWRoZXJlIHRvIHRoZSB0ZXJtcyBvZiB0aGUgTUxBIGFuZCBpbmNsdWRlIHRoaXNcbi8vIGNvcHlyaWdodCBub3RpY2UuXG4vL1xuLy8gU2VlIHVzZSByZXN0cmljdGlvbnMgYXQgaHR0cDovL3d3dy5lc3JpLmNvbS9sZWdhbC9wZGZzL21sYV9lMjA0X2UzMDAvZW5nbGlzaFxuLy9cbi8vIEZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLCBjb250YWN0OlxuLy8gRW52aXJvbm1lbnRhbCBTeXN0ZW1zIFJlc2VhcmNoIEluc3RpdHV0ZSwgSW5jLlxuLy8gQXR0bjogQ29udHJhY3RzIGFuZCBMZWdhbCBTZXJ2aWNlcyBEZXBhcnRtZW50XG4vLyAzODAgTmV3IFlvcmsgU3RyZWV0XG4vLyBSZWRsYW5kcywgQ2FsaWZvcm5pYSwgVVNBIDkyMzczXG4vLyBVU0Fcbi8vXG4vLyBlbWFpbDogY29udHJhY3RzQGVzcmkuY29tXG4vL1xuLy8gU2VlIGh0dHA6Ly9qcy5hcmNnaXMuY29tLzQuOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG5cbmRlZmluZShbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCJkb2pvL3Byb21pc2UvYWxsXCIsXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yXCIsXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlsc1wiLFwiLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RlaHlkcmF0ZWRGZWF0dXJlc1wiLFwiLi4vLi4vLi4vLi4vdGFza3Mvc3VwcG9ydC9GZWF0dXJlU2V0XCJdLGZ1bmN0aW9uKHQsZSxyLG4sdSxvLGkpe3JldHVybiBmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLHIpe3RoaXMuX2xheWVyPXQsdGhpcy5fc3VwcG9ydD1lLHRoaXMuX29wdGlvbnM9cn1yZXR1cm4gdC5wcm90b3R5cGUucXVlcnlFeHRlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fcmVqZWN0VW5zdXBwb3J0ZWQodCkudGhlbihmdW5jdGlvbigpe3ZhciByPTAsbj1lLl9zdXBwb3J0LmNyZWF0ZUV4dGVudEJ1aWxkZXIoKTtyZXR1cm4gZS5fZm9yQWxsUXVlcmllZCh0LGZ1bmN0aW9uKHQpe3IrKyxuLmFkZCh0KX0pLHtjb3VudDpyLGV4dGVudDowPT09cj9udWxsOm4uZ2V0RXh0ZW50KCl9fSl9LHQucHJvdG90eXBlLnF1ZXJ5RmVhdHVyZUNvdW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3JlamVjdFVuc3VwcG9ydGVkKHQpLnRoZW4oZnVuY3Rpb24oKXt2YXIgcj0wO3JldHVybiBlLl9mb3JBbGxRdWVyaWVkKHQsZnVuY3Rpb24oKXtyZXR1cm4gcisrfSkscn0pfSx0LnByb3RvdHlwZS5xdWVyeUZlYXR1cmVzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3JlamVjdFVuc3VwcG9ydGVkKHQpLnRoZW4oZnVuY3Rpb24oKXt2YXIgbz1bXSxpPXQmJnQub3V0RmllbGRzLHM9W107cmV0dXJuIGUuX2ZvckFsbFF1ZXJpZWQodCxmdW5jdGlvbih0KXtyZXR1cm4gcy5wdXNoKGUuX3N1cHBvcnQuY3JlYXRlR3JhcGhpYyh0KSl9LGZ1bmN0aW9uKHQpe2kmJihvLnB1c2goZS5fc3VwcG9ydC5yZXF1ZXN0RmllbGRzKHQscyxpKSkscz1bXSl9KT4wJiYhdC5udW0/dS5yZWplY3QobmV3IG4oXCJVbnN1cHBvcnRlZCBRdWVyeVwiLFwiTGFyZ2UgZmVhdHVyZSBxdWVyeSwgdXNlIFF1ZXJ5Lm51bSBhbmQgUXVlcnkuc3RhcnQgdG8gYmF0Y2hcIikpOihpfHxvLnB1c2godS5yZXNvbHZlKHMpKSxyKG8pKX0pLnRoZW4oZnVuY3Rpb24odCl7Zm9yKHZhciByPVtdLG49MDtuPHQubGVuZ3RoOysrbilmb3IodmFyIHU9dFtuXSxzPTA7czx1Lmxlbmd0aDsrK3Mpci5wdXNoKG8uaHlkcmF0ZUdyYXBoaWModVtzXSxlLl9sYXllcikpO3ZhciBhPW5ldyBpO3JldHVybiBhLmZlYXR1cmVzPXIsYX0pfSx0LnByb3RvdHlwZS5xdWVyeU9iamVjdElkcz1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9yZWplY3RVbnN1cHBvcnRlZCh0KS50aGVuKGZ1bmN0aW9uKCl7dmFyIHI9W107cmV0dXJuIGUuX2ZvckFsbFF1ZXJpZWQodCxmdW5jdGlvbih0KXtyZXR1cm4gci5wdXNoKHQuaWQpfSkscn0pfSx0LmRlZmF1bHRFeHRlbnRCdWlsZGVyPWZ1bmN0aW9uKHQpe3ZhciBlPW51bGw7cmV0dXJue2FkZDpmdW5jdGlvbihyKXt2YXIgbj10KHIpO24mJihlPW51bGwhPWU/ZS51bmlvbihuKTpuLmNsb25lKCkpfSxnZXRFeHRlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZX19fSx0LnByb3RvdHlwZS5fZm9yQWxsUXVlcmllZD1mdW5jdGlvbih0LGUscil7dmFyIG49W107aWYodCYmdC5vYmplY3RJZHMpe3ZhciB1PXQub2JqZWN0SWRzO24ucHVzaChmdW5jdGlvbih0KXtyZXR1cm4gdS5pbmRleE9mKHQuaWQpPj0wfSl9dmFyIG89dCYmdC5zdGFydHx8MCxpPXQmJnQubnVtfHwxZTQ7cmV0dXJuIG4ucHVzaChmdW5jdGlvbigpe3JldHVybiBpPD0wPygtLWksITEpOm8+MD8oLS1vLCExKTooLS1pLCEwKX0pLHRoaXMuX3N1cHBvcnQuZm9yQWxsKGZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0wLHU9bjtyPHUubGVuZ3RoO3IrKyl7aWYoISgwLHVbcl0pKHQpKXJldHVybn1lKHQpfSxyKSxNYXRoLm1heCgwLC1pKX0sdC5wcm90b3R5cGUuX3JlamVjdFVuc3VwcG9ydGVkPWZ1bmN0aW9uKHQpe2lmKG51bGw9PXQpcmV0dXJuIHUucmVzb2x2ZSgpO3ZhciBlPWZ1bmN0aW9uKHQpe3JldHVybiB1LnJlamVjdChuZXcgbihcIlVuc3VwcG9ydGVkIFF1ZXJ5XCIsXCJVbnN1cHBvcnRlZCBwcm9wZXJ0eSAnXCIrdCtcIidcIikpfTtyZXR1cm4gbnVsbCE9dC5kaXN0YW5jZT9lKFwiZGlzdGFuY2VcIik6bnVsbCE9dC5nZW9tZXRyeVByZWNpc2lvbj9lKFwiZ2VvbWV0cnlQcmVjaXNpb25cIik6dC5ncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljcyYmdC5ncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljcy5sZW5ndGg/ZShcImdyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzXCIpOm51bGwhPXQubWF4QWxsb3dhYmxlT2Zmc2V0P2UoXCJtYXhBbGxvd2FibGVPZmZzZXRcIik6dC5tdWx0aXBhdGNoT3B0aW9uP2UoXCJtdWx0aXBhdGNoT3B0aW9uXCIpOnQub3JkZXJCeUZpZWxkcyYmdC5vcmRlckJ5RmllbGRzLmxlbmd0aD9lKFwib3JkZXJCeUZpZWxkc1wiKTp0Lm91dFNwYXRpYWxSZWZlcmVuY2U/ZShcIm91dFNwYXRpYWxSZWZlcmVuY2VcIik6dC5vdXRTdGF0aXN0aWNzJiZ0Lm91dFN0YXRpc3RpY3MubGVuZ3RoP2UoXCJvdXRTdGF0aXN0aWNzXCIpOnQucGl4ZWxTaXplP2UoXCJwaXhlbFNpemVcIik6dC5xdWFudGl6YXRpb25QYXJhbWV0ZXJzP2UoXCJxdWFudGl6YXRpb25QYXJhbWV0ZXJzXCIpOnQucmVsYXRpb25QYXJhbWV0ZXI/ZShcInJlbGF0aW9uUGFyYW1ldGVyXCIpOnQucmV0dXJuRGlzdGluY3RWYWx1ZXM/ZShcInJldHVybkRpc3RpbmN0VmFsdWVzXCIpOnQudGV4dD9lKFwidGV4dFwiKTp0LnRpbWVFeHRlbnQ/ZShcInRpbWVFeHRlbnRcIik6dC53aGVyZT9lKFwid2hlcmVcIik6dC5nZW9tZXRyeT9lKFwiZ2VvbWV0cnlcIik6IXRoaXMuX29wdGlvbnMuZW5hYmxlT3V0RmllbGRzJiZ0Lm91dEZpZWxkcyYmdC5vdXRGaWVsZHMubGVuZ3RoP2UoXCJvdXRGaWVsZHNcIik6IXRoaXMuX29wdGlvbnMuZW5hYmxlT2JqZWN0SWQmJnQub2JqZWN0SWRzJiZ0Lm9iamVjdElkcy5sZW5ndGg/ZShcIm9iamVjdElkc1wiKTp1LnJlc29sdmUoKX0sdH0oKX0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/arcgis-js-api/views/3d/layers/i3s/I3SQueryEngine.js\n");

/***/ }),

/***/ "./node_modules/arcgis-js-api/views/3d/layers/i3s/IDBCache.js":
/*!********************************************************************!*\
  !*** ./node_modules/arcgis-js-api/views/3d/layers/i3s/IDBCache.js ***!
  \********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// COPYRIGHT Â© 2018 Esri\n//\n// All rights reserved under the copyright laws of the United States\n// and applicable international laws, treaties, and conventions.\n//\n// This material is licensed for use under the Esri Master License\n// Agreement (MLA), and is bound by the terms of that agreement.\n// You may redistribute and use this code without modification,\n// provided you adhere to the terms of the MLA and include this\n// copyright notice.\n//\n// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english\n//\n// For additional information, contact:\n// Environmental Systems Research Institute, Inc.\n// Attn: Contracts and Legal Services Department\n// 380 New York Street\n// Redlands, California, USA 92373\n// USA\n//\n// email: contracts@esri.com\n//\n// See http://js.arcgis.com/4.8/esri/copyright.txt for details.\n\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__.dj.c(module.i),exports,__webpack_require__(/*! ../../../../core/Error */ \"./node_modules/arcgis-js-api/core/Error.js\"),__webpack_require__(/*! ../../../../core/promiseUtils */ \"./node_modules/arcgis-js-api/core/promiseUtils.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e,t,n,r){function o(e){return r.create(function(t,n){e.oncomplete=function(){return t()},e.onerror=function(){return n(e.error)},e.onabort=function(){return n(e.error)}})}function i(e){return r.create(function(t,n){\"done\"===e.readyState?null!=e.error?n(e.error):t(e.result):(e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error)})})}Object.defineProperty(t,\"__esModule\",{value:!0});var s=function(){function e(e,t,n){this._db=null,this._quotaReductionPromise=null,this._gcCounter=0,this._hit=0,this._miss=0,this._destroyed=!1,this.gcFrequency=50,this.maxByteSize=1073741824,this.quotaReductionFactor=.2,this._dbName=e,this._storeName=t,this._version=n}return e.prototype.init=function(){var e=this;return r.resolve().then(function(){var t=indexedDB.open(e._dbName,e._version);return t.onupgradeneeded=function(n){var r=t.result,o=t.transaction,i=r.objectStoreNames.contains(e._storeName)?o.objectStore(e._storeName):r.createObjectStore(e._storeName),s=r.objectStoreNames.contains(\"last_access\")?o.objectStore(\"last_access\"):r.createObjectStore(\"last_access\");s.indexNames.contains(\"date\")||s.createIndex(\"date\",\"date\",{unique:!1}),s.indexNames.contains(\"byteSize\")||s.createIndex(\"byteSize\",\"byteSize\",{unique:!1}),n.oldVersion<e._version&&(i.clear(),s.clear())},i(t)}).then(function(t){e._destroyed?t.close():e._db=t})},e.prototype.destroy=function(){this._db&&(this._db.close(),this._db=null),this._destroyed=!0},e.prototype.getHitRate=function(){return this._hit/(this._hit+this._miss)},e.prototype.put=function(e,t){var o=this;return null==this._db?r.reject(new n(\"indexedb:not-initialized\",\"IndexedDB Cache is not initialized\")):(null!=this._quotaReductionPromise?this._quotaReductionPromise:r.resolve()).then(function(){return o._put(e,t)}).catch(function(n){if(\"QuotaExceededError\"===n.name)return null==o._quotaReductionPromise&&(o._quotaReductionPromise=o._getCacheSize().then(function(e){return o._removeLeastRecentlyAccessed(t.byteSize+Math.ceil(e*o.quotaReductionFactor))}),o._quotaReductionPromise.always(function(){o._quotaReductionPromise=null})),o._quotaReductionPromise.then(function(){return o._put(e,t)});throw n}).then(function(){--o._gcCounter<0&&(o._gcCounter=o.gcFrequency,o._getCacheSize().then(function(e){return o._removeLeastRecentlyAccessed(e-o.maxByteSize)}))})},e.prototype.get=function(e){var t=this;return null==this._db?r.resolve(null):r.resolve().then(function(){return i(t._db.transaction(t._storeName,\"readonly\").objectStore(t._storeName).get(e))}).then(function(n){if(null==n)++t._miss;else{++t._hit;t._db.transaction(\"last_access\",\"readwrite\").objectStore(\"last_access\").put({date:(new Date).getTime(),byteSize:n.byteSize},e)}return n}).catch(function(e){return++t._miss,null})},e.prototype.remove=function(e){var t=this;return null==this._db?r.resolve():r.resolve().then(function(){var n=t._db.transaction([t._storeName,\"last_access\"],\"readwrite\"),r=n.objectStore(t._storeName),i=n.objectStore(\"last_access\");return r.delete(e),i.delete(e),o(n)})},e.prototype._put=function(e,t){var n=this._db.transaction([this._storeName,\"last_access\"],\"readwrite\");return n.objectStore(this._storeName).put(t,e),n.objectStore(\"last_access\").put({date:(new Date).getTime(),byteSize:t.byteSize},e),o(n)},e.prototype._removeLeastRecentlyAccessed=function(e){if(!(e<=0)){var t=this._db.transaction([this._storeName,\"last_access\"],\"readwrite\"),n=t.objectStore(this._storeName),r=t.objectStore(\"last_access\"),i=0,s=r.index(\"date\").openCursor(null,\"next\");return s.onsuccess=function(t){var o=s.result;null!=o&&(null!=o.value.byteSize&&(i+=o.value.byteSize),n.delete(o.primaryKey),r.delete(o.primaryKey),i<e&&o.continue())},o(t)}},e.prototype._getCacheSize=function(){var e=this._db.transaction(\"last_access\"),t=e.objectStore(\"last_access\"),n=0,r=t.index(\"byteSize\").openKeyCursor();return r.onsuccess=function(e){var t=r.result;if(t){var o=t.key;null!=o&&(n+=o),t.continue()}},o(e).then(function(){return n})},e}();t.IDBCache=s,t.whenTransaction=o,t.whenRequest=i}).apply(null, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYXJjZ2lzLWpzLWFwaS92aWV3cy8zZC9sYXllcnMvaTNzL0lEQkNhY2hlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2FyY2dpcy1qcy1hcGkvdmlld3MvM2QvbGF5ZXJzL2kzcy9JREJDYWNoZS5qcz9iOGQ3Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENPUFlSSUdIVCDCqSAyMDE4IEVzcmlcbi8vXG4vLyBBbGwgcmlnaHRzIHJlc2VydmVkIHVuZGVyIHRoZSBjb3B5cmlnaHQgbGF3cyBvZiB0aGUgVW5pdGVkIFN0YXRlc1xuLy8gYW5kIGFwcGxpY2FibGUgaW50ZXJuYXRpb25hbCBsYXdzLCB0cmVhdGllcywgYW5kIGNvbnZlbnRpb25zLlxuLy9cbi8vIFRoaXMgbWF0ZXJpYWwgaXMgbGljZW5zZWQgZm9yIHVzZSB1bmRlciB0aGUgRXNyaSBNYXN0ZXIgTGljZW5zZVxuLy8gQWdyZWVtZW50IChNTEEpLCBhbmQgaXMgYm91bmQgYnkgdGhlIHRlcm1zIG9mIHRoYXQgYWdyZWVtZW50LlxuLy8gWW91IG1heSByZWRpc3RyaWJ1dGUgYW5kIHVzZSB0aGlzIGNvZGUgd2l0aG91dCBtb2RpZmljYXRpb24sXG4vLyBwcm92aWRlZCB5b3UgYWRoZXJlIHRvIHRoZSB0ZXJtcyBvZiB0aGUgTUxBIGFuZCBpbmNsdWRlIHRoaXNcbi8vIGNvcHlyaWdodCBub3RpY2UuXG4vL1xuLy8gU2VlIHVzZSByZXN0cmljdGlvbnMgYXQgaHR0cDovL3d3dy5lc3JpLmNvbS9sZWdhbC9wZGZzL21sYV9lMjA0X2UzMDAvZW5nbGlzaFxuLy9cbi8vIEZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uLCBjb250YWN0OlxuLy8gRW52aXJvbm1lbnRhbCBTeXN0ZW1zIFJlc2VhcmNoIEluc3RpdHV0ZSwgSW5jLlxuLy8gQXR0bjogQ29udHJhY3RzIGFuZCBMZWdhbCBTZXJ2aWNlcyBEZXBhcnRtZW50XG4vLyAzODAgTmV3IFlvcmsgU3RyZWV0XG4vLyBSZWRsYW5kcywgQ2FsaWZvcm5pYSwgVVNBIDkyMzczXG4vLyBVU0Fcbi8vXG4vLyBlbWFpbDogY29udHJhY3RzQGVzcmkuY29tXG4vL1xuLy8gU2VlIGh0dHA6Ly9qcy5hcmNnaXMuY29tLzQuOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG5cbmRlZmluZShbXCJyZXF1aXJlXCIsXCJleHBvcnRzXCIsXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yXCIsXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlsc1wiXSxmdW5jdGlvbihlLHQsbixyKXtmdW5jdGlvbiBvKGUpe3JldHVybiByLmNyZWF0ZShmdW5jdGlvbih0LG4pe2Uub25jb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0KCl9LGUub25lcnJvcj1mdW5jdGlvbigpe3JldHVybiBuKGUuZXJyb3IpfSxlLm9uYWJvcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbihlLmVycm9yKX19KX1mdW5jdGlvbiBpKGUpe3JldHVybiByLmNyZWF0ZShmdW5jdGlvbih0LG4pe1wiZG9uZVwiPT09ZS5yZWFkeVN0YXRlP251bGwhPWUuZXJyb3I/bihlLmVycm9yKTp0KGUucmVzdWx0KTooZS5vbnN1Y2Nlc3M9ZnVuY3Rpb24oKXtyZXR1cm4gdChlLnJlc3VsdCl9LGUub25lcnJvcj1mdW5jdGlvbigpe3JldHVybiBuKGUuZXJyb3IpfSl9KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LG4pe3RoaXMuX2RiPW51bGwsdGhpcy5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlPW51bGwsdGhpcy5fZ2NDb3VudGVyPTAsdGhpcy5faGl0PTAsdGhpcy5fbWlzcz0wLHRoaXMuX2Rlc3Ryb3llZD0hMSx0aGlzLmdjRnJlcXVlbmN5PTUwLHRoaXMubWF4Qnl0ZVNpemU9MTA3Mzc0MTgyNCx0aGlzLnF1b3RhUmVkdWN0aW9uRmFjdG9yPS4yLHRoaXMuX2RiTmFtZT1lLHRoaXMuX3N0b3JlTmFtZT10LHRoaXMuX3ZlcnNpb249bn1yZXR1cm4gZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHIucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24oKXt2YXIgdD1pbmRleGVkREIub3BlbihlLl9kYk5hbWUsZS5fdmVyc2lvbik7cmV0dXJuIHQub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uKG4pe3ZhciByPXQucmVzdWx0LG89dC50cmFuc2FjdGlvbixpPXIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhlLl9zdG9yZU5hbWUpP28ub2JqZWN0U3RvcmUoZS5fc3RvcmVOYW1lKTpyLmNyZWF0ZU9iamVjdFN0b3JlKGUuX3N0b3JlTmFtZSkscz1yLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJsYXN0X2FjY2Vzc1wiKT9vLm9iamVjdFN0b3JlKFwibGFzdF9hY2Nlc3NcIik6ci5jcmVhdGVPYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpO3MuaW5kZXhOYW1lcy5jb250YWlucyhcImRhdGVcIil8fHMuY3JlYXRlSW5kZXgoXCJkYXRlXCIsXCJkYXRlXCIse3VuaXF1ZTohMX0pLHMuaW5kZXhOYW1lcy5jb250YWlucyhcImJ5dGVTaXplXCIpfHxzLmNyZWF0ZUluZGV4KFwiYnl0ZVNpemVcIixcImJ5dGVTaXplXCIse3VuaXF1ZTohMX0pLG4ub2xkVmVyc2lvbjxlLl92ZXJzaW9uJiYoaS5jbGVhcigpLHMuY2xlYXIoKSl9LGkodCl9KS50aGVuKGZ1bmN0aW9uKHQpe2UuX2Rlc3Ryb3llZD90LmNsb3NlKCk6ZS5fZGI9dH0pfSxlLnByb3RvdHlwZS5kZXN0cm95PWZ1bmN0aW9uKCl7dGhpcy5fZGImJih0aGlzLl9kYi5jbG9zZSgpLHRoaXMuX2RiPW51bGwpLHRoaXMuX2Rlc3Ryb3llZD0hMH0sZS5wcm90b3R5cGUuZ2V0SGl0UmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9oaXQvKHRoaXMuX2hpdCt0aGlzLl9taXNzKX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUsdCl7dmFyIG89dGhpcztyZXR1cm4gbnVsbD09dGhpcy5fZGI/ci5yZWplY3QobmV3IG4oXCJpbmRleGVkYjpub3QtaW5pdGlhbGl6ZWRcIixcIkluZGV4ZWREQiBDYWNoZSBpcyBub3QgaW5pdGlhbGl6ZWRcIikpOihudWxsIT10aGlzLl9xdW90YVJlZHVjdGlvblByb21pc2U/dGhpcy5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlOnIucmVzb2x2ZSgpKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3B1dChlLHQpfSkuY2F0Y2goZnVuY3Rpb24obil7aWYoXCJRdW90YUV4Y2VlZGVkRXJyb3JcIj09PW4ubmFtZSlyZXR1cm4gbnVsbD09by5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlJiYoby5fcXVvdGFSZWR1Y3Rpb25Qcm9taXNlPW8uX2dldENhY2hlU2l6ZSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG8uX3JlbW92ZUxlYXN0UmVjZW50bHlBY2Nlc3NlZCh0LmJ5dGVTaXplK01hdGguY2VpbChlKm8ucXVvdGFSZWR1Y3Rpb25GYWN0b3IpKX0pLG8uX3F1b3RhUmVkdWN0aW9uUHJvbWlzZS5hbHdheXMoZnVuY3Rpb24oKXtvLl9xdW90YVJlZHVjdGlvblByb21pc2U9bnVsbH0pKSxvLl9xdW90YVJlZHVjdGlvblByb21pc2UudGhlbihmdW5jdGlvbigpe3JldHVybiBvLl9wdXQoZSx0KX0pO3Rocm93IG59KS50aGVuKGZ1bmN0aW9uKCl7LS1vLl9nY0NvdW50ZXI8MCYmKG8uX2djQ291bnRlcj1vLmdjRnJlcXVlbmN5LG8uX2dldENhY2hlU2l6ZSgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIG8uX3JlbW92ZUxlYXN0UmVjZW50bHlBY2Nlc3NlZChlLW8ubWF4Qnl0ZVNpemUpfSkpfSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBudWxsPT10aGlzLl9kYj9yLnJlc29sdmUobnVsbCk6ci5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBpKHQuX2RiLnRyYW5zYWN0aW9uKHQuX3N0b3JlTmFtZSxcInJlYWRvbmx5XCIpLm9iamVjdFN0b3JlKHQuX3N0b3JlTmFtZSkuZ2V0KGUpKX0pLnRoZW4oZnVuY3Rpb24obil7aWYobnVsbD09bikrK3QuX21pc3M7ZWxzZXsrK3QuX2hpdDt0Ll9kYi50cmFuc2FjdGlvbihcImxhc3RfYWNjZXNzXCIsXCJyZWFkd3JpdGVcIikub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKS5wdXQoe2RhdGU6KG5ldyBEYXRlKS5nZXRUaW1lKCksYnl0ZVNpemU6bi5ieXRlU2l6ZX0sZSl9cmV0dXJuIG59KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4rK3QuX21pc3MsbnVsbH0pfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbnVsbD09dGhpcy5fZGI/ci5yZXNvbHZlKCk6ci5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3ZhciBuPXQuX2RiLnRyYW5zYWN0aW9uKFt0Ll9zdG9yZU5hbWUsXCJsYXN0X2FjY2Vzc1wiXSxcInJlYWR3cml0ZVwiKSxyPW4ub2JqZWN0U3RvcmUodC5fc3RvcmVOYW1lKSxpPW4ub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKTtyZXR1cm4gci5kZWxldGUoZSksaS5kZWxldGUoZSksbyhuKX0pfSxlLnByb3RvdHlwZS5fcHV0PWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5fZGIudHJhbnNhY3Rpb24oW3RoaXMuX3N0b3JlTmFtZSxcImxhc3RfYWNjZXNzXCJdLFwicmVhZHdyaXRlXCIpO3JldHVybiBuLm9iamVjdFN0b3JlKHRoaXMuX3N0b3JlTmFtZSkucHV0KHQsZSksbi5vYmplY3RTdG9yZShcImxhc3RfYWNjZXNzXCIpLnB1dCh7ZGF0ZToobmV3IERhdGUpLmdldFRpbWUoKSxieXRlU2l6ZTp0LmJ5dGVTaXplfSxlKSxvKG4pfSxlLnByb3RvdHlwZS5fcmVtb3ZlTGVhc3RSZWNlbnRseUFjY2Vzc2VkPWZ1bmN0aW9uKGUpe2lmKCEoZTw9MCkpe3ZhciB0PXRoaXMuX2RiLnRyYW5zYWN0aW9uKFt0aGlzLl9zdG9yZU5hbWUsXCJsYXN0X2FjY2Vzc1wiXSxcInJlYWR3cml0ZVwiKSxuPXQub2JqZWN0U3RvcmUodGhpcy5fc3RvcmVOYW1lKSxyPXQub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKSxpPTAscz1yLmluZGV4KFwiZGF0ZVwiKS5vcGVuQ3Vyc29yKG51bGwsXCJuZXh0XCIpO3JldHVybiBzLm9uc3VjY2Vzcz1mdW5jdGlvbih0KXt2YXIgbz1zLnJlc3VsdDtudWxsIT1vJiYobnVsbCE9by52YWx1ZS5ieXRlU2l6ZSYmKGkrPW8udmFsdWUuYnl0ZVNpemUpLG4uZGVsZXRlKG8ucHJpbWFyeUtleSksci5kZWxldGUoby5wcmltYXJ5S2V5KSxpPGUmJm8uY29udGludWUoKSl9LG8odCl9fSxlLnByb3RvdHlwZS5fZ2V0Q2FjaGVTaXplPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fZGIudHJhbnNhY3Rpb24oXCJsYXN0X2FjY2Vzc1wiKSx0PWUub2JqZWN0U3RvcmUoXCJsYXN0X2FjY2Vzc1wiKSxuPTAscj10LmluZGV4KFwiYnl0ZVNpemVcIikub3BlbktleUN1cnNvcigpO3JldHVybiByLm9uc3VjY2Vzcz1mdW5jdGlvbihlKXt2YXIgdD1yLnJlc3VsdDtpZih0KXt2YXIgbz10LmtleTtudWxsIT1vJiYobis9byksdC5jb250aW51ZSgpfX0sbyhlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG59KX0sZX0oKTt0LklEQkNhY2hlPXMsdC53aGVuVHJhbnNhY3Rpb249byx0LndoZW5SZXF1ZXN0PWl9KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/arcgis-js-api/views/3d/layers/i3s/IDBCache.js\n");

/***/ })

}]);
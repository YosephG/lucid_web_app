(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/ElevationLayer":1229,"C:/Users/mlinden.LUCIDENERGY/Desktop/Web Apps/Node Dev/esri-webpack-template/node_modules/arcgis-js-api/layers/ElevationLayer":1229,"esri/views/layers/RefreshableLayerView":1305,"esri/layers/support/rasterFormats/LercCodec":1431,"C:/Users/mlinden.LUCIDENERGY/Desktop/Web Apps/Node Dev/esri-webpack-template/node_modules/arcgis-js-api/layers/support/rasterFormats/LercCodec":1431,"esri/views/3d/layers/TileLayerView3D":1461,"esri/views/3d/layers/support/tiledLayerUtils":1590,"C:/Users/mlinden.LUCIDENERGY/Desktop/Web Apps/Node Dev/esri-webpack-template/node_modules/arcgis-js-api/views/3d/layers/support/tiledLayerUtils":1590})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{1229:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(12),r(2),r(1),r(78),r(14),r(27),r(9),r(8),r(22),r(0),r(139),r(77),r(1341),r(132),r(130),r(1431)],void 0===(n=function(e,t,i,n,a,o,l,s,p,u,c,f,d,h,y,m,v,g){return function(e){function t(t){var r=e.call(this)||this;return r.copyright=null,r.heightModelInfo=null,r.opacity=1,r.operationalLayerType="ArcGISTiledElevationServiceLayer",r.type="elevation",r.url=null,r}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?i({url:e},t):e},Object.defineProperty(t.prototype,"minScale",{get:function(){},set:function(e){this.constructed&&l.deprecated(this.declaredClass+".minScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxScale",{get:function(){},set:function(e){this.constructed&&l.deprecated(this.declaredClass+".maxScale support has been removed.","","4.5")},enumerable:!0,configurable:!0}),t.prototype.load=function(){var e=this;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new p("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}}).always(function(){return e._fetchImageService()})),this.when()},t.prototype.fetchTile=function(e,t,r,i){var n=this;return void 0===i&&(i=0),this.load().then(function(){return n._fetchTileAvailability(e,t,r)}).then(function(){var i=n.getTileUrl(e,t,r);return s(i,{responseType:"array-buffer",failOk:!0})}).then(function(e){var t=g.decode(e.data,{noDataValue:i,returnFileInfo:!0});return{values:t.pixelData,width:t.width,height:t.height,maxZError:t.fileInfo.maxZError,noDataValue:t.noDataValue}})},t.prototype.getTileUrl=function(e,t,r){var n=!this.tilemapCache&&this.supportsBlankTile,a=o.objectToQuery(i({},this.parsedUrl.query,{blankTile:!n&&null}));return this.parsedUrl.path+"/tile/"+e+"/"+t+"/"+r+(a?"?"+a:"")},t.prototype.queryElevation=function(e,t){var i=this;return u.create(function(e){return r.e(8).then(function(){var t=[r(1428)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(r){return(new r.ElevationQuery).query(i,e,t)})},t.prototype.createElevationSampler=function(e,t){var i=this;return u.create(function(e){return r.e(8).then(function(){var t=[r(1428)];e.apply(null,t)}.bind(this)).catch(r.oe)}).then(function(r){return(new r.ElevationQuery).createSampler(i,e,t)})},t.prototype.importLayerViewModule=function(e){switch(e.type){case"2d":return u.reject(new p("elevation-layer:view-not-supported","ElevationLayer is only supported in 3D"));case"3d":return u.create(function(e){return Promise.all([r.e(4),r.e(5),r.e(6),r.e(50)]).then(function(){var t=[r(1522)];e.apply(null,t)}.bind(this)).catch(r.oe)})}},t.prototype._fetchTileAvailability=function(e,t,r){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r):u.resolve("unknown")},t.prototype._fetchImageService=function(){var e=this;return u.resolve().then(function(){if(e.resourceInfo)return e.resourceInfo;var t={query:i({f:"json"},e.parsedUrl.query),responseType:"json",callbackParamName:"callback"};return s(e.parsedUrl.path,t)}).then(function(t){t.ssl&&(e.url=e.url.replace(/^http:/i,"https:")),e.read(t.data,{origin:"service",url:e.parsedUrl})})},a([f.property({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),a([f.property({readOnly:!0,type:d})],t.prototype,"heightModelInfo",void 0),a([f.property({json:{read:!1,write:!1}})],t.prototype,"minScale",null),a([f.property({json:{read:!1,write:!1}})],t.prototype,"maxScale",null),a([f.property({json:{read:!1,write:!1}})],t.prototype,"opacity",void 0),a([f.property()],t.prototype,"operationalLayerType",void 0),a([f.property()],t.prototype,"resourceInfo",void 0),a([f.property({json:{read:!1},value:"elevation",readOnly:!0})],t.prototype,"type",void 0),a([f.property({json:{origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writer:c.writeOperationalLayerUrl}}}}})],t.prototype,"url",void 0),a([f.subclass("esri.layers.ElevationLayer")],t)}(f.declared(h,y,m,v))}.apply(null,i))||(e.exports=n)},1305:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(2),r(1),r(4),r(0)],void 0===(n=function(e,t,r,i,n,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t}return r(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},i([a.property()],t.prototype,"layer",void 0),i([a.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),i([a.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),i([a.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(a.declared(n))}.apply(null,i))||(e.exports=n)},1431:function(e,t,r){var i;void 0===(i=function(){var e={defaultNoDataValue:-3.4027999387901484e38,decode:function(a,o){var l=(o=o||{}).encodedMaskData||null===o.encodedMaskData,s=n(a,o.inputOffset||0,l),p=null!=o.noDataValue?o.noDataValue:e.defaultNoDataValue,u=t(s,o.pixelType||Float32Array,o.encodedMaskData,p,o.returnMask),c={width:s.width,height:s.height,pixelData:u.resultPixels,minValue:s.pixels.minValue,maxValue:s.pixels.maxValue,noDataValue:p};return u.resultMask&&(c.maskData=u.resultMask),o.returnEncodedMask&&s.mask&&(c.encodedMaskData=s.mask.bitset?s.mask.bitset:null),o.returnFileInfo&&(c.fileInfo=r(s),o.computeUsedBitDepths&&(c.fileInfo.bitDepths=i(s))),c}},t=function(e,t,r,i,n){var o,l,s=0,p=e.pixels.numBlocksX,u=e.pixels.numBlocksY,c=Math.floor(e.width/p),f=Math.floor(e.height/u),d=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),o=new t(e.width*e.height),n&&r&&(l=new Uint8Array(e.width*e.height));for(var h,y,m=new Float32Array(c*f),v=0;v<=u;v++){var g=v!==u?f:e.height%u;if(0!==g)for(var w=0;w<=p;w++){var k=w!==p?c:e.width%p;if(0!==k){var x,b,I,V,D=v*e.width*f+w*c,U=e.width-k,B=e.pixels.blocks[s];if(B.encoding<2?(0===B.encoding?x=B.rawData:(a(B.stuffedData,B.bitsPerPixel,B.numValidPixels,B.offset,d,m,e.pixels.maxValue),x=m),b=0):I=2===B.encoding?0:B.offset,r)for(y=0;y<g;y++){for(7&D&&(V=r[D>>3],V<<=7&D),h=0;h<k;h++)7&D||(V=r[D>>3]),128&V?(l&&(l[D]=1),o[D++]=B.encoding<2?x[b++]:I):(l&&(l[D]=0),o[D++]=i),V<<=1;D+=U}else if(B.encoding<2)for(y=0;y<g;y++){for(h=0;h<k;h++)o[D++]=x[b++];D+=U}else for(y=0;y<g;y++){for(h=0;h<k;h++)o[D++]=I;D+=U}if(1===B.encoding&&b!==B.numValidPixels)throw"Block and Mask do not match";s++}}}return{resultPixels:o,resultMask:l}},r=function(e){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:this.noDataValue}}},i=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},i=0;i<t;i++){var n=e.pixels.blocks[i];0===n.encoding?r.float32=!0:1===n.encoding?r[n.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},n=function(e,t,r){var i={},n=new Uint8Array(e,t,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,n),"CntZImage"!=i.fileIdentifierString.trim())throw"Unexpected file identifier string: "+i.fileIdentifierString;t+=10;var a=new DataView(e,t,24);if(i.fileVersion=a.getInt32(0,!0),i.imageType=a.getInt32(4,!0),i.height=a.getUint32(8,!0),i.width=a.getUint32(12,!0),i.maxZError=a.getFloat64(16,!0),t+=24,!r)if(a=new DataView(e,t,16),i.mask={},i.mask.numBlocksY=a.getUint32(0,!0),i.mask.numBlocksX=a.getUint32(4,!0),i.mask.numBytes=a.getUint32(8,!0),i.mask.maxValue=a.getFloat32(12,!0),t+=16,i.mask.numBytes>0){var o=new Uint8Array(Math.ceil(i.width*i.height/8)),l=(a=new DataView(e,t,i.mask.numBytes)).getInt16(0,!0),s=2,p=0;do{if(l>0)for(;l--;)o[p++]=a.getUint8(s++);else{var u=a.getUint8(s++);for(l=-l;l--;)o[p++]=u}l=a.getInt16(s,!0),s+=2}while(s<i.mask.numBytes);if(-32768!==l||p<o.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=o,t+=i.mask.numBytes}else if(0==(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)){o=new Uint8Array(Math.ceil(i.width*i.height/8));i.mask.bitset=o}a=new DataView(e,t,16),i.pixels={},i.pixels.numBlocksY=a.getUint32(0,!0),i.pixels.numBlocksX=a.getUint32(4,!0),i.pixels.numBytes=a.getUint32(8,!0),i.pixels.maxValue=a.getFloat32(12,!0),t+=16;var c=i.pixels.numBlocksX,f=i.pixels.numBlocksY,d=c+(i.width%c>0?1:0),h=f+(i.height%f>0?1:0);i.pixels.blocks=new Array(d*h);for(var y=1e9,m=0,v=0;v<h;v++)for(var g=0;g<d;g++){var w=0,k=e.byteLength-t;a=new DataView(e,t,Math.min(10,k));var x={};i.pixels.blocks[m++]=x;var b=a.getUint8(0);if(w++,x.encoding=63&b,x.encoding>3)throw"Invalid block encoding ("+x.encoding+")";if(2!==x.encoding){if(0!==b&&2!==b){if(b>>=6,x.offsetType=b,2===b)x.offset=a.getInt8(1),w++;else if(1===b)x.offset=a.getInt16(1,!0),w+=2;else{if(0!==b)throw"Invalid block offset type";x.offset=a.getFloat32(1,!0),w+=4}if(y=Math.min(x.offset,y),1===x.encoding)if(b=a.getUint8(w),w++,x.bitsPerPixel=63&b,b>>=6,x.numValidPixelsType=b,2===b)x.numValidPixels=a.getUint8(w),w++;else if(1===b)x.numValidPixels=a.getUint16(w,!0),w+=2;else{if(0!==b)throw"Invalid valid pixel count type";x.numValidPixels=a.getUint32(w,!0),w+=4}}var I;if(t+=w,3!=x.encoding)if(0===x.encoding){var V=(i.pixels.numBytes-1)/4;if(V!==Math.floor(V))throw"uncompressed block has invalid length";I=new ArrayBuffer(4*V),new Uint8Array(I).set(new Uint8Array(e,t,4*V));for(var D=new Float32Array(I),U=0;U<D.length;U++)y=Math.min(y,D[U]);x.rawData=D,t+=4*V}else if(1===x.encoding){var B=Math.ceil(x.numValidPixels*x.bitsPerPixel/8),T=Math.ceil(B/4);I=new ArrayBuffer(4*T),new Uint8Array(I).set(new Uint8Array(e,t,B)),x.stuffedData=new Uint32Array(I),t+=B}}else t++,y=Math.min(y,0)}return i.pixels.minValue=y,i.eofOffset=t,i},a=function(e,t,r,i,n,a,o){var l,s,p,u=(1<<t)-1,c=0,f=0,d=Math.ceil((o-i)/n),h=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*h,l=0;l<r;l++){if(0===f&&(p=e[c++],f=32),f>=t)s=p>>>f-t&u,f-=t;else{var y=t-f;s=(p&u)<<y&u,s+=(p=e[c++])>>>(f=32-y)}a[l]=s<d?i+s*n:o}return a};return e}.apply(null,[]))||(e.exports=i)},1461:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(11),r(1),r(8),r(17),r(0),r(1588),r(1590),r(1649),r(1305)],void 0===(n=function(e,t,r,i,n,a,o,l,s,p,u){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"imageFormatIsOpaque",{get:function(){return"jpg"===this.get("layer.tileInfo.format")},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var e=this,t=this._getTileInfoSupportError(this.tileInfo,this.layer.fullExtent);if(t)this.addResolvingPromise(n.reject(t));else{var r=a.whenTrueOnce(this.view,"basemapTerrain.tilingSchemeLocked").then(function(){var t=e.view.basemapTerrain.tilingScheme;s.throwIfError(e._getTileInfoCompatibilityError(e.tileInfo,t))});this.addResolvingPromise(r)}this.addResolvingPromise(s.checkArcGISServiceVersionCompatibility(this.layer)),this._updateMinMaxDataLevel(),this.maxDataLevel=Math.min(this.maxDataLevel,p.getKnownTiledServiceLevelCap(this.layer.url))},t.prototype.doRefresh=function(){this.suspended||this.emit("data-changed")},i([o.property({readOnly:!0,dependsOn:["layer.tileInfo.format"]})],t.prototype,"imageFormatIsOpaque",null),i([o.property({aliasOf:"layer.fullExtent"})],t.prototype,"fullExtent",void 0),i([o.property()],t.prototype,"layer",void 0),i([o.property({aliasOf:"layer.tileInfo"})],t.prototype,"tileInfo",void 0),i([o.subclass("esri.views.3d.layers.TileLayerView3D")],t)}(o.declared(l,u))}.apply(null,i))||(e.exports=n)},1590:function(e,t,r){var i,n;i=[r.dj.c(e.i),t,r(251),r(9),r(8),r(129)],void 0===(n=function(e,t,r,i,n,a){Object.defineProperty(t,"__esModule",{value:!0}),t.checkArcGISServiceVersionCompatibility=function(e){if(!a.isHostedAgolService(e.url)){if(e.version<10.22){var t=new i("layerview:service-version-too-old","Tiled Map Layers on servers prior to 10.2.2 are not supported. Detected version: "+e.version,{minVersion:10.22,detectedVersion:e.version});return n.reject(t)}if(10.22!==e.version||a.isHostedSecuredProxyService(e.url,e.get("portalItem.id")))return n.resolve();var o=function(e){var t=null,r=e.search(/\/rest\/services\//i);return r>0&&(t=e.substring(0,r+6)),t}(e.url),l=new i("tiledlayerview3d:service-missing-cors-patch","Tiled Map Layers from 10.2.2 servers are only supported if all server updates have been applied.");return r(o+"self?f=json",{headers:{"X-Requested-With":null},timeout:1e4,handleAs:"json"}).then(function(e){if(!e||e.error)throw l}).catch(function(){throw l})}},t.throwIfError=function(e){if(e)throw e}}.apply(null,i))||(e.exports=n)}}]);